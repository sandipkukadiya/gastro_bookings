<div class="container">
    <div class="row">
        <div class="col-md-12">
            <h3 translate="RESTAURANT_DETAIL.RESTAURANT DASHBOARD"></h3>
        </div>
        <div class="col-md-3">
            <ul class="nav nav-pills nav-stacked">
                <li class="active">
                    <a data-toggle="pill" target="_self" ng-href="#requests">
                        <span translate="CLIENT.Requests"></span>
                        <span ng-if="!vm.reqCountLoading && vm.new_unread + vm.confirm_unread + vm.cancel_unread > 0"> ({{ vm.new_unread + vm.confirm_unread + vm.cancel_unread }})</span>
                    </a>
                </li>
                <li><a data-toggle="pill" target="_self" ng-href="#ratings" translate="RESTAURANT_DETAIL.RATINGS"></a></li>
            </ul>
        </div>
        <div class="col-md-9">
            <div class="tab-content">
                <div id="requests" class="tab-pane fade in active">
                    <div class="col-md-8 meal_request_tab" ng-if="!vm.reqCountLoading">
                        <div class="col-md-2 centered" ng-class="{active : requestTab == 'newRequests'}">
                            <a class="request_tab_menu" ng-href="#" data-toggle="pill" target="_self" ng-click="show('newRequests')" >
                            <span translate="CLIENT.NEW"></span>
                            <span ng-if="vm.new_unread > 0" >
                                ( {{ vm.new_unread }} )
                            </span>
                            </a>
                        </div>

                        <div class="col-md-2 centered" ng-class="{active : requestTab == 'pendingRequests'}">
                            <a class="request_tab_menu" ng-href="#" data-toggle="pill" target="_self" ng-click="show('pendingRequests')" >
                            <span translate="PREREG.PENDING"></span>
                            </a>
                        </div>
                        <div class="col-md-3 centered" ng-class="{active : requestTab == 'confirmedRequests'}">
                            <a class="request_tab_menu" ng-href="#" data-toggle="pill" target="_self" ng-click="show('confirmedRequests')">
                                <span translate="CLIENT.CONFIRMED REQUEST" ></span>
                                <span ng-if="vm.confirm_unread > 0">
                                    ( {{ vm.confirm_unread }} )
                                </span>
                            </a>
                        </div>
                        <div class="col-md-3 centered" ng-class="{active : requestTab == 'cancelledRequests'}">
                            <a class="request_tab_menu" ng-href="#" data-toggle="pill" class="pull-right" target="_self" ng-click="show('cancelledRequests')">
                                <span translate="CLIENT.CANCELLED" ></span>
                                <span ng-if="vm.cancel_unread > 0">
                                    ( {{ vm.cancel_unread }} )
                                </span>
                            </a>
                        </div>
                        <div class="col-md-12"><br></div>
                    </div>
                    <div class="col-md-4" ng-if="!vm.reqCountLoading">
                        <button class="btn btn-sm refresh-btn pull-right" ng-click="vm.refreshRequests();">
                            <i class="fa fa-refresh" aria-hidden="true"></i>
                            <span translate="CLIENT.REFRESH"></span>
                        </button>
                    </div>

                    <div id="newRequests"  ng-show="requestTab=='newRequests'" class="all_meal_request" >
                        <div class="col-md-12" ng-if="vm.reqLoading">
                            <div class="col-md-12 text-center v-center-lg">
                                <img src="assets/images/loading.gif" alt="loading">
                            </div>
                        </div>
                        <div class="col-md-12" ng-if="!vm.reqLoading">
                            <div class="empty-orders col-md-12" ng-if="vm.isRequestEmpty || allrequest.length == 0">
                                <div class="error cl-brown col-md-12">
                                    <strong translate="CLIENT.NO REQUESTED MEAL"></strong>
                                </div>
                            </div>
                            
                            <ul class="list-group">
                                <div ng-if="!vm.isRequestEmpty" dir-paginate="getRequest in vm.getRequests | itemsPerPage: vm.requestPerPage as allrequest" class="meal_content" total-items="vm.totalrequests" current-page="vm.requestCurrentPage" pagination-id="paginate1">
                                    <li class="list-group-item" ng-init="vm.checkUnread[getRequest.ID] = (getRequest.unread == 'R') ? 'confirm_name' : ''" ng-class="vm.checkUnread[getRequest.ID]">
                                        <div class="pull-right btn-group btn-group-sm">
                                            <div class="inline" ng-repeat="detail in getRequest.orders.orders_detail |limitTo:1">
                                                <button ng-if="checkPreDate(detail.serve_at)" class="btn btn-warning btn-sm" ng-click="vm.cancelRequest(getRequest.ID)">
                                                    <span translate="CLIENT.CANCELNEW"></span>
                                                    <span ng-show="cancelId== getRequest.ID" class="fa fa-spinner fa-spin cl-brown"></span>
                                                </button>
                                            </div>
                                            <div class="inline">
                                                <button class="btn btn-info btn-sm" translate="CLIENT.DETAILSNEW" data-toggle="modal" data-target="#requestDetail{{getRequest.ID}}" ng-click="vm.changeStatusAsRead(getRequest.ID, 'N');"></button>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-8">
                                                <h4>
                                                    <span class="inline" ng-repeat="detail in getRequest.orders.orders_detail | orderBy: 'serve_at' | limitTo:1">
                                                    {{convertToDate(detail.serve_at) | date:'dd.MM.y HH:mm'}} - 
                                                    </span>
                                                    <span translate="CLIENT.REQUEST NUMBER"></span><span> {{getRequest.orders.ID}} </span>
                                                    <span> {{getRequest.orders.client_detail.user.name}}</span><span ng-fi="getRequest.orders.client_detail.phone">, <span translate="CLIENT.tel"></span>.: {{getRequest.orders.client_detail.phone}}</span>
                                                </h4>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-3">
                                                <div>
                                                    <span class="inline cl-gray" translate="CLIENT.PERSONS"></span>:
                                                    <i class="inline">{{getRequest.orders.persons}}</i>
                                                </div>
                                                <div>
                                                    <span class="inline cl-gray" translate="CLIENT.TOTAL ITEMS"></span>:
                                                    <i class="inline">{{ (getRequest.orders.orders_detail | filter: totalOrderDetail).length }}</i>
                                                </div>
                                            </div>
                                            <div class="col-md-5">
                                            </div>
                                            <div class="col-md-4">
                                                <div>
                                                    <span class="inline cl-gray" translate="CLIENT.ORDERED AT"></span>:
                                                    <i class="inline"
                                                    ng-if="getRequest.orders.created_at != 'Invalid Date'">{{convertToDate(getRequest.orders.created_at) | date:'dd.MM.y HH:mm'}}</i>
                                                </div>
                                                <div>
                                                    <span class="inline cl-gray" translate="CLIENT.TOTAL PRICE"></span>:
                                                    <i class="inline">{{getTotalPrice(getRequest.orders.orders_detail)}}</i>
                                                    <span class="inline" ng-repeat="detail in getRequest.orders.orders_detail |limitTo:1">
                                                    {{detail.currency}}
                                                    </span>
                                                </div>
                                            </div>
                                        </div>

                                        <div ng-if="order.comment">
                                            <hr>
                                            <div>
                                                <span class="cl-gray" translate="CLIENT.ORDER COMMENT"></span>:
                                                <i class="inline" ng-text-truncate="order.comment"
                                                ng-tt-chars-threshold="5"></i>
                                            </div>
                                        </div>

                                    </li>
                                </div>
                                <li class="pagination pagination-separated pagination-rounded text-center">
                                    <dir-pagination-controls on-page-change="pageChangeHandler()" pagination-id="paginate1"></dir-pagination-controls>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div id="pendingRequests"  ng-show="requestTab=='pendingRequests'" class="all_meal_request">
                        <div class="col-md-12" ng-if="vm.reqPLoading">
                            <div class="col-md-12 text-center v-center-lg">
                                <img src="assets/images/loading.gif" alt="loading">
                            </div>
                        </div>
                        <div class="col-md-12" ng-if="!vm.reqPLoading">
                            <div class="col-md-12" ng-if="vm.isPendingRequestEmpty || pendingrequest.length == 0">
                                <div class="error cl-brown col-md-12">
                                    <strong translate="CLIENT.NO PENDING REQUESTE"></strong>
                                </div>
                            </div>

                            <ul class="list-group">
                                <div ng-if="!vm.isPendingRequestEmpty" dir-paginate="getRequest in vm.getPendingRequest | itemsPerPage: vm.pendingrequestPerPage as pendingrequest" class="meal_content" total-items="vm.pendingtotalrequests" current-page="vm.pendingrequestCurrentPage" pagination-id="paginate2">
                                    <li class="list-group-item" ng-init="vm.checkUnread[getRequest.ID] = (getRequest.unread == 'C') ? 'confirm_name' : ''" >
                                        <div class="pull-right btn-group btn-group-sm">
                                            <div class="inline" ng-repeat="detail in getRequest.orders.orders_detail |limitTo:1">
                                                <button ng-if="checkPreDate(detail.serve_at)" class="btn btn-warning btn-sm fff" ng-click="vm.cancelRequest(getRequest.ID)">
                                                    <span translate="CLIENT.CANCELNEW"></span>
                                                    <span ng-show="cancelId== getRequest.ID" class="fa fa-spinner fa-spin cl-brown"></span>
                                                </button>
                                            </div>
                                            <div class="inline" > 
                                                <button class="btn btn-info btn-sm" translate="CLIENT.DETAILSNEW" data-toggle="modal" data-target="#requestDetail{{getRequest.ID}}" ng-click=""></button>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-8">
                                                <h4>
                                                    <span class="inline" ng-repeat="detail in getRequest.orders.orders_detail | orderBy: 'serve_at' | limitTo:1">
                                                    {{convertToDate(detail.serve_at) | date:'dd.MM.y HH:mm'}} - 
                                                    </span>
                                                    <span translate="CLIENT.REQUEST NUMBER"></span><span> {{getRequest.orders.ID}} </span>
                                                    <span> {{getRequest.orders.client_detail.user.name}}</span><span ng-fi="getRequest.orders.client_detail.phone">, <span translate="CLIENT.tel"></span>.: {{getRequest.orders.client_detail.phone}}</span>
                                                </h4>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-3">
                                                <div>
                                                    <span class="inline cl-gray" translate="CLIENT.PERSONS"></span>:
                                                    <i class="inline">{{getRequest.orders.persons}}</i>
                                                </div>
                                                <div>
                                                    <span class="inline cl-gray" translate="CLIENT.TOTAL ITEMS"></span>:
                                                    <i class="inline">{{ (getRequest.orders.orders_detail | filter: totalOrderDetail).length }}</i>
                                                </div>
                                            </div>
                                            <div class="col-md-5">
                                            </div>
                                            <div class="col-md-4">
                                                <div>
                                                    <span class="inline cl-gray" translate="CLIENT.ORDERED AT"></span>:
                                                    <i class="inline"
                                                    ng-if="getRequest.orders.created_at != 'Invalid Date'">{{convertToDate(getRequest.orders.created_at) | date:'dd.MM.y HH:mm'}}</i>
                                                </div>
                                                <div>
                                                    <span class="inline cl-gray" translate="CLIENT.TOTAL PRICE"></span>:
                                                    <i class="inline">{{getTotalPrice(getRequest.orders.orders_detail)}}</i>
                                                    <span class="inline" ng-repeat="detail in getRequest.orders.orders_detail |limitTo:1">
                                                    {{detail.currency}}
                                                    </span>
                                                </div>
                                            </div>
                                        </div>

                                        <div ng-if="order.comment">
                                            <hr>
                                            <div>
                                                <span class="cl-gray" translate="CLIENT.ORDER COMMENT"></span>:
                                                <i class="inline" ng-text-truncate="order.comment"
                                                ng-tt-chars-threshold="5"></i>
                                            </div>
                                        </div>

                                    </li>
                                </div>
                                <li class="pagination pagination-separated pagination-rounded text-center">
                                    <dir-pagination-controls on-page-change="pendingPageChangeHandler()" pagination-id="paginate2"></dir-pagination-controls>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div id="confirmedRequests"  ng-show="requestTab=='confirmedRequests'" class="all_meal_request">
                        <div class="col-md-12" ng-if="vm.reqCLoading">
                            <div class="col-md-12 text-center v-center-lg">
                                <img src="assets/images/loading.gif" alt="loading">
                            </div>
                        </div>
                        <div class="col-md-12" ng-if="!vm.reqCLoading">
                            <div class="col-md-12" ng-if="vm.isConfirmRequestEmpty || confirmrequest.length == 0">
                                <div class="error cl-brown col-md-12">
                                    <strong translate="CLIENT.NO CONFIRMED REQUESTE"></strong>
                                </div>
                            </div>
                            <ul class="list-group">

                                <div ng-if="!vm.isConfirmRequestEmpty" dir-paginate="getRequest in vm.getConfirmRequest | itemsPerPage: vm.confirmrequestPerPage as confirmrequest" class="meal_content" total-items="vm.confirmtotalrequests" current-page="vm.confirmrequestCurrentPage" pagination-id="paginate3">
                                    <li class="list-group-item" ng-init="vm.checkUnread[getRequest.ID] = (getRequest.unread == 'R') ? 'confirm_name' : ''" ng-class="vm.checkUnread[getRequest.ID]">
                                        <div class="pull-right btn-group btn-group-sm">

                                            <div class="inline" ng-repeat="detail in getRequest.orders.orders_detail |limitTo:1">
                                                <button ng-if="checkPreDate(detail.serve_at)" class="btn btn-warning btn-sm"  ng-click="vm.cancelRequest(getRequest.ID)">
                                                    <span translate="CLIENT.CANCELNEW"></span>
                                                    <span ng-show="cancelId== getRequest.ID" class="fa fa-spinner fa-spin cl-brown"></span>
                                                </button>
                                            </div>
                                            <div class="inline" >
                                                <button class="btn btn-info btn-sm" translate="CLIENT.DETAILSNEW" data-toggle="modal" data-target="#requestConfirmDetail{{getRequest.ID}}" ng-click="vm.changeStatusAsRead(getRequest.ID, 'C');"></button>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-8">
                                                <h4>
                                                    <span class="inline" ng-repeat="detail in getRequest.orders.orders_detail | orderBy: 'serve_at' | limitTo:1">
                                                    {{convertToDate(detail.serve_at) | date:'dd.MM.y HH:mm'}} - 
                                                    </span>
                                                    <span translate="CLIENT.REQUEST NUMBER"></span><span> {{getRequest.orders.ID}}</span>
                                                    <span> {{getRequest.orders.client_detail.user.name}}</span><span ng-fi="getRequest.orders.client_detail.phone">, <span translate="CLIENT.tel"></span>.: {{getRequest.orders.client_detail.phone}}</span>
                                                </h4>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-3">
                                                <div>
                                                    <span class="inline cl-gray" translate="CLIENT.PERSONS"></span>:
                                                    <i class="inline">{{getRequest.orders.persons}}</i>
                                                </div>
                                                <div>
                                                    <span class="inline cl-gray" translate="CLIENT.TOTAL ITEMS"></span>:
                                                    <i class="inline">{{ (getRequest.orders.orders_detail | filter: totalOrderDetail).length }}</i>
                                                </div>
                                            </div>
                                            <div class="col-md-5">
                                            </div>
                                            <div class="col-md-4">
                                                <div>
                                                    <span class="inline cl-gray" translate="CLIENT.ORDERED AT"></span>:
                                                    <i class="inline"
                                                    ng-if="getRequest.orders.created_at != 'Invalid Date'">{{convertToDate(getRequest.orders.created_at) | date:'dd.MM.y HH:mm'}}</i>
                                                </div>
                                                <div>
                                                    <span class="inline cl-gray" translate="CLIENT.TOTAL PRICE"></span>:
                                                    <i class="inline">{{getTotalPrice(getRequest.orders.orders_detail)}}</i>
                                                    <span class="inline" ng-repeat="detail in getRequest.orders.orders_detail |limitTo:1">
                                                    {{detail.currency}}
                                                    </span>
                                                </div>
                                            </div>
                                        </div>

                                        <div ng-if="order.comment">
                                            <hr>
                                            <div>
                                                <span class="cl-gray" translate="CLIENT.ORDER COMMENT"></span>:
                                                <i class="inline" ng-text-truncate="order.comment"
                                                ng-tt-chars-threshold="5"></i>
                                            </div>
                                        </div>

                                    </li>
                                </div>

                                <li class="pagination pagination-separated pagination-rounded text-center">
                                    <dir-pagination-controls on-page-change="confirmPageChangeHandler()" pagination-id="paginate3"></dir-pagination-controls>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div id="cancelledRequests"  ng-show="requestTab=='cancelledRequests'" class="all_meal_request">
                        <div class="col-md-12" ng-if="vm.reqCaLoading">
                            <div class="col-md-12 text-center v-center-lg">
                                <img src="assets/images/loading.gif" alt="loading">
                            </div>
                        </div>
                        <div class="col-md-12" ng-if="!vm.reqCaLoading">
                            <div class="col-md-12" ng-if="vm.isCancelRequestEmpty || cancelrequest.length == 0">
                                <div class="error cl-brown col-md-12">
                                    <strong translate="CLIENT.NO CANCELLED REQUESTE"></strong>
                                </div>
                            </div>
                            <ul class="list-group">
                                <div ng-if="!vm.isCancelRequestEmpty" dir-paginate="getRequest in vm.getCancelRequests | itemsPerPage: vm.cancelrequestPerPage as cancelrequest" class="meal_content" total-items="vm.canceltotalrequests" current-page="vm.cancelrequestCurrentPage" pagination-id="paginate4">
                                    <li class="list-group-item" ng-init="vm.checkUnread[getRequest.ID] = (getRequest.unread == 'R') ? 'confirm_name' : ''" ng-class="vm.checkUnread[getRequest.ID]">
                                        <div class="pull-right btn-group btn-group-sm">
                                            <button class="btn btn-info btn-sm" translate="CLIENT.DETAILSNEW" data-toggle="modal" data-target="#requestDetail{{getRequest.ID}}" ng-click="vm.changeStatusAsRead(getRequest.ID, 'CA');"></button>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-8">
                                                <h4>
                                                    <span class="inline" ng-repeat="detail in getRequest.orders.orders_detail | orderBy: 'serve_at' | limitTo:1">
                                                    {{convertToDate(detail.serve_at) | date:'dd.MM.y HH:mm'}} - 
                                                    </span>
                                                    <span translate="CLIENT.REQUEST NUMBER"></span><span> {{getRequest.orders.ID}}</span>
                                                    <span> {{getRequest.orders.client_detail.user.name}}</span><span ng-fi="getRequest.orders.client_detail.phone">, <span translate="CLIENT.tel"></span>.: {{getRequest.orders.client_detail.phone}}</span>
                                                </h4>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-3">
                                                <div>
                                                    <span class="inline cl-gray" translate="CLIENT.PERSONS"></span>:
                                                    <i class="inline">{{getRequest.orders.persons}}</i>
                                                </div>
                                                <div>
                                                    <span class="inline cl-gray" translate="CLIENT.TOTAL ITEMS"></span>:
                                                    <i class="inline">{{ (getRequest.orders.orders_detail | filter: totalOrderDetail).length }}</i>
                                                </div>
                                            </div>
                                            <div class="col-md-5">
                                            </div>
                                            <div class="col-md-4">
                                                <div>
                                                    <span class="inline cl-gray" translate="CLIENT.ORDERED AT"></span>:
                                                    <i class="inline"
                                                    ng-if="getRequest.orders.created_at != 'Invalid Date'">{{convertToDate(getRequest.orders.created_at) | date:'dd.MM.y HH:mm'}}</i>
                                                </div>
                                                <div>
                                                    <span class="inline cl-gray" translate="CLIENT.TOTAL PRICE"></span>:
                                                    <i class="inline">{{getTotalPrice(getRequest.orders.orders_detail)}}</i>
                                                    <span class="inline" ng-repeat="detail in getRequest.orders.orders_detail |limitTo:1">
                                                    {{detail.currency}}
                                                    </span>
                                                </div>
                                            </div>
                                        </div>

                                        <div ng-if="order.comment">
                                            <hr>
                                            <div>
                                                <span class="cl-gray" translate="CLIENT.ORDER COMMENT"></span>:
                                                <i class="inline" ng-text-truncate="order.comment"
                                                ng-tt-chars-threshold="5"></i>
                                            </div>
                                        </div>

                                    </li>
                                </div>

                                <li class="pagination pagination-separated pagination-rounded text-center">
                                    <dir-pagination-controls on-page-change="cancelPageChangeHandler()" pagination-id="paginate4"></dir-pagination-controls>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div id="ratings" class="tab-pane fade">

                </div>
            </div>
        </div>
    </div>
</div>

<div ng-if="!vm.reqLoading" ng-init="vm.gunit = 'CLIENT.g'; vm.mlunit = 'CLIENT.ml'; vm.pcsunit = 'CLIENT.pcs'; ">
    <!--requestDetail Modals-->
    <div class="modal fade custom_modal new_modal" ng-repeat="getRequest in vm.getRequests track by $index" id="requestDetail{{getRequest.ID}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="container" ng-init="vm.allgetOrederDetailLength[getRequest.ID] = (getRequest.orders.orders_detail).length; vm.getOrederDetailLength[getRequest.ID] = (getRequest.orders.orders_detail | filter: requestOrderDetailStatusFilter ).length; vm.allgetOrederDetail[getRequest.ID] = getRequest.orders.orders_detail | filter: requestOrderDetailStatusFilter;">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-body">
                        <div class="row container-fluid custom_container">
                            <div class="col-md-7">
                                <h5 class="pull-left"><label translate="CLIENT.REQUEST CONFIRMATION"></label></h5>
                            </div>
                            <div class="col-md-5">
                               <button type="button" class="close pull-right" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            </div>
                        </div>
                        <div class="row container-fluid custom_container">
                            <div class="col-md-2">
                                <h5 class="pull-left"><span class="inline" ng-repeat="detail in getRequest.orders.orders_detail |limitTo:1">
                                    {{convertToDate(detail.serve_at) | date:'dd.MM.y'}}
                                </span></h5>
                            </div>
                            <div class="col-md-2">
                               <h5> <span translate="CLIENT.ONO"></span> {{getRequest.orders.ID}}</h5>
                            </div>
                        </div>
                        <div class="row container-fluid custom_container">
                            <div class="col-md-3 request_meal container_head">
                                <h5 class="text-center"><label translate="CLIENT.REQUIRED"></label></h5>
                            </div>
                            <div class="col-md-4 confirm_meal container_head">
                                <h5 class="text-center"><label translate="CLIENT.CONFIRMED"></label></h5>
                            </div>
                        </div>
                        <div ng-repeat="order_detail in getRequest.orders.orders_detail track by $index" ng-show="!vm.cancelOrderDetail[order_detail.ID]">
                            <form name="requestdetail[order_detail.ID]">
                            <div ng-init="vm.orderStrikethrough[order_detail.ID] = (order_detail.status == 3) ? 'strikethrough' : ''; vm.orderReadOnly[order_detail.ID] = (order_detail.status == 3) ? 'true' : 'false'; checkDetailStatus[order_detail.ID] = (order_detail.status == 3) ? false : true;" class="container-fluid row custom_container" >
                                <div class="col-sm-3 request_meal">
                                    <div class="row custom_row custom_container">
                                        <div class="col-md-3">
                                            <div class="orderdetail_{{order_detail.ID}}"  ng-class="vm.orderStrikethrough[order_detail.ID]" ng-if="!order_detail.side_dish || order_detail.side_dish == 0">
                                             {{convertToDate(order_detail.serve_at) | date:'HH:mm'}}
                                            </div>
                                        </div>
                                        <div class="col-md-8">
                                            <span class="pull-left orderdetail_{{order_detail.ID}}"  ng-class="vm.orderStrikethrough[order_detail.ID]"> {{order_detail.x_number}}x {{order_detail.request_menu.name}} </span>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-4 confirm_meal">
                                    <div class="row custom_row">
                                        <div class="col-md-3 custom-col-md-3">
                                            <div ng-if="!order_detail.side_dish || order_detail.side_dish == 0" class="orderdetail_{{order_detail.ID}}">
                                                <div class=" orderdetail_{{order_detail.ID}}" ng-class="vm.orderStrikethrough[order_detail.ID]">
                                                <input 
                                                    class="form-control custom-form-control"
                                                    ng-required="true"
                                                    ng-disabled="(!isCollapsed[order_detail.ID] && order_detail.request_menu.request_ingredient.length != 0) || (vm.orderReadOnly[order_detail.ID] == true)"
                                                    ui-timepicker="vm.timeOptions" 
                                                    ng-init="confirmed_meal_time[order_detail.ID] = convertToDate(order_detail.serve_at) | date:'HH:mm'; confirmed_meal_date[order_detail.ID] = convertToDate(order_detail.serve_at) | date:'dd.MM.y'"
                                                    name="confirmed_meal_time"
                                                    ng-model="confirmed_meal_time[order_detail.ID]" 
                                                    ng-value="convertToDate(order_detail.serve_at) | date:'HH:mm'"
                                                    ng-keyup="checkMealValidation(getRequest.ID, order_detail.ID, requestdetail[order_detail.ID].$valid)" 
                                                    ng-change="checkMealValidation(getRequest.ID, order_detail.ID, requestdetail[order_detail.ID].$valid)" 
                                                > 
                                                <sup class="required_field error">*</sup>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-8 custom-col-md-8">
                                            <span class="orderdetail_{{order_detail.ID}}"  ng-class="vm.orderStrikethrough[order_detail.ID]" ng-if="order_detail.request_menu.confirmed_name" ng-show="!isCollapsed[order_detail.ID]">{{order_detail.x_number}}x  {{confirmed_meal_name[order_detail.request_menu.ID]}}</span>
                                            <span class="orderdetail_{{order_detail.ID}}"  ng-class="vm.orderStrikethrough[order_detail.ID]" ng-if="!order_detail.request_menu.confirmed_name" ng-show="!isCollapsed[order_detail.ID]" >{{order_detail.x_number}}x  {{confirmed_meal_name[order_detail.request_menu.ID]}}</span>

                                            <input 
                                            ng-if="order_detail.request_menu.confirmed_name"
                                            ng-hide="!isCollapsed[order_detail.ID]" 
                                            type="text" class="form-control custom-form-control" 
                                            ng-init="confirmed_meal_name[order_detail.request_menu.ID] = order_detail.request_menu.confirmed_name" 
                                            ng-required="true"
                                            ng-value="confirmed_meal_name[order_detail.request_menu.ID]" 
                                            ng-model="confirmed_meal_name[order_detail.request_menu.ID]" 
                                            uib-typeahead="menu.name for menu in menuList | filter:$viewValue | limitTo:10" 
                                            autocomplete="off"
                                            ng-keyup="checkMealValidation(getRequest.ID, order_detail.ID, requestdetail[order_detail.ID].$valid)"
                                            >
                                            <input 
                                            ng-if="!order_detail.request_menu.confirmed_name"
                                            ng-hide="!isCollapsed[order_detail.ID]" 
                                            type="text" class="form-control custom-form-control" 
                                            ng-init="confirmed_meal_name[order_detail.request_menu.ID] = order_detail.request_menu.name"
                                            ng-required="true"
                                            ng-value="confirmed_meal_name[order_detail.request_menu.ID]" 
                                            ng-model="confirmed_meal_name[order_detail.request_menu.ID]" 
                                            uib-typeahead="menu.name for menu in menuList | filter:$viewValue | limitTo:10"
                                            autocomplete="off" 
                                            ng-keyup="checkMealValidation(getRequest.ID, order_detail.ID, requestdetail[order_detail.ID].$valid)"
                                            >
                                            <sup class="required_field error" ng-hide="!isCollapsed[order_detail.ID]" >*</sup>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-5 action_sec">
                                    <div class="row custom_row">
                                        <div class="col-md-6">
                                            <div class="row">
                                                <div class="col-md-2 orderdetail_{{order_detail.ID}}" ng-class="vm.orderStrikethrough[order_detail.ID]">
                                                    {{order_detail.x_number}}x 
                                                </div>
                                                <div class="col-md-7">
                                                   <input type="text" 
                                                   ng-class="vm.orderStrikethrough[order_detail.ID]"
                                                   ng-disabled="(!isCollapsed[order_detail.ID] && order_detail.request_menu.request_ingredient.length != 0) || (vm.orderReadOnly[order_detail.ID] == true)"
                                                   ng-init="confirmed_meal_price[order_detail.ID] = order_detail.price; vm.priceInvalid[order_detail.ID] = (confirmed_meal_price[order_detail.ID] <= '0.00') ? true : false"
                                                   ng-model="confirmed_meal_price[order_detail.ID]" 
                                                   class="form-control orderdetail_{{order_detail.ID}} custom-form-control" 
                                                   ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" 
                                                   ng-max="999999.99"
                                                   step="0.01" ng-value="order_detail.price"
                                                   ng-keyup="checkMealValidation(getRequest.ID, order_detail.ID, requestdetail[order_detail.ID].$valid)" 
                                                   ng-required="true"
                                                   >
                                                   <sup class="required_field error">*</sup>
                                                </div>  
                                                <div class="col-md-1">
                                                   <span class="v-center orderdetail_{{order_detail.ID}}" ng-class="vm.orderStrikethrough[order_detail.ID]"> {{order_detail.currency}}</span>
                                                </div>
                                            </div>    
                                        </div>                          
                                        <div class="col-md-6">  
                                            <div class="row" ng-show="checkDetailStatus[order_detail.ID] == true">  
                                                <div class="inline" ng-repeat="detail in getRequest.orders.orders_detail |limitTo:1"> 
                                                    <div ng-if="checkPreDate(detail.serve_at)" class="col-md-4" ng-show="requestTab!='cancelledRequests'">
                                                        <button class="btn btn-sm" 
                                                        ng-init="vm.confirmClass[order_detail.ID] = 'btn-info'; vm.confirmMealButton[order_detail.ID] = false;" 
                                                        ng-disabled="(vm.confirmMealButton[order_detail.ID] == false && order_detail.request_menu.request_ingredient.length != 0) || (requestdetail[order_detail.ID].$invalid) || (vm.serveDetailInvalid[order_detail.ID] == true) || (vm.serveDeadlineInvalid[order_detail.ID] == true) || (vm.priceInvalid[order_detail.ID] == true)"
                                                        ng-class="vm.confirmClass[order_detail.ID]" 
                                                        ng-click="vm.updateRequest[getRequest.ID] = true; vm.confirmClass[order_detail.ID] = 'btn-success'; confirmed_request_mealname[order_detail.request_menu.ID] = confirmed_meal_name[order_detail.request_menu.ID]; confirmMealName(order_detail.request_menu.ID, order_detail.ID, 1, getRequest.ID)">
                                                            <i class="fa fa-check" aria-hidden="true"></i>
                                                        </button>
                                                    </div>
                                                    <div ng-if="checkPreDate(detail.serve_at)" class="col-md-4" >
                                                        <button class="btn btn-info btn-sm" ng-click="vm.confirmClass[order_detail.ID] = 'btn-info'; collapseToggleMore(getRequest.ID, order_detail.ID); vm.confirmMealButton[order_detail.ID] = true">
                                                            <i class="fa fa-pencil" aria-hidden="true"></i>
                                                        </button>
                                                    </div>
                                                    <div ng-if="checkPreDate(detail.serve_at)" class="col-md-4">
                                                        <button class="btn btn-danger btn-sm" ng-click="vm.updateRequest[getRequest.ID] = true; checkDetailStatus[order_detail.ID] = false; confirmMealName(order_detail.request_menu.ID, order_detail.ID, 3, getRequest.ID); checkDetailStatusAfterAction[order_detail.ID] = false">
                                                            <i class="fa fa-times"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row" ng-show="checkDetailStatus[order_detail.ID] == false"> 
                                                <div class="inline" ng-repeat="detail in getRequest.orders.orders_detail |limitTo:1"> 
                                                    <div ng-if="checkPreDate(detail.serve_at)" class="col-md-4">
                                                        <button class="btn btn-sm" ng-click="checkDetailStatus[order_detail.ID] = true; vm.confirmClass[order_detail.ID] = 'btn-info'; vm.confirmMealButton[order_detail.ID] = false; reConfirmMealName(order_detail.request_menu.ID, order_detail.ID, 3, getRequest.ID)"">
                                                            <i class="fa fa-check" aria-hidden="true"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div> 
                                        </div>
                                    </div>
                                </div>
                            </div>
                            </form>
                            <hr>
                            <div class="more" uib-collapse="!isCollapsed[order_detail.ID]" ng-init="mealIngredientDetails[order_detail.request_menu.ID] = order_detail.request_menu.request_ingredient">
                                <div class="row ingredient_listing" ng-repeat="ingredient_detail in order_detail.request_menu.request_ingredient track by $index" style="margin-top: 5px;">
                                    <div ng-if="ingredient_detail.duplicate_of_ingredient">
                                        <div class="col-md-3">
                                            <div class="row  form-group">
                                                <div class="col-md-6">
                                                    <span class="pull-right" ng-init="vm.unit[ingredient_detail.ID] = (ingredient_detail.unit) ? 'CLIENT.'+ingredient_detail.unit : '';"> 
                                                        {{ingredient_detail.amount}}{{vm.unit[ingredient_detail.ID] | translate }}
                                                    </span>
                                                </div>
                                                <div class="col-md-6">
                                                    <span class="pull-left">{{ingredient_detail.ingredient.name}}</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-9">
                                            <div class="row  form-group">
                                                <div class="col-md-3" >
                                                    <input type="number" ng-init="update_ingredient_amount[ingredient_detail.ID] = ingredient_detail.duplicate_of_ingredient.amount; pre_ingredient_amount[ingredient_detail.ID] = ingredient_detail.duplicate_of_ingredient.amount" min="0" ng-model="update_ingredient_amount[ingredient_detail.ID]" class="form-control" ng-show="vm.updateIng[ingredient_detail.ID]" ng-value="update_ingredient_amount[ingredient_detail.ID]">
                                                    <span class="pull-right" ng-show="!vm.updateIng[ingredient_detail.ID]">{{update_ingredient_amount[ingredient_detail.ID]}}</span>
                                                </div>

                                                <div class="col-md-2">
                                                    <select name="unit" 
                                                    ng-init="update_ingredient_unit[ingredient_detail.ID] = ingredient_detail.duplicate_of_ingredient.unit; pre_ingredient_unit[ingredient_detail.ID] = ingredient_detail.duplicate_of_ingredient.unit"
                                                    class="form-control" ng-model="update_ingredient_unit[ingredient_detail.ID]" 
                                                    ng-show="vm.updateIng[ingredient_detail.ID]">
                                                      <option value="g" ng-selected="update_ingredient_unit[ingredient_detail.ID] == 'g'">{{ vm.gunit | translate }}</option>
                                                      <option value="ml" ng-selected="update_ingredient_unit[ingredient_detail.ID] == 'ml'">{{ vm.mlunit | translate }}</option>
                                                      <option value="pcs" ng-selected="update_ingredient_unit[ingredient_detail.ID] == 'pcs'">{{ vm.pcsunit | translate }}</option>
                                                    </select>
                                                    <div ng-show="update_ingredient_unit[ingredient_detail.ID] != ''">
                                                    <span class="pull-right" ng-show="!vm.updateIng[ingredient_detail.ID]" translate="CLIENT.{{update_ingredient_unit[ingredient_detail.ID]}}"></span></div>
                                                </div>

                                                <div class="col-md-3">
                                                    <select 
                                                    ng-init="update_ingredient_name[ingredient_detail.ID] = ingredient_detail.duplicate_of_ingredient.ingredient" 
                                                    ng-model="update_ingredient_name[ingredient_detail.ID]" 
                                                    class="form-control" 
                                                    ng-options="ingredient as ingredient.name for ingredient in ingredientList track by ingredient.ID" 
                                                    ng-show="vm.updateIng[ingredient_detail.ID]"></select>
                                                    <span class="pull-right" ng-show="!vm.updateIng[ingredient_detail.ID]">{{update_ingredient_name[ingredient_detail.ID].name}}</span>
                                                </div>

                                                <div class="col-md-4">
                                                    <div class="row">
                                                        <div class="col-md-3" ng-show="requestTab!='cancelledRequests'">
                                                            <button 
                                                            ng-init="vm.confirmClass[ingredient_detail.ID] = 'btn-info'"
                                                            class="btn btn-sm pull-left" 
                                                            ng-disabled="updateIngredientName[ingredient_detail.ID] == true"
                                                            ng-class="vm.confirmClass[ingredient_detail.ID] "
                                                            ng-click="updateIngredient(ingredient_detail.ID, order_detail.request_menu.ID, 'U', ingredient_detail.ID_ingredient, ingredient_detail.status_confirmed, order_detail.ID);">
                                                                <i class="fa fa-check" aria-hidden="true"></i>
                                                            </button>
                                                        </div>
                                                        <div class="col-md-3" style="padding-left: 15px;" ng-show="requestTab!='cancelledRequests'" ng-click="vm.updateIng[ingredient_detail.ID] = true; vm.confirmClass[ingredient_detail.ID] = 'btn-info'">
                                                            <button class="btn btn-info btn-sm pull-left">
                                                                <i class="fa fa-pencil" aria-hidden="true"></i>
                                                            </button>
                                                        </div>
                                                        <div class="col-md-3"  style="padding-left: 13px;" ng-show="requestTab!='cancelledRequests'">
                                                            <button class="btn btn-danger btn-sm pull-left" ng-show="!vm.updateIng[ingredient_detail.ID]" ng-click="vm.cancelIng[ingredient_detail.ID] = false; vm.updateIng[ingredient_detail.ID] = false; updateIngredient(ingredient_detail.ID, order_detail.request_menu.ID, 'D', ingredient_detail.ID_ingredient, ingredient_detail.status_confirmed);">
                                                                <i class="fa fa-times"></i>
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div ng-if="(ingredient_detail.duplicate_of == 0 || ingredient_detail.duplicate_of_ingredient.duplicate_of == '') && (ingredient_detail.status_confirmed == 'C')">
                                        <div class="col-md-3">
                                            <div class="row  form-group">
                                                <div class="col-md-6">
                                                    <span class="pull-right" ng-init="vm.unit[ingredient_detail.ID] = (ingredient_detail.unit) ? 'CLIENT.'+ingredient_detail.unit : '';"> 
                                                        {{ingredient_detail.amount}}{{vm.unit[ingredient_detail.ID] | translate }}
                                                    </span>
                                                </div>
                                                <div class="col-md-6">
                                                    <span class="pull-left">{{ingredient_detail.ingredient.name}}</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-9">
                                            <div class="row  form-group">
                                                <div class="col-md-3" >
                                                    <input type="number" ng-init="update_ingredient_amount[ingredient_detail.ID] = ingredient_detail.amount; pre_ingredient_amount[ingredient_detail.ID] = ingredient_detail.amount" min="0" ng-model="update_ingredient_amount[ingredient_detail.ID]" class="form-control" ng-show="vm.updateIng[ingredient_detail.ID]" ng-value="update_ingredient_amount[ingredient_detail.ID]">
                                                    <span class="pull-right" ng-show="!vm.updateIng[ingredient_detail.ID]">{{update_ingredient_amount[ingredient_detail.ID]}}</span>
                                                </div>

                                                <div class="col-md-2">
                                                    <select name="unit" 
                                                    ng-init="update_ingredient_unit[ingredient_detail.ID] = ingredient_detail.unit; pre_ingredient_unit[ingredient_detail.ID] = ingredient_detail.unit"
                                                    class="form-control" ng-model="update_ingredient_unit[ingredient_detail.ID]" 
                                                    ng-show="vm.updateIng[ingredient_detail.ID]">
                                                      <option value="g" ng-selected="update_ingredient_unit[ingredient_detail.ID] == 'g'">{{ vm.gunit | translate }}</option>
                                                      <option value="ml" ng-selected="update_ingredient_unit[ingredient_detail.ID] == 'ml'">{{ vm.mlunit | translate }}</option>
                                                      <option value="pcs" ng-selected="update_ingredient_unit[ingredient_detail.ID] == 'pcs'">{{ vm.pcsunit | translate }}</option>
                                                    </select>
                                                    <div ng-show="update_ingredient_unit[ingredient_detail.ID] != ''">
                                                   <span class="pull-right" ng-show="!vm.updateIng[ingredient_detail.ID]" translate="CLIENT.{{update_ingredient_unit[ingredient_detail.ID]}}"></span></div>
                                                </div>

                                                <div class="col-md-3">
                                                    <select 
                                                    ng-init="update_ingredient_name[ingredient_detail.ID] = ingredient_detail.ingredient" 
                                                    ng-model="update_ingredient_name[ingredient_detail.ID]" 
                                                    class="form-control" 
                                                    ng-options="ingredient as ingredient.name for ingredient in ingredientList track by ingredient.ID" 
                                                    ng-show="vm.updateIng[ingredient_detail.ID]"></select>
                                                    <span class="pull-right" ng-show="!vm.updateIng[ingredient_detail.ID]">{{update_ingredient_name[ingredient_detail.ID].name}}</span>
                                                </div>

                                                <div class="col-md-4">
                                                    <div class="row">
                                                        <div class="col-md-3" ng-show="requestTab!='cancelledRequests'">
                                                            <button 
                                                            ng-init="vm.confirmClass[ingredient_detail.ID] = 'btn-info'"
                                                            class="btn btn-sm pull-left" 
                                                            ng-disabled="updateIngredientName[ingredient_detail.ID] == true"
                                                            ng-class="vm.confirmClass[ingredient_detail.ID] "
                                                            ng-click="updateIngredient(ingredient_detail.ID, order_detail.request_menu.ID, 'U', ingredient_detail.ID_ingredient, ingredient_detail.status_confirmed, order_detail.ID);">
                                                                <i class="fa fa-check" aria-hidden="true"></i>
                                                            </button>
                                                        </div>
                                                        <div class="col-md-3" style="padding-left: 15px;" ng-show="requestTab!='cancelledRequests'" ng-click="vm.updateIng[ingredient_detail.ID] = true; vm.confirmClass[ingredient_detail.ID] = 'btn-info'">
                                                            <button class="btn btn-info btn-sm pull-left">
                                                                <i class="fa fa-pencil" aria-hidden="true"></i>
                                                            </button>
                                                        </div>
                                                        <div class="col-md-3"  style="padding-left: 13px;" ng-show="requestTab!='cancelledRequests'">
                                                            <button class="btn btn-danger btn-sm pull-left" ng-show="!vm.updateIng[ingredient_detail.ID]" ng-click="vm.cancelIng[ingredient_detail.ID] = false; vm.updateIng[ingredient_detail.ID] = false; updateIngredient(ingredient_detail.ID, order_detail.request_menu.ID, 'D', ingredient_detail.ID_ingredient, ingredient_detail.status_confirmed);">
                                                                <i class="fa fa-times"></i>
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div ng-if="!ingredient_detail.duplicate_of_ingredient && ingredient_detail.status_confirmed == 'N'">
                                        <div class="col-md-3">
                                            <div class="row  form-group">
                                                <div class="col-md-6">
                                                    <span class="pull-right" ng-init="vm.unit[ingredient_detail.ID] = (ingredient_detail.unit) ? 'CLIENT.'+ingredient_detail.unit : '';"> {{ingredient_detail.amount}}{{vm.unit[ingredient_detail.ID] | translate }}</span>
                                                </div>
                                                <div class="col-md-6">
                                                    <span class="pull-left">{{ingredient_detail.ingredient.name}}</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-9">
                                            <div class="row  form-group">
                                                <div class="col-md-3" >
                                                    <input type="number" ng-init="update_ingredient_amount[ingredient_detail.ID] = ingredient_detail.amount; pre_ingredient_amount[ingredient_detail.ID] = ingredient_detail.amount" min="0" ng-model="update_ingredient_amount[ingredient_detail.ID]" class="form-control" ng-show="vm.updateIng[ingredient_detail.ID]" ng-value="update_ingredient_amount[ingredient_detail.ID]">
                                                    <span class="pull-right" ng-show="!vm.updateIng[ingredient_detail.ID]">{{update_ingredient_amount[ingredient_detail.ID]}}</span>
                                                </div>

                                                <div class="col-md-2">
                                                    <select name="unit" 
                                                    ng-init="update_ingredient_unit[ingredient_detail.ID] = ingredient_detail.unit; pre_ingredient_unit[ingredient_detail.ID] = ingredient_detail.unit"
                                                    class="form-control" ng-model="update_ingredient_unit[ingredient_detail.ID]" 
                                                    ng-show="vm.updateIng[ingredient_detail.ID]">
                                                      <option value="g" ng-selected="update_ingredient_unit[ingredient_detail.ID] == 'g'">{{ vm.gunit | translate }}</option>
                                                      <option value="ml" ng-selected="update_ingredient_unit[ingredient_detail.ID] == 'ml'">{{ vm.mlunit | translate }}</option>
                                                      <option value="pcs" ng-selected="update_ingredient_unit[ingredient_detail.ID] == 'pcs'">{{ vm.pcsunit | translate }}</option>
                                                    </select>
                                                    <div ng-show="update_ingredient_unit[ingredient_detail.ID] != ''">
                                                    <span class="pull-right" ng-show="!vm.updateIng[ingredient_detail.ID]" translate="CLIENT.{{update_ingredient_unit[ingredient_detail.ID]}}"></span></div>
                                                </div>

                                                <div class="col-md-3">
                                                    <select 
                                                    ng-init="update_ingredient_name[ingredient_detail.ID] = ingredient_detail.ingredient" 
                                                    ng-model="update_ingredient_name[ingredient_detail.ID]" 
                                                    class="form-control" 
                                                    ng-options="ingredient as ingredient.name for ingredient in ingredientList track by ingredient.ID" 
                                                    ng-show="vm.updateIng[ingredient_detail.ID]"></select>
                                                    <span class="pull-right" ng-show="!vm.updateIng[ingredient_detail.ID]">{{update_ingredient_name[ingredient_detail.ID].name}}</span>
                                                </div>

                                                <div class="col-md-4">
                                                    <div class="row">
                                                        <div class="col-md-3" ng-show="requestTab!='cancelledRequests'">
                                                            <button 
                                                            ng-init="vm.confirmClass[ingredient_detail.ID] = 'btn-info'"
                                                            class="btn btn-sm pull-left" 
                                                            ng-disabled="updateIngredientName[ingredient_detail.ID] == true"
                                                            ng-class="vm.confirmClass[ingredient_detail.ID] "
                                                            ng-click="updateIngredient(ingredient_detail.ID, order_detail.request_menu.ID, 'U', ingredient_detail.ID_ingredient, ingredient_detail.status_confirmed, order_detail.ID);">
                                                                <i class="fa fa-check" aria-hidden="true"></i>
                                                            </button>
                                                        </div>
                                                        <div class="col-md-3" style="padding-left: 15px;" ng-show="requestTab!='cancelledRequests'" ng-click="vm.updateIng[ingredient_detail.ID] = true; vm.confirmClass[ingredient_detail.ID] = 'btn-info'">
                                                            <button class="btn btn-info btn-sm pull-left">
                                                                <i class="fa fa-pencil" aria-hidden="true"></i>
                                                            </button>
                                                        </div>
                                                        <div class="col-md-3"  style="padding-left: 13px;" ng-show="requestTab!='cancelledRequests'">
                                                            <button class="btn btn-danger btn-sm pull-left" ng-show="!vm.updateIng[ingredient_detail.ID]" ng-click="vm.cancelIng[ingredient_detail.ID] = false; vm.updateIng[ingredient_detail.ID] = false; updateIngredient(ingredient_detail.ID, order_detail.request_menu.ID, 'D', ingredient_detail.ID_ingredient, ingredient_detail.status_confirmed);">
                                                                <i class="fa fa-times"></i>
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row add_new_ing">
                                    <div class="col-sm-offset-3 col-md-9">
                                        <div class="row" 
                                        ng-repeat="ingredient in ingredients track by $index" 
                                        style="margin-top: 5px;" 
                                        ng-show="order_detail.request_menu.ID == ingredient.ID_request_menu">
                                            <div class="form-group">
                                                <div class="col-md-3">
                                                    <span class="pull-right">{{ingredient.amount}}</span>
                                                </div>
                                                <div class="col-md-2">
                                                    <span class="pull-right" ng-init="vm.unit[$index] = (ingredient.unit) ?  'CLIENT.'+ingredient.unit : ''; "> {{vm.unit[$index] | translate }}</span>
                                                </div>
                                                <div class="col-md-3">
                                                    <span class="pull-right">{{ingredient.name}}</span>
                                                </div>
                                                <div class="col-md-4">
                                                    <button type="button" class="btn btn-danger" ng-click="removeIngredient(ingredients, $index)"><i class="fa fa-times"></i></button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12"><label translate="CLIENT.ADD INGREDIENT"></label></div>
                                            <div class="col-md-12">
                                                <div class="row">
                                                    <div class="form-group col-md-3">
                                                        <span class="control-label" translate="CLIENT.AMOUNT"></span>
                                                        <input type="number" min="1" name="amount" ng-model="more_ingredient.amount" class="form-control">
                                                    </div> 
                                                    <div class="col-md-2">
                                                        <span class="control-label" translate="CLIENT.UNIT"></span>
                                                        <select name="unit" class="form-control" ng-model="more_ingredient.unit">
                                                          <option value="g">{{ vm.gunit | translate }}</option>
                                                          <option value="ml">{{ vm.mlunit | translate }}</option>
                                                          <option value="pcs">{{ vm.pcsunit | translate }}</option>
                                                        </select>
                                                    </div> 
                                                    <div class="form-group col-md-3">
                                                        <span class="control-label" translate="CLIENT.INGREDIENTS"></span>
                                                        <select name="ingredient" ng-model="more_ingredient.ingredient" class="form-control" ng-change="onIngredientChange()" ng-options="ingredient.name for ingredient in ingredientList">
                                                        </select>
                                                    </div> 
                                                    <div class="form-group col-md-1 v-center">
                                                        <button class="btn btn-primary add_ingre" type="button" ng-click="addIngredient(order_detail.request_menu.ID, order_detail.ID)" ng-disabled="!(more_ingredient.ingredient)">
                                                        <span translate="CLIENT.ADD"></span>
                                                        </button>
                                                    </div> 
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row" ng-show="vm.ing_exist[order_detail.ID] == true">
                                            <div class="col-sm-offset-5 col-md-5" >
                                                <span style="color:red;" translate="CLIENT.INGREDIENT ALREADY ADDED"></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row restaurant_desc">
                                    <div class="col-md-3">
                                        <div class="col-md-12">
                                            <label translate="CLIENT.DESCRIPTION"></label>
                                            <div ng-if="mySplit(order_detail.comment,0)!==undefined && mySplit(order_detail.comment,1)!==undefined">
                                                {{mySplit(order_detail.comment,1)}}
                                            </div>
                                            <div ng-if="mySplit(order_detail.comment,0)!==undefined && mySplit(order_detail.comment,1)==undefined">
                                                {{mySplit(order_detail.comment,0)}}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <label translate="CLIENT.DESCRIPTION"></label>
                                        <div ng-if="mySplit(order_detail.comment,0)!==undefined && mySplit(order_detail.comment,1)!==undefined">

                                           <textarea ng-if="mySplit(order_detail.comment,0) !== ''" ng-init="order_detail_precomment[order_detail.ID] = mySplit(order_detail.comment,1); order_detail_comment[order_detail.ID] = mySplit(order_detail.comment,0)" ng-model="order_detail_comment[order_detail.ID]" ng-value="order_detail_comment[order_detail.ID]" class="form-control" rows="3"></textarea>

                                           <textarea ng-if="mySplit(order_detail.comment,0) == ''" ng-init="order_detail_precomment[order_detail.ID] = mySplit(order_detail.comment,1); order_detail_comment[order_detail.ID] = ''" ng-model="order_detail_comment[order_detail.ID]" class="form-control" rows="3"></textarea>
                                        </div>
                                        <div ng-if="order_detail.comment == ''">
                                            <textarea ng-init="order_detail_precomment[order_detail.ID] = ''; order_detail_comment[order_detail.ID] = ''" ng-model="order_detail_comment[order_detail.ID]" class="form-control" rows="3"></textarea>
                                        </div>
                                        <div ng-if="order_detail.comment !== '' && mySplit(order_detail.comment,0)!==undefined && mySplit(order_detail.comment,1)==undefined">
                                            <textarea ng-init="order_detail_precomment[order_detail.ID] = mySplit(order_detail.comment,0); order_detail_comment[order_detail.ID] = ''" ng-model="order_detail_comment[order_detail.ID]" class="form-control" rows="3"></textarea>
                                        </div>

                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-9 col-sm-offset-3">
                                        <form name="serving_detail[order_detail.ID]" ng-if="!order_detail.side_dish || order_detail.side_dish == 0">
                                            <div class="form-group">
                                                <label translate="CLIENT.OPTIONS"></label>
                                            </div>
                                            <div class="row">
                                                <div class="form-group col-md-3">
                                                    <span translate="CLIENT.MINIMUM SERVINGS"></span>
                                                </div>
                                                <div class="form-group col-md-2">
                                                    <input type="number" min="1" 
                                                    ng-class="(order_detail.request_param.request_min_servings > 0) ? '' : 'min_manually'"
                                                    max="{{request_max_servings[order_detail.ID]}}" 
                                                    ng-init="request_min_servings[order_detail.ID] = (order_detail.request_param.request_min_servings > 0) ? order_detail.request_param.request_min_servings : ''" 
                                                    ng-model="request_min_servings[order_detail.ID]" 
                                                    ng-value="request_min_servings[order_detail.ID]" 
                                                    class="form-control min_manually_{{order_detail.ID}}" 
                                                    ng-change="checkServeValidation(getRequest.ID, order_detail.ID, serving_detail[order_detail.ID].$valid); autoMaxServing(getRequest.ID, order_detail.ID, serving_detail[order_detail.ID].$valid);">
                                                </div> 
                                                <div class="form-group col-md-3">
                                                    <span translate="CLIENT.MAXIMUM SERVINGS"></span>
                                                </div>
                                                <div class="form-group col-md-2">
                                                    <input type="number" 
                                                    ng-class="(order_detail.request_param.request_max_servings > 0) ? '' : 'max_manually'"
                                                    min="{{request_min_servings[order_detail.ID]}}" ng-init="request_max_servings[order_detail.ID] = (order_detail.request_param.request_max_servings > 0) ? order_detail.request_param.request_max_servings : ''" ng-model="request_max_servings[order_detail.ID]" ng-value="request_max_servings[order_detail.ID]" class="form-control max_manually_{{order_detail.ID}}"
                                                    ng-change="checkServeValidation(getRequest.ID, order_detail.ID, serving_detail[order_detail.ID].$valid); checkMaxServing(getRequest.ID, order_detail.ID, serving_detail[order_detail.ID].$valid);">
                                                </div> 
                                            </div>
                                            <div class="row" ng-init="vm.mini_serving[order_detail.ID] = convertToDate(order_detail.serve_at) | date: 'dd.MM. HH:mm'">
                                                <div class="form-group col-md-5">
                                                    <span translate="CLIENT.MINIMUM SERVINGS DEADLINE"></span>
                                                </div>
                                                <div class="form-group col-md-4" ng-if="order_detail.request_param.request_deadline != '0000-00-00 00:00:00' && order_detail.request_param.request_deadline">
                                                    <input type="text" class="form-control" datetime-picker="dd.MM. HH:mm"
                                                       ng-init="request_deadline[order_detail.ID] = convertToDate(order_detail.request_param.request_deadline) | date:'dd.MM. HH:mm';"
                                                       name="request_deadline"
                                                       ng-model="request_deadline[order_detail.ID]" 
                                                       ng-value="request_deadline[order_detail.ID]" 
                                                       is-open="vm.date_picker.open" 
                                                       enable-time="true" 
                                                       datepicker-options="vm.date_picker.datepickerOptions" datepicker-append-to-body="false" ng-click="vm.openCalendar()" 
                                                       ng-keyup="checkDeadlineValidation(getRequest.ID, order_detail.ID, serving_detail[order_detail.ID].$valid)"
                                                       ng-change="checkDeadlineValidation(getRequest.ID, order_detail.ID, serving_detail[order_detail.ID].$valid)"
                                                    />
                                                </div>
                                                <div class="form-group col-md-4" ng-hide="order_detail.request_param.request_deadline != '0000-00-00 00:00:00' && order_detail.request_param.request_deadline">
                                                    <input type="text" class="form-control" datetime-picker="dd.MM. HH:mm"
                                                       name="request_deadline"
                                                       ng-model="request_deadline[order_detail.ID]" 
                                                       is-open="vm.date_picker.open" 
                                                       enable-time="true" 
                                                       datepicker-options="vm.date_picker.datepickerOptions" datepicker-append-to-body="false" ng-click="vm.openCalendar()" 
                                                       ng-keyup="checkDeadlineValidation(getRequest.ID, order_detail.ID, serving_detail[order_detail.ID].$valid)"
                                                       ng-change="checkDeadlineValidation(getRequest.ID, order_detail.ID, serving_detail[order_detail.ID].$valid)"
                                                    />
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="form-group col-md-5">
                                                    <span translate="CLIENT.SERVING TIME INTERVAL"></span>
                                                </div>
                                                <div class="form-group col-md-5">
                                                    <div class="row">
                                                        <div class="form-group col-md-6">
                                                            <input 
                                                            ng-if="order_detail.request_param.request_from != '00:00:00' && order_detail.request_param.request_from != ''"
                                                            ng-init="request_from[order_detail.ID] = convertToTime(order_detail.request_param.request_from) | date:'HH:mm'; isRequiredField = true"
                                                            ui-timepicker="vm.timeOptions" name="request_from" 
                                                            max="request_to[order_detail.ID]" 
                                                            ng-model="request_from[order_detail.ID]" 
                                                            ng-value="request_from[order_detail.ID]" 
                                                            class="form-control"
                                                            ng-keyup="checkServeValidation(getRequest.ID, order_detail.ID, serving_detail[order_detail.ID].$valid)"
                                                            ng-change="checkServeValidation(getRequest.ID, order_detail.ID, serving_detail[order_detail.ID].$valid)">

                                                            <input 
                                                            ng-if="order_detail.request_param.request_from == '00:00:00' || order_detail.request_param.request_from == ''"
                                                            ui-timepicker="vm.timeOptions" name="request_from" 
                                                            max="request_to[order_detail.ID]" 
                                                            ng-model="request_from[order_detail.ID]"  
                                                            class="form-control"
                                                            ng-keyup="checkServeValidation(getRequest.ID, order_detail.ID, serving_detail[order_detail.ID].$valid)"
                                                            ng-change="checkServeValidation(getRequest.ID, order_detail.ID, serving_detail[order_detail.ID].$valid)">
                                                        </div>
                                                        <div class="form-group col-md-6">
                                                            <input 
                                                            ng-if="order_detail.request_param.request_to != '00:00:00' && order_detail.request_param.request_from != ''"
                                                            ng-init="request_to[order_detail.ID] = convertToTime(order_detail.request_param.request_to) | date:'HH:mm'; isRequiredField = true"
                                                            min="{{request_from[order_detail.ID]}}" 
                                                            ui-timepicker="vm.timeOptions" name="request_to" 
                                                            ng-model="request_to[order_detail.ID]" 
                                                            ng-value="request_to[order_detail.ID]" 
                                                            class="form-control"
                                                            ng-keyup="checkServeValidation(getRequest.ID, order_detail.ID, serving_detail[order_detail.ID].$valid)"
                                                            ng-change="checkServeValidation(getRequest.ID, order_detail.ID, serving_detail[order_detail.ID].$valid)">
                                                            <input 
                                                            ng-if="order_detail.request_param.request_to == '00:00:00' || order_detail.request_param.request_from == ''"
                                                            min="{{request_from[order_detail.ID]}}" 
                                                            ui-timepicker="vm.timeOptions" name="request_to" 
                                                            ng-model="request_to[order_detail.ID]" 
                                                            class="form-control"
                                                            ng-keyup="checkServeValidation(getRequest.ID, order_detail.ID, serving_detail[order_detail.ID].$valid)"
                                                            ng-change="checkServeValidation(getRequest.ID, order_detail.ID, serving_detail[order_detail.ID].$valid)">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="form-group col-md-5">
                                                    <span translate="CLIENT.ONE FREE SERVING"></span>
                                                </div>
                                                <div class="form-group col-md-2">
                                                    <input type="number" ng-init="free_serving[order_detail.ID] = (order_detail.request_param.request_free_every > 0) ? order_detail.request_param.request_free_every : ''" min="1" name="free_serving" ng-model="free_serving[order_detail.ID]" ng-value="free_serving[order_detail.ID]" class="form-control"
                                                    ng-keyup="checkServeValidation(getRequest.ID, order_detail.ID, serving_detail[order_detail.ID].$valid)"
                                                    ng-change="checkServeValidation(getRequest.ID, order_detail.ID, serving_detail[order_detail.ID].$valid)">
                                                </div>
                                                <div class="form-group col-md-2"><span translate="CLIENT.SERVINGS"></span></div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row container-fluid custom_container">
                            <div class="col-md-3  request_meal restcomment_sec">
                                <label class="control-label" translate="CLIENT.MESSAGE"></label>
                                <div ng-if="messageSplit(getRequest.orders.comment,0)!==undefined">
                                    {{messageSplit(getRequest.orders.comment,0)}}
                                </div>
                            </div>
                            <div class="col-md-4 confirm_meal restcomment_sec">
                                <label class="control-label" translate="CLIENT.MESSAGE"></label>
                                <div ng-if="messageSplit(getRequest.orders.comment,1)!==undefined">
                                   <textarea ng-if="messageSplit(getRequest.orders.comment,1) !== ''"  ng-init="vm.confirmRequest_comment[getRequest.ID] = messageSplit(getRequest.orders.comment,1)" name="comment" ng-model="vm.confirmRequest_comment[getRequest.ID]" ng-value="vm.confirmRequest_comment[getRequest.ID]" class="form-control" rows="3"></textarea>

                                   <textarea ng-if="messageSplit(getRequest.orders.comment,1) == ''"  ng-init="vm.confirmRequest_comment[getRequest.ID] = ''" name="comment" ng-model="vm.confirmRequest_comment[getRequest.ID]" ng-value="vm.confirmRequest_comment[getRequest.ID]" ng-value="vm.confirmRequest_comment[getRequest.ID]" class="form-control" rows="3"></textarea>
                                </div>
                                <div ng-if="getRequest.orders.comment == '' || !messageSplit(getRequest.orders.comment,1)">
                                    <textarea ng-init="vm.confirmRequest_comment[getRequest.ID] = ''" name="comment" ng-model="vm.confirmRequest_comment[getRequest.ID]" ng-value="vm.confirmRequest_comment[getRequest.ID]" class="form-control" rows="3"></textarea>
                                </div>
                            </div>
                            <div class="col-md-5 action_sec" ng-show="requestTab!='cancelledRequests'">
                                <div class="row">
                                    <div class="col-md-12 v-center">
                                        <div class="row">
                                            <div class="col-md-10">
                                                <div class="v-center pull-right action_box" ng-repeat="detail in getRequest.orders.orders_detail |limitTo:1">
                                                    <div class="inline">
                                                        <button ng-if="checkPreDate(detail.serve_at)"  
                                                        ng-init="vm.saveLoading=[]"
                                                        class="btn btn-lg btn-primary" 
                                                        ng-disabled="!vm.updateRequest[getRequest.ID]"
                                                        ng-click="saveChanges($index, getRequest.ID)" >
                                                            <i ng-show="vm.saveLoading[$index]" class="fa fa-spinner fa-spin"></i>
                                                            <span translate="CLIENT.CONFIRM"></span>
                                                        </button>
                                                    </div>
                                                    <div class="inline">
                                                        <button ng-if="checkPreDate(detail.serve_at)" type="button" class="btn btn-lg btn-danger" ng-click="vm.cancelRequest(getRequest.ID)">
                                                            <i ng-show="cancelId== getRequest.ID" class="fa fa-spinner fa-spin"></i>
                                                            <i class="fa fa-times"></i>
                                                            <span translate="CLIENT.CANCELNEW"></span>
                                                        </button>
                                                    </div>
                                                    <div class="inline v-center">
                                                       <button type="button" class="btn btn-lg btn-default" data-dismiss="modal" aria-label="Close" translate="CLIENT.CLOSE">
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="alert alert-success text-center col-sm-offset-4 col-md-4 form-group" ng-show="vm.responseMsg == 'success' && vm.showMsg">
                                <span translate="Changes have been successfully updated!" class="ng-scope"></span>
                            </div>
                            <div class="alert alert-danger text-center col-sm-offset-4 col-md-4 form-group" ng-show="vm.responseMsg == 'failed' && vm.showMsg">
                                <span translate="Something wrong please try again!" class="ng-scope"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div ng-if="!vm.reqPLoading" ng-init="vm.gunit = 'CLIENT.g'; vm.mlunit = 'CLIENT.ml'; vm.pcsunit = 'CLIENT.pcs'; ">
    <div class="modal fade custom_modal new_modal" ng-repeat="getRequest in vm.getPendingRequest track by $index" id="requestDetail{{getRequest.ID}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="container" ng-init="vm.allgetOrederDetailLength[getRequest.ID] = (getRequest.orders.orders_detail).length; vm.getOrederDetailLength[getRequest.ID] = (getRequest.orders.orders_detail | filter: requestOrderDetailStatusFilter ).length; vm.allgetOrederDetail[getRequest.ID] = getRequest.orders.orders_detail | filter: requestOrderDetailStatusFilter;">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-body">
                        <div class="row container-fluid custom_container">
                            <div class="col-md-7">
                                <h5 class="pull-left"><label translate="CLIENT.REQUEST CONFIRMATION"></label></h5>
                            </div>
                            <div class="col-md-5">
                               <button type="button" class="close pull-right" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            </div>
                        </div>
                        <div class="row container-fluid custom_container">
                            <div class="col-md-2">
                                <h5 class="pull-left"><span class="inline" ng-repeat="detail in getRequest.orders.orders_detail |limitTo:1">
                                    {{convertToDate(detail.serve_at) | date:'dd.MM.y'}}
                                </span></h5>
                            </div>
                            <div class="col-md-2">
                               <h5> <span translate="CLIENT.ONO"></span> {{getRequest.orders.ID}}</h5>
                            </div>
                        </div>
                        <div class="row container-fluid custom_container">
                            <div class="col-md-3 request_meal container_head">
                                <h5 class="text-center"><label translate="CLIENT.REQUIRED"></label></h5>
                            </div>
                            <div class="col-md-4 confirm_meal container_head">
                                <h5 class="text-center"><label translate="CLIENT.CONFIRMED"></label></h5>
                            </div>
                        </div>
                        <div ng-repeat="order_detail in getRequest.orders.orders_detail track by $index" ng-show="!vm.cancelOrderDetail[order_detail.ID]">
                            <form name="requestdetail[order_detail.ID]">
                            <div ng-init="vm.orderStrikethrough[order_detail.ID] = (order_detail.status == 3) ? 'strikethrough' : ''; vm.orderReadOnly[order_detail.ID] = (order_detail.status == 3) ? 'true' : 'false'; checkDetailStatus[order_detail.ID] = (order_detail.status == 3) ? false : true;" class="container-fluid row custom_container" >
                                <div class="col-sm-3 request_meal">
                                    <div class="row custom_row custom_container">
                                        <div class="col-md-3">
                                            <div class="orderdetail_{{order_detail.ID}}"  ng-class="vm.orderStrikethrough[order_detail.ID]" ng-if="!order_detail.side_dish || order_detail.side_dish == 0">
                                             {{convertToDate(order_detail.serve_at) | date:'HH:mm'}}
                                            </div>
                                        </div>
                                        <div class="col-md-8">
                                            <span class="pull-left orderdetail_{{order_detail.ID}}"  ng-class="vm.orderStrikethrough[order_detail.ID]"> {{order_detail.x_number}}x {{order_detail.request_menu.name}} </span>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-4 confirm_meal">
                                    <div class="row custom_row">
                                        <div class="col-md-3 custom-col-md-3">
                                            <div ng-if="!order_detail.side_dish || order_detail.side_dish == 0" class="orderdetail_{{order_detail.ID}}">
                                                <div class=" orderdetail_{{order_detail.ID}}" ng-class="vm.orderStrikethrough[order_detail.ID]">
                                                <input 
                                                    class="form-control custom-form-control"
                                                    ng-required="true"
                                                    ng-disabled="(!isCollapsed[order_detail.ID] && order_detail.request_menu.request_ingredient.length != 0) || (vm.orderReadOnly[order_detail.ID] == true)"
                                                    ui-timepicker="vm.timeOptions" 
                                                    ng-init="confirmed_meal_time[order_detail.ID] = convertToDate(order_detail.serve_at) | date:'HH:mm'; confirmed_meal_date[order_detail.ID] = convertToDate(order_detail.serve_at) | date:'dd.MM.y'"
                                                    name="confirmed_meal_time"
                                                    ng-model="confirmed_meal_time[order_detail.ID]" 
                                                    ng-value="convertToDate(order_detail.serve_at) | date:'HH:mm'"
                                                    ng-keyup="checkMealValidation(getRequest.ID, order_detail.ID, requestdetail[order_detail.ID].$valid)" 
                                                    ng-change="checkMealValidation(getRequest.ID, order_detail.ID, requestdetail[order_detail.ID].$valid)" 
                                                >
                                                <sup class="required_field error">*</sup>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-8 custom-col-md-8">
                                            <span class="orderdetail_{{order_detail.ID}}"  ng-class="vm.orderStrikethrough[order_detail.ID]" ng-if="order_detail.request_menu.confirmed_name" ng-show="!isCollapsed[order_detail.ID]">{{order_detail.x_number}}x  {{confirmed_meal_name[order_detail.request_menu.ID]}}</span>
                                            <span class="orderdetail_{{order_detail.ID}}"  ng-class="vm.orderStrikethrough[order_detail.ID]" ng-if="!order_detail.request_menu.confirmed_name" ng-show="!isCollapsed[order_detail.ID]" >{{order_detail.x_number}}x  {{confirmed_meal_name[order_detail.request_menu.ID]}}</span>

                                            <input 
                                            ng-if="order_detail.request_menu.confirmed_name"
                                            ng-hide="!isCollapsed[order_detail.ID]" 
                                            type="text" class="form-control custom-form-control" 
                                            ng-init="confirmed_meal_name[order_detail.request_menu.ID] = order_detail.request_menu.confirmed_name" 
                                            ng-required="true"
                                            ng-value="confirmed_meal_name[order_detail.request_menu.ID]" 
                                            ng-model="confirmed_meal_name[order_detail.request_menu.ID]" 
                                            uib-typeahead="menu.name for menu in menuList | filter:$viewValue | limitTo:10" 
                                            autocomplete="off"
                                            ng-keyup="checkMealValidation(getRequest.ID, order_detail.ID, requestdetail[order_detail.ID].$valid)"
                                            >
                                            <input 
                                            ng-if="!order_detail.request_menu.confirmed_name"
                                            ng-hide="!isCollapsed[order_detail.ID]" 
                                            type="text" class="form-control custom-form-control" 
                                            ng-init="confirmed_meal_name[order_detail.request_menu.ID] = order_detail.request_menu.name"
                                            ng-required="true"
                                            ng-value="confirmed_meal_name[order_detail.request_menu.ID]" 
                                            ng-model="confirmed_meal_name[order_detail.request_menu.ID]" 
                                            uib-typeahead="menu.name for menu in menuList | filter:$viewValue | limitTo:10"
                                            autocomplete="off" 
                                            ng-keyup="checkMealValidation(getRequest.ID, order_detail.ID, requestdetail[order_detail.ID].$valid)"
                                            >
                                            <sup class="required_field error"  ng-hide="!isCollapsed[order_detail.ID]" >*</sup>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-5 action_sec">
                                    <div class="row custom_row">
                                        <div class="col-md-6">
                                            <div class="row">
                                                <div class="col-md-2 orderdetail_{{order_detail.ID}}" ng-class="vm.orderStrikethrough[order_detail.ID]">
                                                    {{order_detail.x_number}}x 
                                                </div>
                                                <div class="col-md-7">
                                                   <input type="text" 
                                                   ng-class="vm.orderStrikethrough[order_detail.ID]"
                                                   ng-disabled="(!isCollapsed[order_detail.ID] && order_detail.request_menu.request_ingredient.length != 0) || (vm.orderReadOnly[order_detail.ID] == true)"
                                                   ng-init="confirmed_meal_price[order_detail.ID] = order_detail.price; vm.priceInvalid[order_detail.ID] = (confirmed_meal_price[order_detail.ID] <= '0.00') ? true : false"
                                                   ng-model="confirmed_meal_price[order_detail.ID]" 
                                                   class="form-control orderdetail_{{order_detail.ID}} custom-form-control" 
                                                   ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" 
                                                   ng-max="999999.99"
                                                   step="0.01" ng-value="order_detail.price"
                                                   ng-keyup="checkMealValidation(getRequest.ID, order_detail.ID, requestdetail[order_detail.ID].$valid)" 
                                                   ng-required="true"
                                                   >
                                                   <sup class="required_field error">*</sup>
                                                </div>  
                                                <div class="col-md-1">
                                                   <span class="v-center orderdetail_{{order_detail.ID}}" ng-class="vm.orderStrikethrough[order_detail.ID]"> {{order_detail.currency}}</span>
                                                </div>
                                            </div>    
                                        </div>                          
                                        <div class="col-md-6">  
                                            <div class="row" ng-show="checkDetailStatus[order_detail.ID] == true">  
                                                <div class="inline" ng-repeat="detail in getRequest.orders.orders_detail |limitTo:1"> 
                                                    <div ng-if="checkPreDate(detail.serve_at)" class="col-md-4" ng-show="requestTab!='cancelledRequests'">
                                                        <button class="btn btn-sm" 
                                                        ng-init="vm.confirmClass[order_detail.ID] = 'btn-info'; vm.confirmMealButton[order_detail.ID] = false;" 
                                                        ng-disabled="(vm.confirmMealButton[order_detail.ID] == false && order_detail.request_menu.request_ingredient.length != 0) || (requestdetail[order_detail.ID].$invalid) || (vm.serveDetailInvalid[order_detail.ID] == true) || (vm.serveDeadlineInvalid[order_detail.ID] == true) || (vm.priceInvalid[order_detail.ID] == true)"
                                                        ng-class="vm.confirmClass[order_detail.ID]" 
                                                        ng-click="vm.updateRequest[getRequest.ID] = true; vm.confirmClass[order_detail.ID] = 'btn-success'; confirmed_request_mealname[order_detail.request_menu.ID] = confirmed_meal_name[order_detail.request_menu.ID]; confirmMealName(order_detail.request_menu.ID, order_detail.ID, 1, getRequest.ID)">
                                                            <i class="fa fa-check" aria-hidden="true"></i>
                                                        </button>
                                                    </div>
                                                    <div ng-if="checkPreDate(detail.serve_at)" class="col-md-4" >
                                                        <button class="btn btn-info btn-sm" ng-click="vm.confirmClass[order_detail.ID] = 'btn-info'; collapseToggleMore(getRequest.ID, order_detail.ID); vm.confirmMealButton[order_detail.ID] = true">
                                                            <i class="fa fa-pencil" aria-hidden="true"></i>
                                                        </button>
                                                    </div>
                                                    <div ng-if="checkPreDate(detail.serve_at)" class="col-md-4">
                                                        <button class="btn btn-danger btn-sm" ng-click="vm.updateRequest[getRequest.ID] = true; checkDetailStatus[order_detail.ID] = false; confirmMealName(order_detail.request_menu.ID, order_detail.ID, 3, getRequest.ID); checkDetailStatusAfterAction[order_detail.ID] = false">
                                                            <i class="fa fa-times"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row" ng-show="checkDetailStatus[order_detail.ID] == false"> 
                                                <div class="inline" ng-repeat="detail in getRequest.orders.orders_detail |limitTo:1"> 
                                                    <div ng-if="checkPreDate(detail.serve_at)" class="col-md-4">
                                                        <button class="btn btn-sm" ng-click="checkDetailStatus[order_detail.ID] = true; vm.confirmClass[order_detail.ID] = 'btn-info'; vm.confirmMealButton[order_detail.ID] = false; reConfirmMealName(order_detail.request_menu.ID, order_detail.ID, 3, getRequest.ID)"">
                                                            <i class="fa fa-check" aria-hidden="true"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div> 
                                        </div>
                                    </div>
                                </div>
                            </div>
                            </form>
                            <hr>
                            <div class="more" uib-collapse="!isCollapsed[order_detail.ID]" ng-init="mealIngredientDetails[order_detail.request_menu.ID] = order_detail.request_menu.request_ingredient">
                                <div class="row ingredient_listing" ng-repeat="ingredient_detail in order_detail.request_menu.request_ingredient track by $index" style="margin-top: 5px;">
                                    <div ng-if="ingredient_detail.duplicate_of_ingredient">
                                        <div class="col-md-3">
                                            <div class="row  form-group">
                                                <div class="col-md-6">
                                                    <span class="pull-right" ng-init="vm.unit[ingredient_detail.ID] = (ingredient_detail.unit) ? 'CLIENT.'+ingredient_detail.unit : '';"> 
                                                        {{ingredient_detail.amount}}{{vm.unit[ingredient_detail.ID] | translate }}
                                                    </span>
                                                </div>
                                                <div class="col-md-6">
                                                    <span class="pull-left">{{ingredient_detail.ingredient.name}}</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-9">
                                            <div class="row  form-group">
                                                <div class="col-md-3" >
                                                    <input type="number" ng-init="update_ingredient_amount[ingredient_detail.ID] = ingredient_detail.duplicate_of_ingredient.amount" min="0" ng-model="update_ingredient_amount[ingredient_detail.ID]" class="form-control" ng-show="vm.updateIng[ingredient_detail.ID]" ng-value="update_ingredient_amount[ingredient_detail.ID]">
                                                    <span class="pull-right" ng-show="!vm.updateIng[ingredient_detail.ID]">{{update_ingredient_amount[ingredient_detail.ID]}}</span>
                                                </div>

                                                <div class="col-md-2">
                                                    <select name="unit" 
                                                    ng-init="update_ingredient_unit[ingredient_detail.ID] = ingredient_detail.duplicate_of_ingredient.unit"
                                                    class="form-control" ng-model="update_ingredient_unit[ingredient_detail.ID]" 
                                                    ng-show="vm.updateIng[ingredient_detail.ID]">
                                                      <option value="g" ng-selected="update_ingredient_unit[ingredient_detail.ID] == 'g'">{{ vm.gunit | translate }}</option>
                                                      <option value="ml" ng-selected="update_ingredient_unit[ingredient_detail.ID] == 'ml'">{{ vm.mlunit | translate }}</option>
                                                      <option value="pcs" ng-selected="update_ingredient_unit[ingredient_detail.ID] == 'pcs'">{{ vm.pcsunit | translate }}</option>
                                                    </select>
                                                    <div ng-show="update_ingredient_unit[ingredient_detail.ID] != ''">
                                                    <span class="pull-right" ng-show="!vm.updateIng[ingredient_detail.ID]" translate="CLIENT.{{update_ingredient_unit[ingredient_detail.ID]}}"></span></div>
                                                </div>

                                                <div class="col-md-3">
                                                    <select 
                                                    ng-init="update_ingredient_name[ingredient_detail.ID] = ingredient_detail.duplicate_of_ingredient.ingredient" 
                                                    ng-model="update_ingredient_name[ingredient_detail.ID]" 
                                                    class="form-control" 
                                                    ng-options="ingredient as ingredient.name for ingredient in ingredientList track by ingredient.ID" 
                                                    ng-show="vm.updateIng[ingredient_detail.ID]"></select>
                                                    <span class="pull-right" ng-show="!vm.updateIng[ingredient_detail.ID]">{{update_ingredient_name[ingredient_detail.ID].name}}</span>
                                                </div>

                                                <div class="col-md-4">
                                                    <div class="row">
                                                        <div class="col-md-3" ng-show="requestTab!='cancelledRequests'">
                                                            <button 
                                                            ng-init="vm.confirmClass[ingredient_detail.ID] = 'btn-info'"
                                                            class="btn btn-sm pull-left" 
                                                            ng-disabled="updateIngredientName[ingredient_detail.ID] == true"
                                                            ng-class="vm.confirmClass[ingredient_detail.ID] "
                                                            ng-click="updateIngredient(ingredient_detail.ID, order_detail.request_menu.ID, 'U', ingredient_detail.ID_ingredient, ingredient_detail.status_confirmed, order_detail.ID);">
                                                                <i class="fa fa-check" aria-hidden="true"></i>
                                                            </button>
                                                        </div>
                                                        <div class="col-md-3" style="padding-left: 15px;" ng-show="requestTab!='cancelledRequests'" ng-click="vm.updateIng[ingredient_detail.ID] = true; vm.confirmClass[ingredient_detail.ID] = 'btn-info'">
                                                            <button class="btn btn-info btn-sm pull-left">
                                                                <i class="fa fa-pencil" aria-hidden="true"></i>
                                                            </button>
                                                        </div>
                                                        <div class="col-md-3"  style="padding-left: 13px;" ng-show="requestTab!='cancelledRequests'">
                                                            <button class="btn btn-danger btn-sm pull-left" ng-show="!vm.updateIng[ingredient_detail.ID]" ng-click="vm.cancelIng[ingredient_detail.ID] = false; vm.updateIng[ingredient_detail.ID] = false; updateIngredient(ingredient_detail.ID, order_detail.request_menu.ID, 'D', ingredient_detail.ID_ingredient, ingredient_detail.status_confirmed);">
                                                                <i class="fa fa-times"></i>
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div ng-if="(ingredient_detail.duplicate_of == 0 || ingredient_detail.duplicate_of_ingredient.duplicate_of == '') && (ingredient_detail.status_confirmed == 'C')">
                                        <div class="col-md-3">
                                            <div class="row  form-group">
                                                <div class="col-md-6">
                                                    <span class="pull-right" ng-init="vm.unit[ingredient_detail.ID] = (ingredient_detail.unit) ? 'CLIENT.'+ingredient_detail.unit : '';"> 
                                                        {{ingredient_detail.amount}}{{vm.unit[ingredient_detail.ID] | translate }}
                                                    </span>
                                                </div>
                                                <div class="col-md-6">
                                                    <span class="pull-left">{{ingredient_detail.ingredient.name}}</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-9">
                                            <div class="row  form-group">
                                                <div class="col-md-3" >
                                                    <input type="number" ng-init="update_ingredient_amount[ingredient_detail.ID] = ingredient_detail.amount" min="0" ng-model="update_ingredient_amount[ingredient_detail.ID]" class="form-control" ng-show="vm.updateIng[ingredient_detail.ID]" ng-value="update_ingredient_amount[ingredient_detail.ID]">
                                                    <span class="pull-right" ng-show="!vm.updateIng[ingredient_detail.ID]">{{update_ingredient_amount[ingredient_detail.ID]}}</span>
                                                </div>

                                                <div class="col-md-2">
                                                    <select name="unit" 
                                                    ng-init="update_ingredient_unit[ingredient_detail.ID] = ingredient_detail.unit"
                                                    class="form-control" ng-model="update_ingredient_unit[ingredient_detail.ID]" 
                                                    ng-show="vm.updateIng[ingredient_detail.ID]">
                                                      <option value="g" ng-selected="update_ingredient_unit[ingredient_detail.ID] == 'g'">{{ vm.gunit | translate }}</option>
                                                      <option value="ml" ng-selected="update_ingredient_unit[ingredient_detail.ID] == 'ml'">{{ vm.mlunit | translate }}</option>
                                                      <option value="pcs" ng-selected="update_ingredient_unit[ingredient_detail.ID] == 'pcs'">{{ vm.pcsunit | translate }}</option>
                                                    </select>
                                                    <div ng-show="update_ingredient_unit[ingredient_detail.ID] != ''">
                                                   <span class="pull-right" ng-show="!vm.updateIng[ingredient_detail.ID]" translate="CLIENT.{{update_ingredient_unit[ingredient_detail.ID]}}"></span></div>
                                                </div>

                                                <div class="col-md-3">
                                                    <select 
                                                    ng-init="update_ingredient_name[ingredient_detail.ID] = ingredient_detail.ingredient" 
                                                    ng-model="update_ingredient_name[ingredient_detail.ID]" 
                                                    class="form-control" 
                                                    ng-options="ingredient as ingredient.name for ingredient in ingredientList track by ingredient.ID" 
                                                    ng-show="vm.updateIng[ingredient_detail.ID]"></select>
                                                    <span class="pull-right" ng-show="!vm.updateIng[ingredient_detail.ID]">{{update_ingredient_name[ingredient_detail.ID].name}}</span>
                                                </div>

                                                <div class="col-md-4">
                                                    <div class="row">
                                                        <div class="col-md-3" ng-show="requestTab!='cancelledRequests'">
                                                            <button 
                                                            ng-init="vm.confirmClass[ingredient_detail.ID] = 'btn-info'"
                                                            class="btn btn-sm pull-left" 
                                                            ng-disabled="updateIngredientName[ingredient_detail.ID] == true"
                                                            ng-class="vm.confirmClass[ingredient_detail.ID] "
                                                            ng-click="updateIngredient(ingredient_detail.ID, order_detail.request_menu.ID, 'U', ingredient_detail.ID_ingredient, ingredient_detail.status_confirmed, order_detail.ID);">
                                                                <i class="fa fa-check" aria-hidden="true"></i>
                                                            </button>
                                                        </div>
                                                        <div class="col-md-3" style="padding-left: 15px;" ng-show="requestTab!='cancelledRequests'" ng-click="vm.updateIng[ingredient_detail.ID] = true; vm.confirmClass[ingredient_detail.ID] = 'btn-info'">
                                                            <button class="btn btn-info btn-sm pull-left">
                                                                <i class="fa fa-pencil" aria-hidden="true"></i>
                                                            </button>
                                                        </div>
                                                        <div class="col-md-3"  style="padding-left: 13px;" ng-show="requestTab!='cancelledRequests'">
                                                            <button class="btn btn-danger btn-sm pull-left" ng-show="!vm.updateIng[ingredient_detail.ID]" ng-click="vm.cancelIng[ingredient_detail.ID] = false; vm.updateIng[ingredient_detail.ID] = false; updateIngredient(ingredient_detail.ID, order_detail.request_menu.ID, 'D', ingredient_detail.ID_ingredient, ingredient_detail.status_confirmed);">
                                                                <i class="fa fa-times"></i>
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div ng-if="!ingredient_detail.duplicate_of_ingredient && ingredient_detail.status_confirmed == 'N'">
                                        <div class="col-md-3">
                                            <div class="row  form-group">
                                                <div class="col-md-6">
                                                    <span class="pull-right" ng-init="vm.unit[ingredient_detail.ID] = (ingredient_detail.unit) ? 'CLIENT.'+ingredient_detail.unit : '';"> {{ingredient_detail.amount}}{{vm.unit[ingredient_detail.ID] | translate }}</span>
                                                </div>
                                                <div class="col-md-6">
                                                    <span class="pull-left">{{ingredient_detail.ingredient.name}}</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-9">
                                            <div class="row  form-group">
                                                <div class="col-md-3" >
                                                    <input type="number" ng-init="update_ingredient_amount[ingredient_detail.ID] = ingredient_detail.amount" min="0" ng-model="update_ingredient_amount[ingredient_detail.ID]" class="form-control" ng-show="vm.updateIng[ingredient_detail.ID]" ng-value="update_ingredient_amount[ingredient_detail.ID]">
                                                    <span class="pull-right" ng-show="!vm.updateIng[ingredient_detail.ID]">{{update_ingredient_amount[ingredient_detail.ID]}}</span>
                                                </div>

                                                <div class="col-md-2">
                                                    <select name="unit" 
                                                    ng-init="update_ingredient_unit[ingredient_detail.ID] = ingredient_detail.unit"
                                                    class="form-control" ng-model="update_ingredient_unit[ingredient_detail.ID]" 
                                                    ng-show="vm.updateIng[ingredient_detail.ID]">
                                                      <option value="g" ng-selected="update_ingredient_unit[ingredient_detail.ID] == 'g'">{{ vm.gunit | translate }}</option>
                                                      <option value="ml" ng-selected="update_ingredient_unit[ingredient_detail.ID] == 'ml'">{{ vm.mlunit | translate }}</option>
                                                      <option value="pcs" ng-selected="update_ingredient_unit[ingredient_detail.ID] == 'pcs'">{{ vm.pcsunit | translate }}</option>
                                                    </select>
                                                    <div ng-show="update_ingredient_unit[ingredient_detail.ID] != ''">
                                                    <span class="pull-right" ng-show="!vm.updateIng[ingredient_detail.ID]" translate="CLIENT.{{update_ingredient_unit[ingredient_detail.ID]}}"></span></div>
                                                </div>

                                                <div class="col-md-3">
                                                    <select 
                                                    ng-init="update_ingredient_name[ingredient_detail.ID] = ingredient_detail.ingredient" 
                                                    ng-model="update_ingredient_name[ingredient_detail.ID]" 
                                                    class="form-control" 
                                                    ng-options="ingredient as ingredient.name for ingredient in ingredientList track by ingredient.ID" 
                                                    ng-show="vm.updateIng[ingredient_detail.ID]"></select>
                                                    <span class="pull-right" ng-show="!vm.updateIng[ingredient_detail.ID]">{{update_ingredient_name[ingredient_detail.ID].name}}</span>
                                                </div>

                                                <div class="col-md-4">
                                                    <div class="row">
                                                        <div class="col-md-3" ng-show="requestTab!='cancelledRequests'">
                                                            <button 
                                                            ng-init="vm.confirmClass[ingredient_detail.ID] = 'btn-info'"
                                                            class="btn btn-sm pull-left" 
                                                            ng-disabled="updateIngredientName[ingredient_detail.ID] == true"
                                                            ng-class="vm.confirmClass[ingredient_detail.ID] "
                                                            ng-click="updateIngredient(ingredient_detail.ID, order_detail.request_menu.ID, 'U', ingredient_detail.ID_ingredient, ingredient_detail.status_confirmed, order_detail.ID);">
                                                                <i class="fa fa-check" aria-hidden="true"></i>
                                                            </button>
                                                        </div>
                                                        <div class="col-md-3" style="padding-left: 15px;" ng-show="requestTab!='cancelledRequests'" ng-click="vm.updateIng[ingredient_detail.ID] = true; vm.confirmClass[ingredient_detail.ID] = 'btn-info'">
                                                            <button class="btn btn-info btn-sm pull-left">
                                                                <i class="fa fa-pencil" aria-hidden="true"></i>
                                                            </button>
                                                        </div>
                                                        <div class="col-md-3"  style="padding-left: 13px;" ng-show="requestTab!='cancelledRequests'">
                                                            <button class="btn btn-danger btn-sm pull-left" ng-show="!vm.updateIng[ingredient_detail.ID]" ng-click="vm.cancelIng[ingredient_detail.ID] = false; vm.updateIng[ingredient_detail.ID] = false; updateIngredient(ingredient_detail.ID, order_detail.request_menu.ID, 'D', ingredient_detail.ID_ingredient, ingredient_detail.status_confirmed);">
                                                                <i class="fa fa-times"></i>
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row add_new_ing">
                                    <div class="col-sm-offset-3 col-md-9">
                                        <div class="row" 
                                        ng-repeat="ingredient in ingredients track by $index" 
                                        style="margin-top: 5px;" 
                                        ng-show="order_detail.request_menu.ID == ingredient.ID_request_menu">
                                            <div class="form-group">
                                                <div class="col-md-3">
                                                    <span class="pull-right">{{ingredient.amount}}</span>
                                                </div>
                                                <div class="col-md-2">
                                                    <span class="pull-right" ng-init="vm.unit[$index] = (ingredient.unit) ?  'CLIENT.'+ingredient.unit : ''; "> {{vm.unit[$index] | translate }}</span>
                                                </div>
                                                <div class="col-md-3">
                                                    <span class="pull-right">{{ingredient.name}}</span>
                                                </div>
                                                <div class="col-md-4">
                                                    <button type="button" class="btn btn-danger" ng-click="removeIngredient(ingredients, $index)"><i class="fa fa-times"></i></button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12"><label translate="CLIENT.ADD INGREDIENT"></label></div>
                                            <div class="col-md-12">
                                                <div class="row">
                                                    <div class="form-group col-md-3">
                                                        <span class="control-label" translate="CLIENT.AMOUNT"></span>
                                                        <input type="number" min="1" name="amount" ng-model="more_ingredient.amount" class="form-control">
                                                    </div> 
                                                    <div class="col-md-2">
                                                        <span class="control-label" translate="CLIENT.UNIT"></span>
                                                        <select name="unit" class="form-control" ng-model="more_ingredient.unit">
                                                          <option value="g">{{ vm.gunit | translate }}</option>
                                                          <option value="ml">{{ vm.mlunit | translate }}</option>
                                                          <option value="pcs">{{ vm.pcsunit | translate }}</option>
                                                        </select>
                                                    </div> 
                                                    <div class="form-group col-md-3">
                                                        <span class="control-label" translate="CLIENT.INGREDIENTS"></span>
                                                        <select name="ingredient" ng-model="more_ingredient.ingredient" class="form-control" ng-change="onIngredientChange()" ng-options="ingredient.name for ingredient in ingredientList">
                                                        </select>
                                                    </div> 
                                                    <div class="form-group col-md-1 v-center">
                                                        <button class="btn btn-primary add_ingre" type="button" ng-click="addIngredient(order_detail.request_menu.ID, order_detail.ID)" ng-disabled="!(more_ingredient.ingredient)">
                                                        <span translate="CLIENT.ADD"></span>
                                                        </button>
                                                    </div> 
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row" ng-show="vm.ing_exist[order_detail.ID] == true">
                                            <div class="col-sm-offset-5 col-md-5" >
                                                <span style="color:red;" translate="CLIENT.INGREDIENT ALREADY ADDED"></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row restaurant_desc">
                                    <div class="col-md-3">
                                        <div class="col-md-12">
                                            <label translate="CLIENT.DESCRIPTION"></label>
                                            <div ng-if="mySplit(order_detail.comment,0)!==undefined && mySplit(order_detail.comment,1)!==undefined">
                                                {{mySplit(order_detail.comment,1)}}
                                            </div>
                                            <div ng-if="mySplit(order_detail.comment,0)!==undefined && mySplit(order_detail.comment,1)==undefined">
                                                {{mySplit(order_detail.comment,0)}}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <label translate="CLIENT.DESCRIPTION"></label>
                                        <div ng-if="mySplit(order_detail.comment,0)!==undefined && mySplit(order_detail.comment,1)!==undefined">

                                           <textarea ng-if="mySplit(order_detail.comment,0) !== ''" ng-init="order_detail_precomment[order_detail.ID] = mySplit(order_detail.comment,1); order_detail_comment[order_detail.ID] = mySplit(order_detail.comment,0)" ng-model="order_detail_comment[order_detail.ID]" ng-value="order_detail_comment[order_detail.ID]" class="form-control" rows="3"></textarea>

                                           <textarea ng-if="mySplit(order_detail.comment,0) == ''" ng-init="order_detail_precomment[order_detail.ID] = mySplit(order_detail.comment,1); order_detail_comment[order_detail.ID] = ''" ng-model="order_detail_comment[order_detail.ID]" class="form-control" rows="3"></textarea>
                                        </div>
                                        <div ng-if="order_detail.comment == ''">
                                            <textarea ng-init="order_detail_precomment[order_detail.ID] = ''; order_detail_comment[order_detail.ID] = ''" ng-model="order_detail_comment[order_detail.ID]" class="form-control" rows="3"></textarea>
                                        </div>
                                        <div ng-if="order_detail.comment !== '' && mySplit(order_detail.comment,0)!==undefined && mySplit(order_detail.comment,1)==undefined">
                                            <textarea ng-init="order_detail_precomment[order_detail.ID] = mySplit(order_detail.comment,0); order_detail_comment[order_detail.ID] = ''" ng-model="order_detail_comment[order_detail.ID]" class="form-control" rows="3"></textarea>
                                        </div>

                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-9 col-sm-offset-3">
                                        <form name="serving_detail[order_detail.ID]" ng-if="!order_detail.side_dish || order_detail.side_dish == 0">
                                            <div class="form-group">
                                                <label translate="CLIENT.OPTIONS"></label>
                                            </div>
                                            <div class="row">
                                                <div class="form-group col-md-3">
                                                    <span translate="CLIENT.MINIMUM SERVINGS"></span>
                                                </div>
                                                <div class="form-group col-md-2">
                                                    <input type="number" min="1" 
                                                    ng-class="(order_detail.request_param.request_min_servings > 0) ? '' : 'min_manually'"
                                                    max="{{request_max_servings[order_detail.ID]}}" 
                                                    ng-init="request_min_servings[order_detail.ID] = (order_detail.request_param.request_min_servings > 0) ? order_detail.request_param.request_min_servings : ''" 
                                                    ng-model="request_min_servings[order_detail.ID]" 
                                                    ng-value="request_min_servings[order_detail.ID]" 
                                                    class="form-control min_manually_{{order_detail.ID}}" 
                                                    ng-change="checkServeValidation(getRequest.ID, order_detail.ID, serving_detail[order_detail.ID].$valid); autoMaxServing(getRequest.ID, order_detail.ID, serving_detail[order_detail.ID].$valid);">
                                                </div> 
                                                <div class="form-group col-md-3">
                                                    <span translate="CLIENT.MAXIMUM SERVINGS"></span>
                                                </div>
                                                <div class="form-group col-md-2">
                                                    <input type="number" 
                                                    ng-class="(order_detail.request_param.request_max_servings > 0) ? '' : 'max_manually'"
                                                    min="{{request_min_servings[order_detail.ID]}}" ng-init="request_max_servings[order_detail.ID] = (order_detail.request_param.request_max_servings > 0) ? order_detail.request_param.request_max_servings : ''" ng-model="request_max_servings[order_detail.ID]" ng-value="request_max_servings[order_detail.ID]" class="form-control max_manually_{{order_detail.ID}}"
                                                    ng-change="checkServeValidation(getRequest.ID, order_detail.ID, serving_detail[order_detail.ID].$valid); checkMaxServing(getRequest.ID, order_detail.ID, serving_detail[order_detail.ID].$valid);">
                                                </div> 
                                            </div>
                                            <div class="row" ng-init="vm.mini_serving[order_detail.ID] = convertToDate(order_detail.serve_at) | date: 'dd.MM. HH:mm'">
                                                <div class="form-group col-md-5">
                                                    <span translate="CLIENT.MINIMUM SERVINGS DEADLINE"></span>
                                                </div>
                                                <div class="form-group col-md-4" ng-if="order_detail.request_param.request_deadline != '0000-00-00 00:00:00' && order_detail.request_param.request_deadline">
                                                    <input type="text" class="form-control" datetime-picker="dd.MM. HH:mm"
                                                       ng-init="request_deadline[order_detail.ID] = convertToDate(order_detail.request_param.request_deadline) | date:'dd.MM. HH:mm';"
                                                       name="request_deadline"
                                                       ng-model="request_deadline[order_detail.ID]" 
                                                       ng-value="request_deadline[order_detail.ID]" 
                                                       is-open="vm.date_picker.open" 
                                                       enable-time="true" 
                                                       datepicker-options="vm.date_picker.datepickerOptions" datepicker-append-to-body="false" ng-click="vm.openCalendar()" 
                                                       ng-keyup="checkDeadlineValidation(getRequest.ID, order_detail.ID, serving_detail[order_detail.ID].$valid)"
                                                       ng-change="checkDeadlineValidation(getRequest.ID, order_detail.ID, serving_detail[order_detail.ID].$valid)"
                                                    />
                                                </div>
                                                <div class="form-group col-md-4" ng-hide="order_detail.request_param.request_deadline != '0000-00-00 00:00:00' && order_detail.request_param.request_deadline">
                                                    <input type="text" class="form-control" datetime-picker="dd.MM. HH:mm"
                                                       name="request_deadline"
                                                       ng-model="request_deadline[order_detail.ID]" 
                                                       is-open="vm.date_picker.open" 
                                                       enable-time="true" 
                                                       datepicker-options="vm.date_picker.datepickerOptions" datepicker-append-to-body="false" ng-click="vm.openCalendar()" 
                                                       ng-keyup="checkDeadlineValidation(getRequest.ID, order_detail.ID, serving_detail[order_detail.ID].$valid)"
                                                       ng-change="checkDeadlineValidation(getRequest.ID, order_detail.ID, serving_detail[order_detail.ID].$valid)"
                                                    />
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="form-group col-md-5">
                                                    <span translate="CLIENT.SERVING TIME INTERVAL"></span>
                                                </div>
                                                <div class="form-group col-md-5">
                                                    <div class="row">
                                                        <div class="form-group col-md-6">
                                                            <input 
                                                            ng-if="order_detail.request_param.request_from != '00:00:00' && order_detail.request_param.request_from != ''"
                                                            ng-init="request_from[order_detail.ID] = convertToTime(order_detail.request_param.request_from) | date:'HH:mm'; isRequiredField = true"
                                                            ui-timepicker="vm.timeOptions" name="request_from" 
                                                            max="request_to[order_detail.ID]" 
                                                            ng-model="request_from[order_detail.ID]" 
                                                            ng-value="request_from[order_detail.ID]" 
                                                            class="form-control"
                                                            ng-keyup="checkServeValidation(getRequest.ID, order_detail.ID, serving_detail[order_detail.ID].$valid)"
                                                            ng-change="checkServeValidation(getRequest.ID, order_detail.ID, serving_detail[order_detail.ID].$valid)">

                                                            <input 
                                                            ng-if="order_detail.request_param.request_from == '00:00:00' || order_detail.request_param.request_from == ''"
                                                            ui-timepicker="vm.timeOptions" name="request_from" 
                                                            max="request_to[order_detail.ID]" 
                                                            ng-model="request_from[order_detail.ID]"  
                                                            class="form-control"
                                                            ng-keyup="checkServeValidation(getRequest.ID, order_detail.ID, serving_detail[order_detail.ID].$valid)"
                                                            ng-change="checkServeValidation(getRequest.ID, order_detail.ID, serving_detail[order_detail.ID].$valid)">
                                                        </div>
                                                        <div class="form-group col-md-6">
                                                            <input 
                                                            ng-if="order_detail.request_param.request_to != '00:00:00' && order_detail.request_param.request_from != ''"
                                                            ng-init="request_to[order_detail.ID] = convertToTime(order_detail.request_param.request_to) | date:'HH:mm'; isRequiredField = true"
                                                            min="{{request_from[order_detail.ID]}}" 
                                                            ui-timepicker="vm.timeOptions" name="request_to" 
                                                            ng-model="request_to[order_detail.ID]" 
                                                            ng-value="request_to[order_detail.ID]" 
                                                            class="form-control"
                                                            ng-keyup="checkServeValidation(getRequest.ID, order_detail.ID, serving_detail[order_detail.ID].$valid)"
                                                            ng-change="checkServeValidation(getRequest.ID, order_detail.ID, serving_detail[order_detail.ID].$valid)">
                                                            <input 
                                                            ng-if="order_detail.request_param.request_to == '00:00:00' || order_detail.request_param.request_from == ''"
                                                            min="{{request_from[order_detail.ID]}}" 
                                                            ui-timepicker="vm.timeOptions" name="request_to" 
                                                            ng-model="request_to[order_detail.ID]" 
                                                            class="form-control"
                                                            ng-keyup="checkServeValidation(getRequest.ID, order_detail.ID, serving_detail[order_detail.ID].$valid)"
                                                            ng-change="checkServeValidation(getRequest.ID, order_detail.ID, serving_detail[order_detail.ID].$valid)">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="form-group col-md-5">
                                                    <span translate="CLIENT.ONE FREE SERVING"></span>
                                                </div>
                                                <div class="form-group col-md-2">
                                                    <input type="number" ng-init="free_serving[order_detail.ID] = (order_detail.request_param.request_free_every > 0) ? order_detail.request_param.request_free_every : ''" min="1" name="free_serving" ng-model="free_serving[order_detail.ID]" ng-value="free_serving[order_detail.ID]" class="form-control"
                                                    ng-keyup="checkServeValidation(getRequest.ID, order_detail.ID, serving_detail[order_detail.ID].$valid)"
                                                    ng-change="checkServeValidation(getRequest.ID, order_detail.ID, serving_detail[order_detail.ID].$valid)">
                                                </div>
                                                <div class="form-group col-md-2"><span translate="CLIENT.SERVINGS"></span></div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row container-fluid custom_container">
                            <div class="col-md-3  request_meal restcomment_sec">
                                <label class="control-label" translate="CLIENT.MESSAGE"></label>
                                <div ng-if="messageSplit(getRequest.orders.comment,0)!==undefined">
                                    {{messageSplit(getRequest.orders.comment,0)}}
                                </div>
                            </div>
                            <div class="col-md-4 confirm_meal restcomment_sec">
                                <label class="control-label" translate="CLIENT.MESSAGE"></label>
                                <div ng-if="messageSplit(getRequest.orders.comment,1)!==undefined">
                                   <textarea ng-if="messageSplit(getRequest.orders.comment,1) !== ''"  ng-init="vm.confirmRequest_comment[getRequest.ID] = messageSplit(getRequest.orders.comment,1)" name="comment" ng-model="vm.confirmRequest_comment[getRequest.ID]" ng-value="vm.confirmRequest_comment[getRequest.ID]" class="form-control" rows="3"></textarea>

                                   <textarea ng-if="messageSplit(getRequest.orders.comment,1) == ''"  ng-init="vm.confirmRequest_comment[getRequest.ID] = ''" name="comment" ng-model="vm.confirmRequest_comment[getRequest.ID]" ng-value="vm.confirmRequest_comment[getRequest.ID]" ng-value="vm.confirmRequest_comment[getRequest.ID]" class="form-control" rows="3"></textarea>
                                </div>
                                <div ng-if="getRequest.orders.comment == '' || !messageSplit(getRequest.orders.comment,1)">
                                    <textarea ng-init="vm.confirmRequest_comment[getRequest.ID] = ''" name="comment" ng-model="vm.confirmRequest_comment[getRequest.ID]" ng-value="vm.confirmRequest_comment[getRequest.ID]" class="form-control" rows="3"></textarea>
                                </div>
                            </div>
                            <div class="col-md-5 action_sec" ng-show="requestTab!='cancelledRequests'">
                                <div class="row">
                                    <div class="col-md-12 v-center">
                                        <div class="row">
                                            <div class="col-md-10">
                                                <div class="v-center pull-right action_box" ng-repeat="detail in getRequest.orders.orders_detail |limitTo:1">
                                                    <div class="inline">
                                                        <button ng-if="checkPreDate(detail.serve_at)"  
                                                        ng-init="vm.saveLoading=[]"
                                                        class="btn btn-lg btn-primary" 
                                                        ng-disabled="!vm.updateRequest[getRequest.ID]"
                                                        ng-click="saveChanges($index, getRequest.ID)" >
                                                            <i ng-show="vm.saveLoading[$index]" class="fa fa-spinner fa-spin"></i>
                                                            <span translate="CLIENT.CONFIRM"></span>
                                                        </button>
                                                    </div>
                                                    <div class="inline">
                                                        <button ng-if="checkPreDate(detail.serve_at)" type="button" class="btn btn-lg btn-danger" ng-click="vm.cancelRequest(getRequest.ID)">
                                                            <i ng-show="cancelId== getRequest.ID" class="fa fa-spinner fa-spin"></i>
                                                            <i class="fa fa-times"></i>
                                                            <span translate="CLIENT.CANCELNEW"></span>
                                                        </button>
                                                    </div>
                                                    <div class="inline v-center">
                                                       <button type="button" class="btn btn-lg btn-default" data-dismiss="modal" aria-label="Close" translate="CLIENT.CLOSE">
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="alert alert-success text-center col-sm-offset-4 col-md-4 form-group" ng-show="vm.responseMsg == 'success' && vm.showMsg">
                                <span translate="Changes have been successfully updated!" class="ng-scope"></span>
                            </div>
                            <div class="alert alert-danger text-center col-sm-offset-4 col-md-4 form-group" ng-show="vm.responseMsg == 'failed' && vm.showMsg">
                                <span translate="Something wrong please try again!" class="ng-scope"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div ng-if="!vm.reqCLoading">
    <!--Confirm requestDetail Modals-->
    <div class="modal fade custom_modal other_modal " ng-repeat="getRequest in vm.getConfirmRequest track by $index" id="requestConfirmDetail{{getRequest.ID}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="container">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-body">
                        <div class="row container-fluid custom_container">
                            <div class="col-md-7">
                                <h5 class="pull-left"><label translate="CLIENT.REQUEST CONFIRMATION"></label></h5>
                            </div>
                            <div class="col-md-5">
                               <button type="button" class="close pull-right" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            </div>
                        </div>
                        <div class="row container-fluid custom_container">
                            <div class="col-md-2">
                                <h5 class="pull-left"><span class="inline" ng-repeat="detail in getRequest.orders.orders_detail |limitTo:1">
                                    {{convertToDate(detail.serve_at) | date:'dd.MM.y'}}
                                </span></h5>
                            </div>
                            <div class="col-md-2">
                               <h5> <span translate="CLIENT.ONO"></span> {{getRequest.orders.ID}}</h5>
                            </div>
                        </div>
                        <div class="row container-fluid custom_container">
                            <div class="col-md-4 request_meal container_head">
                                <h5 class="text-center"><label translate="CLIENT.REQUIRED"></label></h5>
                            </div>
                            <div class="col-md-4 confirm_meal container_head">
                                <h5 class="text-center"><label translate="CLIENT.CONFIRMED"></label></h5>
                            </div>
                        </div>
                        <div ng-repeat="order_detail in getRequest.orders.orders_detail track by $index" ng-show="!vm.cancelOrderDetail[order_detail.ID]">
                            <div class="container-fluid row custom_container" ng-init="vm.orderStrikethrough[order_detail.ID] = (order_detail.status == 3) ? 'strikethrough' : '';" >
                                <div class="col-sm-4 request_meal">
                                    <div class="row custom_row">
                                        <div class="col-md-4">
                                            <div ng-class="vm.orderStrikethrough[order_detail.ID]" ng-if="!order_detail.side_dish || order_detail.side_dish == 0">
                                             {{convertToDate(order_detail.serve_at) | date:'HH:mm'}}
                                            </div>
                                        </div>
                                        <div class="col-md-8">
                                            <span ng-class="vm.orderStrikethrough[order_detail.ID]" class="pull-left"> {{order_detail.x_number}}x {{order_detail.request_menu.name}} </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 confirm_meal">
                                    <div class="row custom_row">
                                        <div class="col-md-4">
                                            <div ng-class="vm.orderStrikethrough[order_detail.ID]">
                                                <span ng-class="vm.orderStrikethrough[order_detail.ID]" ng-if="!order_detail.side_dish || order_detail.side_dish == 0">
                                                 {{convertToDate(order_detail.serve_at) | date:'HH:mm'}}
                                                </span>
                                            </div>
                                        </div>
                                        <div class="col-md-8">
                                            <div ng-class="vm.orderStrikethrough[order_detail.ID]">
                                                <span ng-class="vm.orderStrikethrough[order_detail.ID]" ng-if="order_detail.request_menu.confirmed_name">{{order_detail.x_number}}x  {{order_detail.request_menu.confirmed_name}}</span> <span ng-if="!order_detail.request_menu.confirmed_name">{{order_detail.x_number}}x  {{order_detail.request_menu.name}}</span> 
                                            </div> 
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 action_sec">
                                    <div class="row custom_row">
                                        <div class="col-md-7">
                                            <div class="row">
                                                <div class="col-md-12" ng-class="vm.orderStrikethrough[order_detail.ID]">
                                                    {{order_detail.x_number}}x  {{order_detail.price}} {{order_detail.currency}}
                                                </div>
                                            </div>    
                                        </div>                          
                                        <div class="col-md-5">  
                                            <div class="row">      
                                                <div class="col-md-4" ng-show="requestTab!='cancelledRequests'">
                                                    <button 
                                                    ng-if="( order_detail.request_param 
                                                    && (order_detail.request_param.request_min_servings != 0 
                                                    && order_detail.request_param.request_deadline != '0000-00-00 00:00:00'  
                                                    && order_detail.request_param.request_from != '00:00:00'
                                                    && order_detail.request_param.request_to != '00:00:00') )
                                                    || (order_detail.request_menu.request_ingredient.length > 0 ) 
                                                    || (order_detail.comment && order_detail.comment != '<br>') "
                                                    class="btn btn-info btn-sm" 
                                                    ng-click="order_detail.visible = !order_detail.visible" 
                                                    translate="CLIENT.DETAILSNEW"></button>
                                                    <button ng-hide="( order_detail.request_param 
                                                    && (order_detail.request_param.request_min_servings != 0 
                                                    && order_detail.request_param.request_deadline != '0000-00-00 00:00:00'  
                                                    && order_detail.request_param.request_from != '00:00:00'
                                                    && order_detail.request_param.request_to != '00:00:00') )
                                                    || (order_detail.request_menu.request_ingredient.length > 0 ) 
                                                    || (order_detail.comment && order_detail.comment != '<br>') "
                                                    class="btn btn-info btn-sm" 
                                                    translate="CLIENT.NODETAILSNEW" ng-disabled="true"></button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <hr>
                            <div class="more" uib-collapse="!order_detail.visible">
                                <div class="row ingredient_listing" ng-repeat="ingredient_detail in order_detail.request_menu.request_ingredient track by $index" style="margin-top: 5px;">
                                    <div ng-if="ingredient_detail.duplicate_of_ingredient">
                                        <div class="col-md-8">
                                            <div class="row">
                                                <div class="col-sm-offset-2 col-md-4">
                                                    <span class="pull-left strikethrough" ng-init="vm.unit[ingredient_detail.ID] = (ingredient_detail.unit) ? 'CLIENT.'+ingredient_detail.unit : '';"> 
                                                        {{ingredient_detail.amount}}
                                                        {{vm.unit[ingredient_detail.ID] | translate }}
                                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                        {{ingredient_detail.ingredient.name}}
                                                    </span>
                                                </div>
                                                <div class="col-sm-offset-2  col-md-4">
                                                    <span class="pull-left" ng-init="vm.dunit[ingredient_detail.duplicate_of_ingredient.ID] = 'CLIENT.'+ingredient_detail.duplicate_of_ingredient.unit;"> 
                                                        {{ingredient_detail.duplicate_of_ingredient.amount}}
                                                        {{vm.dunit[ingredient_detail.duplicate_of_ingredient.ID] | translate }}
                                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                        {{ingredient_detail.duplicate_of_ingredient.ingredient.name}}
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div ng-if="!ingredient_detail.duplicate_of_ingredient && ingredient_detail.status_confirmed == 'D'">
                                        <div class="col-md-8">
                                            <div class="row" ng-init="vm.unit[ingredient_detail.ID] = (ingredient_detail.unit) ? 'CLIENT.'+ingredient_detail.unit : '';">
                                                <div class="col-sm-offset-2 col-md-4">
                                                    <span class="pull-left strikethrough"> 
                                                        {{ingredient_detail.amount}}
                                                        {{vm.unit[ingredient_detail.ID] | translate }}
                                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                        {{ingredient_detail.ingredient.name}}
                                                    </span>
                                                </div>
                                                <div class="col-sm-offset-2  col-md-4">
                                                    <span class="pull-left strikethrough"> 
                                                        {{ingredient_detail.amount}}
                                                        {{vm.unit[ingredient_detail.ID] | translate }}
                                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                        {{ingredient_detail.ingredient.name}}
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div ng-if="(ingredient_detail.duplicate_of == 0 || ingredient_detail.duplicate_of_ingredient.duplicate_of == '') && (ingredient_detail.status_confirmed == 'C')">
                                        <div class="col-md-8">
                                            <div class="row" ng-init="vm.unit[ingredient_detail.ID] = (ingredient_detail.unit) ? 'CLIENT.'+ingredient_detail.unit : '';">
                                                <div class="col-sm-offset-2 col-md-4">
                                                    <span class="pull-left"> 
                                                        {{ingredient_detail.amount}}
                                                        {{vm.unit[ingredient_detail.ID] | translate }}
                                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                        {{ingredient_detail.ingredient.name}}
                                                    </span>
                                                </div>
                                                <div class="col-sm-offset-2  col-md-4">
                                                    <span class="pull-left"> 
                                                        {{ingredient_detail.amount}}
                                                        {{vm.unit[ingredient_detail.ID] | translate }}
                                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                        {{ingredient_detail.ingredient.name}}
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <br>
                                </div>
                                <div class="row custom_container meal_comment_sec">
                                    <div class="col-md-4">
                                        <div class="row" ng-show="order_detail.comment && order_detail.comment != '<br>'">
                                            <div class="col-md-12">
                                                <label translate="CLIENT.DESCRIPTION"></label>
                                                <div ng-if="mySplit(order_detail.comment,0)!==undefined && mySplit(order_detail.comment,1)!==undefined">
                                                    {{mySplit(order_detail.comment,1)}}
                                                </div>
                                                <div ng-if="mySplit(order_detail.comment,0)!==undefined && mySplit(order_detail.comment,1)==undefined">
                                                    {{mySplit(order_detail.comment,0)}}
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-5">
                                        <div class="form-group" ng-show="order_detail.comment && order_detail.comment != '<br>'">
                                            <label translate="CLIENT.DESCRIPTION"></label><br>
                                            <div ng-if="mySplit(order_detail.comment,0)!==undefined && mySplit(order_detail.comment,1)!==undefined">
                                                <div class="description_box" ng-if="mySplit(order_detail.comment,0)" ng-show="order_detail.comment">
                                                    {{mySplit(order_detail.comment,0)}}
                                                </div>
                                            </div>
                                        </div>
                                        <div ng-if="!order_detail.side_dish || order_detail.side_dish == 0" ng-show="order_detail.request_param.request_min_servings != 0 && order_detail.request_param.request_deadline != '0000-00-00 00:00:00' && order_detail.request_param.request_from != '00:00:00' && order_detail.request_param.request_to != '00:00:00'">
                                            <div class="row form-group minimumserving" ng-show="order_detail.request_param">
                                                <div class="col-md-7">
                                                    <span translate="CLIENT.MINIMUM SERVINGS"></span>
                                                </div>
                                                <div class="col-md-5">
                                                    {{order_detail.request_param.request_min_servings}} (<span translate="CLIENT.MAX"></span>.  {{order_detail.request_param.request_max_servings}} )
                                                </div> 
                                            </div>
                                            <div class="row dealine" ng-show="order_detail.request_param">
                                                <div class="col-md-7">
                                                    <span translate="CLIENT.DEADLINE"></span>
                                                </div>
                                                <div class="col-md-5">
                                                    <label>{{convertToDate(order_detail.request_param.request_deadline) | date:'dd.MM. HH:mm'}}</label>
                                                </div> 
                                            </div>
                                            <div class="row serve_at_time" ng-show="order_detail.request_param">
                                                <div class="col-md-7">
                                                    <label translate="CLIENT.SERVED"></label>
                                                </div>
                                                <div class="col-md-5">
                                                    <label>{{convertToTime(order_detail.request_param.request_from) | date:'HH:mm'}}  - {{convertToTime(order_detail.request_param.request_to) | date:'HH:mm'}}</label>
                                                </div> 
                                            </div>
                                            <div class="row free_serving" ng-show="order_detail.request_param">
                                                <div class="col-md-12 request_free_every" ng-if="order_detail.request_param.request_free_every > 0">
                                                    <span translate="CLIENT.ONE FREE SERVING"></span>
                                                    {{ order_detail.request_param.request_free_every}}
                                                    <span translate="CLIENT.SERVINGS"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row container-fluid custom_container">
                            <div ng-if="getRequest.orders.comment != '' && getRequest.orders.comment != '<br>' " >
                                <div class="col-md-4  request_meal comment_sec">
                                    <label class="control-label" translate="CLIENT.MESSAGE" ng-show="getRequest.orders.comment"></label>
                                    <div ng-if="messageSplit(getRequest.orders.comment,0)!==undefined">
                                        {{messageSplit(getRequest.orders.comment,0)}}
                                    </div>
                                </div>
                                <div class="col-md-4 confirm_meal comment_sec">
                                    <label class="control-label" translate="CLIENT.MESSAGE" ng-show="getRequest.orders.comment"></label>
                                    <div ng-if="messageSplit(getRequest.orders.comment,1)!==undefined">
                                        <div class="" >
                                            {{messageSplit(getRequest.orders.comment,1)}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-8" ng-if="(getRequest.orders.comment == '' || getRequest.orders.comment == '<br>') "></div>

                            <div class="col-md-4 action_sec" ng-show="requestTab!='cancelledRequests'">
                                <div class="row pull-right">
                                    <div class="col-md-12 v-center">
                                        <div class="inline" ng-repeat="detail in getRequest.orders.orders_detail |limitTo:1">
                                            <button ng-if="checkPreDate(detail.serve_at)" class="btn btn-lg btn-danger" ng-click="vm.cancelRequest(getRequest.ID)">
                                                <i ng-show="cancelId== getRequest.ID" class="fa fa-spinner fa-spin"></i>
                                                <i class="fa fa-times"></i>
                                                <span translate="CLIENT.CANCELNEW"></span>
                                            </button>
                                        </div>
                                        <div class="inline">
                                           <button type="button" class="btn btn-lg btn-default" data-dismiss="modal" aria-label="Close" translate="CLIENT.CLOSE">
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <br>
                            <div class="alert alert-success text-center col-sm-offset-4 col-md-4 form-group" ng-show="vm.responseMsg == 'success' && vm.showMsg">
                                <span translate="Changes have been successfully updated!" class="ng-scope"></span>
                            </div>
                            <div class="alert alert-danger text-center col-sm-offset-4 col-md-4 form-group" ng-show="vm.responseMsg == 'failed' && vm.showMsg">
                                <span translate="Something wrong please try again!" class="ng-scope"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div ng-if="!vm.reqCaLoading">
    <!--Cancel requestDetail Modals-->
    <div class="modal fade custom_modal other_modal" ng-repeat="getRequest in vm.getCancelRequests track by $index" id="requestDetail{{getRequest.ID}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="container">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-body">
                        <div class="row container-fluid custom_container">
                            <div class="col-md-7">
                                <h5 class="pull-left"><label translate="CLIENT.REQUEST CONFIRMATION"></label></h5>
                            </div>
                            <div class="col-md-5">
                               <button type="button" class="close pull-right" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            </div>
                        </div>
                        <div class="row container-fluid custom_container">
                            <div class="col-md-2">
                                <h5 class="pull-left"><span class="inline" ng-repeat="detail in getRequest.orders.orders_detail |limitTo:1">
                                    {{convertToDate(detail.serve_at) | date:'dd.MM.y'}}
                                </span></h5>
                            </div>
                            <div class="col-md-2">
                               <h5> <span translate="CLIENT.ONO"></span> {{getRequest.orders.ID}}</h5>
                            </div>
                        </div>
                        <div ng-repeat="order_detail in getRequest.orders.orders_detail track by $index">
                            <div class="container-fluid row custom_container" ng-init="vm.orderStrikethrough[order_detail.ID] = (order_detail.status == 3) ? 'strikethrough' : '';" >
                                <div class="col-sm-4 request_meal">
                                    <div class="row custom_row">
                                        <div class="col-md-4">
                                            <div ng-class="vm.orderStrikethrough[order_detail.ID]" ng-if="!order_detail.side_dish || order_detail.side_dish == 0">
                                             {{convertToDate(order_detail.serve_at) | date:'HH:mm'}}
                                            </div>
                                        </div>
                                        <div class="col-md-8">
                                            <span ng-class="vm.orderStrikethrough[order_detail.ID]" class="pull-left"> {{order_detail.x_number}}x {{order_detail.request_menu.name}} </span>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-4 confirm_meal">
                                    <div class="row custom_row">
                                        <div class="col-md-4">
                                            <div ng-class="vm.orderStrikethrough[order_detail.ID]">
                                                <span ng-class="vm.orderStrikethrough[order_detail.ID]" ng-if="!order_detail.side_dish || order_detail.side_dish == 0">
                                                 {{convertToDate(order_detail.serve_at) | date:'HH:mm'}}
                                                </span>
                                            </div>
                                        </div>
                                        <div class="col-md-8">
                                            <div ng-class="vm.orderStrikethrough[order_detail.ID]">
                                                <span ng-class="vm.orderStrikethrough[order_detail.ID]" ng-if="order_detail.request_menu.confirmed_name">{{order_detail.x_number}}x  {{order_detail.request_menu.confirmed_name}}</span> <span ng-if="!order_detail.request_menu.confirmed_name">{{order_detail.x_number}}x  {{order_detail.request_menu.name}}</span> 
                                            </div> 
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-4 action_sec">
                                    <div class="row custom_row">
                                        <div ng-class="vm.orderStrikethrough[order_detail.ID]" class="col-md-6">
                                            {{order_detail.x_number}}x  {{order_detail.price}}  {{order_detail.currency}}
                                        </div>                                
                                        <div class="col-md-3">
                                            <button 
                                            ng-if="( order_detail.request_param 
                                            && (order_detail.request_param.request_min_servings != 0 
                                            && order_detail.request_param.request_deadline != '0000-00-00 00:00:00'  
                                            && order_detail.request_param.request_from != '00:00:00'
                                            && order_detail.request_param.request_to != '00:00:00') )
                                            || (order_detail.request_menu.request_ingredient.length > 0 ) 
                                            || (order_detail.comment && order_detail.comment != '<br>') "
                                            class="btn btn-info btn-sm" 
                                            ng-click="order_detail.visible = !order_detail.visible" 
                                            translate="CLIENT.DETAILSNEW"></button>
                                            <button ng-hide="( order_detail.request_param 
                                            && (order_detail.request_param.request_min_servings != 0 
                                            && order_detail.request_param.request_deadline != '0000-00-00 00:00:00'  
                                            && order_detail.request_param.request_from != '00:00:00'
                                            && order_detail.request_param.request_to != '00:00:00') )
                                            || (order_detail.request_menu.request_ingredient.length > 0 ) 
                                            || (order_detail.comment && order_detail.comment != '<br>') "
                                            class="btn btn-info btn-sm" 
                                            translate="CLIENT.NODETAILSNEW" ng-disabled="true"></button>
                                        </div>
                                        <div class="col-md-3" ng-show="requestTab!='cancelledRequests'">
                                            <button class="btn btn-info btn-sm btn-danger">
                                                <i class="fa fa-times"></i>
                                                <span translate="CLIENT.CANCELNEW"></span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <hr>
                            <div class="more" uib-collapse="!order_detail.visible">
                                <div class="row ingredient_listing" ng-repeat="ingredient_detail in order_detail.request_menu.request_ingredient track by $index" style="margin-top: 5px;">
                                    <div ng-if="ingredient_detail.duplicate_of_ingredient">
                                        <div class="col-md-8">
                                            <div class="row">
                                                <div class="col-sm-offset-2 col-md-4">
                                                    <span class="pull-left strikethrough" ng-init="vm.unit[ingredient_detail.ID] = (ingredient_detail.unit) ? 'CLIENT.'+ingredient_detail.unit : '';"> 
                                                        {{ingredient_detail.amount}}
                                                        {{vm.unit[ingredient_detail.ID] | translate }}
                                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                        {{ingredient_detail.ingredient.name}}
                                                    </span>
                                                </div>
                                                <div class="col-sm-offset-2  col-md-4">
                                                    <span class="pull-left" ng-init="vm.dunit[ingredient_detail.duplicate_of_ingredient.ID] = 'CLIENT.'+ingredient_detail.duplicate_of_ingredient.unit;"> 
                                                        {{ingredient_detail.duplicate_of_ingredient.amount}}
                                                        {{vm.dunit[ingredient_detail.duplicate_of_ingredient.ID] | translate }}
                                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                        {{ingredient_detail.duplicate_of_ingredient.ingredient.name}}
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div ng-if="!ingredient_detail.duplicate_of_ingredient && ingredient_detail.status_confirmed == 'D'">
                                        <div class="col-md-8">
                                            <div class="row" ng-init="vm.unit[ingredient_detail.ID] = (ingredient_detail.unit) ? 'CLIENT.'+ingredient_detail.unit : '';">
                                                <div class="col-sm-offset-2 col-md-4">
                                                    <span class="pull-left strikethrough"> 
                                                        {{ingredient_detail.amount}}
                                                        {{vm.unit[ingredient_detail.ID] | translate }}
                                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                        {{ingredient_detail.ingredient.name}}
                                                    </span>
                                                </div>
                                                <div class="col-sm-offset-2  col-md-4">
                                                    <span class="pull-left strikethrough"> 
                                                        {{ingredient_detail.amount}}
                                                        {{vm.unit[ingredient_detail.ID] | translate }}
                                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                        {{ingredient_detail.ingredient.name}}
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div ng-if="(ingredient_detail.duplicate_of == 0 || ingredient_detail.duplicate_of_ingredient.duplicate_of == '') && (ingredient_detail.status_confirmed == 'C')">
                                        <div class="col-md-8">
                                            <div class="row" ng-init="vm.unit[ingredient_detail.ID] = (ingredient_detail.unit) ? 'CLIENT.'+ingredient_detail.unit : '';">
                                                <div class="col-sm-offset-2 col-md-4">
                                                    <span class="pull-left"> 
                                                        {{ingredient_detail.amount}}
                                                        {{vm.unit[ingredient_detail.ID] | translate }}
                                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                        {{ingredient_detail.ingredient.name}}
                                                    </span>
                                                </div>
                                                <div class="col-sm-offset-2  col-md-4">
                                                    <span class="pull-left"> 
                                                        {{ingredient_detail.amount}}
                                                        {{vm.unit[ingredient_detail.ID] | translate }}
                                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                        {{ingredient_detail.ingredient.name}}
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row custom_container meal_comment_sec">
                                    <div class="col-md-4">
                                        <div class="row" ng-show="order_detail.comment && order_detail.comment != '<br>'">
                                            <div class="col-md-12">
                                                <label translate="CLIENT.DESCRIPTION"></label>
                                                <div ng-if="mySplit(order_detail.comment,0)!==undefined && mySplit(order_detail.comment,1)!==undefined">
                                                    {{mySplit(order_detail.comment,1)}}
                                                </div>
                                                <div ng-if="mySplit(order_detail.comment,0)!==undefined && mySplit(order_detail.comment,1)==undefined">
                                                    {{mySplit(order_detail.comment,0)}}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-5">
                                        <div class="form-group" ng-show="order_detail.comment && order_detail.comment != '<br>'">
                                            <label translate="CLIENT.DESCRIPTION"></label><br>
                                            <div ng-if="mySplit(order_detail.comment,0)!==undefined && mySplit(order_detail.comment,1)!==undefined">
                                                <div class="description_box" ng-if="mySplit(order_detail.comment,0)" ng-show="order_detail.comment">
                                                    {{mySplit(order_detail.comment,0)}}
                                                </div>
                                            </div>
                                        </div>
                                        <div ng-if="!order_detail.side_dish || order_detail.side_dish == 0" ng-show="order_detail.request_param && order_detail.request_param.request_min_servings != 0 && order_detail.request_param.request_deadline != '0000-00-00 00:00:00' && order_detail.request_param.request_from != '00:00:00' && order_detail.request_param.request_to != '00:00:00'">
                                            <div class="row form-group minimumserving" ng-show="order_detail.request_param">
                                                <div class="col-md-7">
                                                    <span translate="CLIENT.MINIMUM SERVINGS"></span>
                                                </div>
                                                <div class="col-md-5">
                                                    {{order_detail.request_param.request_min_servings}} (<span translate="CLIENT.MAX"></span>.  {{order_detail.request_param.request_max_servings}} )
                                                </div> 
                                            </div>
                                            <div class="row dealine" ng-show="order_detail.request_param">
                                                <div class="col-md-7">
                                                    <span translate="CLIENT.DEADLINE"></span>
                                                </div>
                                                <div class="col-md-5">
                                                    <label>{{convertToDate(order_detail.request_param.request_deadline) | date:'dd.MM. HH:mm'}}</label>
                                                </div> 
                                            </div>
                                            <div class="row serve_at_time" ng-show="order_detail.request_param">
                                                <div class="col-md-7">
                                                    <label translate="CLIENT.SERVED"></label>
                                                </div>
                                                <div class="col-md-5">
                                                    <label>{{convertToTime(order_detail.request_param.request_from) | date:'HH:mm'}}  - {{convertToTime(order_detail.request_param.request_to) | date:'HH:mm'}}</label>
                                                </div> 
                                            </div>
                                            <div class="row free_serving" ng-show="order_detail.request_param">
                                                <div class="col-md-12 request_free_every" ng-if="order_detail.request_param.request_free_every > 0">
                                                    <span translate="CLIENT.ONE FREE SERVING"></span>
                                                    {{ order_detail.request_param.request_free_every}}
                                                    <span translate="CLIENT.SERVINGS"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row container-fluid custom_container">
                            <div ng-if="getRequest.orders.comment != '' && getRequest.orders.comment != '<br>' " >
                                <div class="col-md-4  request_meal comment_sec">
                                    <label class="control-label" translate="CLIENT.MESSAGE" ng-show="getRequest.orders.comment"></label>
                                    <div ng-if="messageSplit(getRequest.orders.comment,0)!==undefined">
                                        {{messageSplit(getRequest.orders.comment,0)}}
                                    </div>
                                </div>
                                <div class="col-md-4 confirm_meal comment_sec">
                                    <label class="control-label" translate="CLIENT.MESSAGE" ng-show="getRequest.orders.comment"></label>
                                    <div ng-if="messageSplit(getRequest.orders.comment,1)!==undefined">
                                        <div class="" >
                                            {{messageSplit(getRequest.orders.comment,1)}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-8" ng-if="(getRequest.orders.comment == '' || getRequest.orders.comment == '<br>') "></div>

                            <div class="col-md-3 action_sec">
                                <div class="inline pull-right v-center">
                                   <button type="button" class="btn btn-lg btn-default" data-dismiss="modal" aria-label="Close" translate="CLIENT.CLOSE">
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
