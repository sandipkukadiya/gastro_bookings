<div class="container min-height-500">
    <div class="row">
        <div class="col-md-12">
            <h3 translate="PROFILE.MY DASHBOARD"></h3>
        </div>
        <div class="col-md-3">
            <ul class="nav nav-pills nav-stacked">
                <li ng-click="vm.getQuiz()" ng-class="{active: vm.currentTab != 'booking'}"><a data-toggle="pill" target="_self" ng-href="#quiz" translate="CLIENT.QUIZ"></a></li>
                <li ng-click="vm.getbBookings()" ng-class="{active: vm.currentTab == 'booking'}"><a data-toggle="pill" target="_self" ng-href="#booking" translate="CLIENT.BOOKING HISTORY"></a></li>
                <li ng-click="active = 1" id="requestSection">
                    <a data-toggle="pill" target="_self" ng-href="#requestsList">
                        <span translate="CLIENT.Requests"></span>
                        <span ng-if="!vm.reqCountLoading && vm.new_unread + vm.confirm_unread + vm.cancel_unread > 0"> ({{ vm.new_unread + vm.confirm_unread + vm.cancel_unread }})</span>
                    </a>
                </li>
                <li ng-click="vm.getSentFriendRequests()"><a data-toggle="pill" target="_self" ng-href="#friends" translate="CLIENT.INVITE FRIENDS"></a></li>
                <li ng-click="vm.getFriendCircle()"><a data-toggle="pill" target="_self" ng-href="#amigos" translate="CLIENT.MEMBERS"></a></li>
                <li ng-click="vm.getOtherCircles()"><a data-toggle="pill" target="_self" ng-href="#member">{{ vm.IamMember | translate }}  {{friendRequestsCount}}</a></li>
                <li ng-click="vm.getOrders()"><a data-toggle="pill" target="_self" ng-href="#home" translate="CLIENT.REWARDS"></a></li>
                <li ng-click="vm.changeCurrentPage();vm.getAllpatronage(); "><a data-toggle="pill" target="_self" ng-href="#patronage" translate="CLIENT.PATRONAGE"></a></li>
                <li ng-click="vm.resize()"><a data-toggle="pill" target="_self" ng-href="#myDetails" translate="CLIENT.MY DETAILS"></a></li>
            </ul>
        </div>
        <div class="col-md-9">
            <div class="tab-content">
                <div id="home" class="tab-pane fade">
                    <div class="col-md-12" ng-if="vm.loading">
                        <div class="col-md-12 text-center v-center-lg">
                            <img src="assets/images/loading.gif" alt="loading">
                        </div>
                    </div>
                    <div ng-if="!vm.loading">
                        <div class="col-md-12">
                            <h3 class="margin-top-0">{{vm.Remunerations | translate }}</h3>
                            <div class="col-md-10">
                                <div class="col-md-3 home_lable_1 dash_label">{{vm.Your | translate }} : {{vm.client_commission}}{{vm.currency_short}}</div>
                                <div class="col-md-1 home_label_operater dash_label">+</div>
                                <div class="col-md-3 home_lable_2 dash_label">{{vm.Members | translate }} : {{vm.member_commission}}{{vm.currency_short}}</div>
                                <div class="col-md-1 home_label_operater dash_label">=</div>
                                <div class="col-md-4 home_lable_3 dash_label">{{vm.Total | translate }} : {{vm.commission}}{{vm.currency_short}}</div>
                            </div>
                            <div class="col-md-2">
                                <button class="home_btn" ng-click="vm.getPaied()">{{vm.Getpaid | translate }}</button>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <h3 class="margin-top-10">{{vm.Bookings | translate }}</h3>
                            <div class="col-md-10">
                                <div class="col-md-3 home_lable_1 dash_label">{{vm.Your | translate }} : {{vm.client_book}}{{vm.currency_short}}</div>
                                <div class="col-md-1 home_label_operater dash_label">+</div>
                                <div class="col-md-3 home_lable_2 dash_label">{{vm.Members | translate }} : {{vm.member_book}}{{vm.currency_short}}</div>
                                <div class="col-md-1 home_label_operater dash_label">=</div>
                                <div class="col-md-4 home_lable_3 dash_label">{{vm.Total | translate }} : {{vm.total_book}}{{vm.currency_short}}</div>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <h3 class="margin-top-10">{{vm.Spendings | translate }}</h3>
                            <div class="col-md-10">
                                <div class="col-md-3 home_lable_1 dash_label">{{vm.Your | translate }} : {{vm.client_spending}}{{vm.currency_short}}</div>
                                <div class="col-md-1 home_label_operater dash_label">+</div>
                                <div class="col-md-3 home_lable_2 dash_label">{{vm.Members | translate }} : {{vm.member_spending}}{{vm.currency_short}}</div>
                                <div class="col-md-1 home_label_operater dash_label">=</div>
                                <div class="col-md-4 home_lable_3 dash_label">{{vm.Total | translate }} : {{vm.total_spending}}{{vm.currency_short}}</div>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <h3 class="margin-top-10">{{vm.Billing | translate }}</h3>
                            <div class="col-md-12" ng-if="vm.status==false">
                                <div class="col-md-2">{{vm.Unpaid | translate}}</div>
                                <div class="col-md-2 home_lable_2 dash_label">{{vm.getPaied_price}} {{vm.currency_short}}</div>
                                <br><br>
                            </div>
                            <div ng-repeat="order_payment in vm.order_payment">
                                <div class="col-md-12" ng-if="order_payment.pay_date==null">
                                    <div class="col-md-2 line">{{vm.Unpaid | translate}}</div>
                                    <div class="col-md-2 line center">{{order_payment.own_remuneration}} {{vm.currency_short}}</div>
                                </div>
                                <br>
                                <div class="col-md-12" ng-if="order_payment.pay_date!=null">
                                    <div class="col-md-2 dash_label line">{{order_payment.pay_date}}</div>
                                    <div class="col-md-2 dash_label line center">{{order_payment.own_remuneration}} {{vm.currency_short}}</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <h3 class="margin-top-10">{{vm.Total | translate }}</h3>
                            <div class="col-md-10">
                                <div class="col-md-3 home_lable_1 dash_label">{{vm.Your | translate }} : {{vm.client}}{{vm.currency_short}}</div>
                                <div class="col-md-1 home_label_operater dash_label">+</div>
                                <div class="col-md-3 home_lable_2 dash_label">{{vm.Members | translate }} : {{vm.member}}{{vm.currency_short}}</div>
                                <div class="col-md-1 home_label_operater dash_label">=</div>
                                <div class="col-md-4 home_lable_3 dash_label">{{vm.Total | translate }} : {{vm.total}}{{vm.currency_short}}</div>
                            </div>
                            <br><br><br><br><br>
                        </div>
                    </div>
                </div>
                <div id="friends" class="tab-pane fade">
                    <div class="col-md-12">
                        <h2 class="margin-top-0" translate="CLIENT.CON WITH FRIENDS ON GASTRO"></h2>
                        <hr>
                        <div class="alert alert-success fade in" ng-show = "vm.connectSuccess != ''" ng-class="{fade:vm.doFade}">
                            <a href="" class="close" ng-click="vm.closeAlert()" aria-label="close">&times;</a>
                            <strong translate="CLIENT.SUCCESS"></strong> {{ vm.connectSuccess | translate }}
                        </div>
                    </div>
                    <div class="col-md-8">
                        <tags-input ng-model="vm.friends" add-on-paste="true" key-property="id" display-property="name" add-from-autocomplete-only="true"
                                    placeholder="{{ vm.placeholder | translate }}">
                            <auto-complete
                                    source="vm.getFriends($query)"
                                    min-length="0"
                                    load-on-empty="true"
                                    template="friends-template"
                            ></auto-complete>
                        </tags-input>
                    </div>
                    <script type="text/ng-template" id="friends-template">
                        <div class="zero-padding-margin">
                            <span class="zero-padding-margin">{{data.name}}</span>
                            <span class="display-block cl-gray">{{data.email}}</span>
                        </div>
                    </script>
                    <div class="col-md-12">
                        <div class="form-group">
                            <input type="button" class="btn btn-success" id="exampleInputEmail1" value="{{ 'CLIENT.CONNECT' | translate }}" ng-click="vm.addFriends(vm.friends.length)">
                        </div>
                    </div>
                    <div class="col-md-12">
                        <h2 translate="CLIENT.SENT REQUESTS"></h2>
                        <hr>
                    </div>
                    <div id="friendRequestsList" class="col-md-12">
                        <div class="friend row" ng-repeat="friend in vm.sentFriendRequests track by $index">
                            <div class="col-md-1">
                                <img src="assets/images/gastro/avatar.png" alt="Avatar" class="img-responsive">
                            </div>
                            <div class="col-md-9 friend-name">
                                <h4 class="cl-brown">{{friend.name}}</h4>
                            </div>
                            <div class="col-md-2">
                                <h4><label class="label bg-orange">{{friend.connections}} <span translate="CLIENT.CONNECTIONS"></span></label></h4>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="member" class="tab-pane fade">
                    <div class="col-md-12">
                        <h2 class="margin-top-0" translate="CLIENT.FRIEND REQUESTS"></h2>
                        <p translate="CLIENT.THE FF FRIENDS"></p>
                        <div class="alert alert-success fade in" ng-show = "vm.respondToFriendRequestStatus != ''" ng-class="{fade:vm.doFade}">
                            <a href="" class="close" ng-click="vm.closeAlert()" aria-label="close">&times;</a>
                            <strong translate="CLIENT.SUCCESS"></strong> {{ vm.respondToFriendRequestStatus | translate }}
                        </div>
                    </div>
                    <div ng-show="vm.loadingFriendRequests" >
                        <div class="col-md-12 text-center v-center-lg">
                            <img src="assets/images/loading.gif" alt="loading">
                        </div>
                    </div>
                    <div class="col-md-12" id="friendrRequestList" ng-show="!vm.loadingFriendRequests">
                        <div class="friend row" ng-repeat="friend in vm.friendRequests track by $index">
                            <div class="col-md-1">
                                <img src="assets/images/gastro/avatar.png" alt="Avatar" class="img-responsive">
                            </div>
                            <div class="col-md-7 friend-name">
                                <h4 class="cl-brown">{{friend.name}}</h4>
                            </div>

                            <div class="col-md-5 pull-right">
                                <div class="btn-group" role="group" aria-label="...">
                                    <button type="button" class="btn btn-default" ng-click="vm.respondToFriendRequest('Y',friend.id)" translate="CLIENT.ACCEPT"></button>
                                    <button type="button" class="btn bg-orange" ng-click="vm.respondToFriendRequest('D',friend.id)" translate="CLIENT.DECLINE"></button>
                                    <button type="button" class="btn btn-danger" ng-click="vm.respondToFriendRequest('N',friend.id)" translate="CLIENT.BLOCK"></button>
                                </div>
                            </div>
                        </div>
                        <br/><br/>
                        <br/><br/>
                    </div>
                    <div class="col-md-12">
                        <h2 class="margin-top-0" translate="CLIENT.I AM A MEMBER"></h2>
                        <hr>
                    </div>
                    <div class="col-md-12">
                        <div class="friend row" ng-repeat="friend in vm.otherCircles track by $index">
                            <div class="col-md-1">
                                <img src="assets/images/gastro/avatar.png" alt="Avatar" class="img-responsive">
                            </div>
                            <div class="col-md-7 friend-name">
                                <h4 class="cl-brown">{{friend.name}}</h4>
                            </div>
                            <div class="col-md-2">
                                <h4><label class="label bg-orange">{{friend.connections}} <span translate="CLIENT.CONNECTIONS"></span></label></h4>
                            </div>
                            <div class="col-md-2">
                                <button class="btn bg-brown" ng-click="vm.respond('Del', friend.ID_grouped_client)">{{"CLIENT.LEAVE" | translate}}</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="amigos" class="tab-pane fade">
                    <div class="col-md-12">
                        <h2 class="margin-top-0" translate="CLIENT.MEMBERS"></h2>
                        <hr>
                    </div>
                    <div class="col-md-12" ng-if="vm.loading">
                        <div class="col-md-12 text-center v-center-lg">
                            <img src="assets/images/loading.gif" alt="loading">
                        </div>
                    </div>
                    <div id="friendsList" class="col-md-12" ng-if="!vm.loading">
                        <div class="friend row align" ng-repeat="friend in vm.friendCircle track by $index">
                            <div class="col-md-1">
                                <img src="assets/images/gastro/avatar.png" alt="Avatar" class="img-responsive">
                            </div>
                            <div class="col-md-2 wrap">
                                <h4 class="cl-brown">{{friend.name}}</h4>
                            </div>
                            <div class="col-md-6">
                                <div class="col-md-12" ng-if="friend.flag == 1">
                                    <div class="col-md-4 member_value">
                                        <span><i class="fa fa-check green" aria-hidden="true"></i>{{friend.spending}}Kč</span>
                                    </div>
                                    <div class="col-md-5 member_value">
                                        <span><i class="fa fa-star yellow" aria-hidden="true"></i>{{friend.book}}Kč</span>
                                    </div>
                                    <div class="col-md-3 member_value">
                                        <span><i class="fa fa-usd blue" aria-hidden="true"></i>{{friend.commission}}Kč</span>
                                    </div>
                                </div>
                                <div class="col-md-12" ng-if="friend.flag != 1">
                                    <div class="col-md-1">
                                    </div>
                                    <div class="col-md-9 str">
                                        <span>{{friend.precedings}} {{vm.ConnectionString | translate}}</span>
                                    </div>
                                    <div class="col-md-1">
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <h4><label class="label bg-orange">{{friend.connections}} <span translate="CLIENT.CONNECTIONS"></span></label></h4>
                            </div>
                            <div class="col-md-1">
                                <button class="btn bg-brown" ng-click="vm.respond('Del', friend.ID_grouped_client)">{{'CLIENT.DISCARD' | translate}}</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="booking" class="tab-pane fade" ng-class="{'in active': vm.currentTab == 'booking'}">
                    <div class="booking-history">
                        <div class="col-md-12" ng-if="vm.loading">
                            <div class="col-md-12 text-center v-center-lg">
                                <img src="assets/images/loading.gif" alt="loading">
                            </div>
                        </div>
                        <div class="col-md-12" ng-if="!vm.loading && !vm.isOrderEmpty">
                                <ul class="list-group" >
                                    <div dir-paginate="order in vm.orders | itemsPerPage: vm.itemsPerPage"
                                         total-items="vm.totalItems" current-page="vm.currentPage" ng-if="order.status != 6">
                                        <li class="list-group-item" >
                                            <div class="pull-right btn-group btn-group-sm">
                                                <button class="btn btn-warning btn-sm" title="{{'CLIENT.CANCEL ORDER' | translate}}? {{'CLIENT.CONTACT' | translate}} {{order.restaurant_phone}}" translate="RESTAURANT_DETAIL.CANCEL"
                                                        ng-if="order.status == 0 && order.cancellation['status']== 'error'" ng-click="vm.changeOrderStatus(3, order)" ng-disabled="true"
                                                        ></button>
                                                <button class="btn btn-warning btn-sm" title="{{'CLIENT.CANCEL ORDER' | translate}}" translate="RESTAURANT_DETAIL.CANCEL"
                                                        ng-if="order.status == 0 && order.cancellation['status'] == 'success'" ng-click="vm.changeOrderStatus(3, order)"
                                                ></button>
                                                <button class="btn btn-danger btn-sm" title="{{'CLIENT.DELETE PERM' | translate}}" translate="CLIENT.DELETE"
                                                        ng-if="order.status == 5" ng-click="vm.changeOrderStatus(6, order)"></button>
                                                <button class="btn btn-info btn-sm" title="{{'CLIENT.DETAILS' | translate}}" translate="CLIENT.DETAILS"
                                                         data-toggle="modal" data-target="#orderDetail{{$index}}"></button>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-8">
                                                    <h4>
                                                        <span class="inline" ng-if="order.cancellation['serve_at'] == 'Invalid Date'"> --- </span>
                                                        <span class="inline" ng-if="order.cancellation['serve_at'] != 'Invalid Date'">{{order.cancellation['serve_at'] | date:'d.M.yyyy h:mm' }} -</span>
                                                        <a class="" href="" ui-sref="main.restaurant_detail({restaurantId: order.ID_restaurant})">  {{ order.restaurant_name }}  </a>
                                                    </h4>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div>
                                                        <span class="inline cl-gray" translate="CLIENT.PERSONS"></span>:
                                                        <i class="inline">{{order.persons}}</i>
                                                    </div>
                                                    <div>
                                                        <span class="inline cl-gray" translate="CLIENT.TOTAL ITEMS"></span>:
                                                        <i class="inline">{{order.total_order_details_by_status}}</i>
                                                    </div>
                                                    <div>
                                                        <span class="inline cl-gray" translate="CLIENT.TOTAL PRICE"></span>:
                                                        <i class="inline">{{order.total_price}}</i>
                                                    </div>

                                                </div>
                                                <div class="col-md-6">
                                                    <div><span class="inline cl-gray" translate="CLIENT.STATUS"></span>:
                                                        <i class="inline">{{vm.statusNames[order.status] | translate}}</i></div>
                                                    <div>
                                                        <span class="inline cl-gray" translate="CLIENT.ORDERED AT"></span>:
                                                        <i class="inline">{{order.created_at | date:'d.M.yyyy h:mm'}}</i>
                                                    </div>
                                                    <div><span class="inline cl-gray" translate="CLIENT.ORDER NUMBER"></span>:
                                                        <i class="inline">{{order.order_number}}</i>
                                                    </div>
                                                </div>
                                            </div>

                                            <div ng-if="order.comment">
                                                <hr>
                                                <div>
                                                    <span class="cl-gray" translate="CLIENT.ORDER COMMENT"></span>:
                                                    <i class="inline" ng-text-truncate="order.comment"
                                                    ng-tt-chars-threshold="5"></i>
                                                </div>
                                            </div>

                                        </li>
                                    </div>

                                    <li class="pagination pagination-separated pagination-rounded text-center">
                                        <dir-pagination-controls on-page-change="vm.getbBookings()"></dir-pagination-controls>
                                    </li>
                                </ul>


                        </div>
                        <div class="empty-orders col-md-12" ng-if="vm.isOrderEmpty && !vm.loading">
                            <div class="error cl-brown">
                                <strong translate="CLIENT.NO ORDERS"></strong>
                                <a href="" ui-sref="main.search" translate="CLIENT.ORDER MEALS"></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="quiz" class="tab-pane fade" ng-class="{'in active': vm.currentTab != 'booking'}">
                    <div class="col-md-12">

                        <h2 translate="CLIENT.QUIZ_HEADER" class="margin-top-0"></h2>
                        <br>

                        <div class="radio">
                            <h4><label><input type="radio" name="quiz" ng-model="vm.isDayOrBonusTest" ng-value="true" ng-disabled="!vm.isCanDayquestion"><span translate="CLIENT.DAY QUESTION"></span><span> ( {{vm.strDayQuestion | translate}} {{vm.remainHours}} {{vm.strDayQuestion2 | translate}} {{vm.nextTime}} )</span></label></h4>
                        </div>
                        <div class="radio">
                            <h4><label><input type="radio" name="quiz" ng-model="vm.isDayOrBonusTest" ng-value="false" ng-disabled="!vm.isCanBonuseQuestion"><span translate="CLIENT.BONUS QUESTION"></span><span> ( {{getBonusQuizCount()}} {{vm.strBonusQuestion | translate}} )</span></label></h4>
                        </div><br>

                        <div class="col-md-12">
                            <button id="start_quiz_btn" class="btn bg-green btn-lg" data-toggle="modal" translate="CLIENT.START QUIZ" ng-click="vm.startQuiz()"></button>
                            <button ng-show="!vm.isNextStep" id="make_order_btn" class="btn bg-green btn-lg" data-toggle="modal" translate="CLIENT.START ORDER" ng-click="vm.redirect('home')"></button>
                            <hr>
                        </div>

                        <h2 translate="CLIENT.SUMMARY"></h2>

                        <table class="summary table borderless">
                            <tbody>
                              <tr>
                                <td><span translate="CLIENT.RIGHT ANSWERS"></span></td>
                                <td><span>{{vm.quizClient.right_answers}}</span></td>
                              </tr>
                              <tr>
                                <td><span translate="CLIENT.WRONG ANSWERS"></span></td>
                                <td><span>{{vm.quizClient.wrong_answers}}</span></td>
                              </tr>
                              <tr>
                                <td><span translate="CLIENT.UNANSWERED"></span></td>
                                <td><span>{{vm.quizClient.unanswered_answers}}</span></td>
                              </tr>
                              <tr>
                                <td><span translate="CLIENT.TOTAL QUESTIONS"></span></td>
                                <td><span>{{vm.quizClient.total_questions}}</span></td>
                              </tr>
                              <tr>
                                <td><span translate="CLIENT.PERCENTAGE DISCOUNT"></span></td>
                                <td><span>{{vm.getSumPrize().percentage_discount}} %</span></td>
                              </tr>
                            </tbody>
                        </table><br>

                        <h2 translate="CLIENT.PRIZE USAGE"></h2>

                        <table class="table table-bordered">
                            <thead>
                              <tr>
                                <th translate="CLIENT.DATE"></th>
                                <th>%</th>
                                <th translate="CLIENT.DISCOUNT"></th>
                              </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="x in vm.quiz_prize">
                                    <td>{{x.serve_at}}</td>
                                    <td>{{x.percentage}} %</td>
                                    <td>{{x.prize}} {{vm.currency}}</span></td>
                                </tr>
                                <tr>
                                  <td translate="CLIENT.TOTAL DISCOUNT:"></td>
                                  <td >{{vm.getSumPrize().total_percentage_discount}} %</span></td>
                                  <td>{{vm.getSumPrize().total_discount}} {{vm.currency}}</span></td>
                                </tr>
                            </tbody>
                        </table>

                        <table class="summary table borderless">
                            <tbody>
                              <tr>
                                <td><span translate="CLIENT.YOUR ORDERS VOLUME:"></span></td>
                                <td><span> {{vm.sum_price.sum_price_for_bonus}}{{vm.currency}}</span></td>
                              </tr>
                              <tr>
                                  <td><span translate="CLIENT.OBLIGATORY ORDERS VOLUME:"></span></td>
                                  <td><span> {{vm.sum_price.sum_price_obligatory}}{{vm.currency}}</span></td>
                              </tr>
                              <tr>
                                <td><span translate="CLIENT.BONUS QUESTIONS FROM ORDERS:"></span></td>
                                <td><span> {{vm.sum_price.total_bonus_quiz_count}}</span></td>
                              </tr>
                            </tbody>
                        </table><br>

                        <h2 translate="CLIENT.QUIZ CONDITIONS:"></h2>

                        <table class="summary table borderless">
                            <tbody>
                              <tr>
                                <td><span translate="CLIENT.MIN.INTERVAL BETWEEN DAY QUESTIONS"></span></td>
                                <td><span>{{vm.quizSetting.quiz_delay_hrs}} </span><span translate="CLIENT.HOURS"></span></td>
                              </tr>
                              <tr>
                                <td><span translate="CLIENT.TIME FOR ANSWER"></span></td>
                                <td><span>{{vm.quizSetting.quiz_answer_sec}} </span><span translate="CLIENT.SECONDS"></span></td>
                              </tr>
                              <tr>
                                <td><span translate="CLIENT.MAX.PRIZE AVAILABLE"></span></td>
                                <td><span>{{vm.quizSetting.quiz_prize}} {{vm.currency}}</span></td>
                              </tr>
                              <tr>
                                <td><span translate="CLIENT.ONT BONUS QUESTION PER EACH AMOUNT SPENT"></span></td>
                                <td><span>{{vm.quizSetting.quiz_bonus_order}} {{vm.currency}}</span></td>
                              </tr>
                              <tr>
                                <td><span translate="CLIENT.MAX DAYS BACK OF ORDER FOR BONUS QUESTION CLAIM"></span></td>
                                <td><span>{{vm.quizSetting.quiz_bonus_expire}} days</span></td>
                              </tr>
                              <tr>
                                <td><span translate="CLIENT.OBLIGATORY ORDERS EACH PERCENTAGE STEP"></span></td>
                                <td><span>{{vm.quizSetting.quiz_order_percent}} %</span></td>
                              </tr>
                              <tr>
                                <td><span translate="CLIENT.MIN.VALUE OF OBLIGATORY ORDER"></span></td>
                                <td><span>{{vm.quizSetting.quiz_min_order}} {{vm.currency}}</span></td>
                              </tr>
                            </tbody>
                        </table><br>

                        <h2 translate="CLIENT.QUIZ FAQ:"></h2><br>

                        <p translate="CLIENT.WHO CAN TAKE PART?"></p>
                        <p translate="CLIENT.WHO CAN TAKE PART? ANS"></p>
                        <p translate="CLIENT.HOW TO RESPOND TO QUESTIONS?"></p>
                        <p translate="CLIENT.HOW TO RESPOND TO QUESTIONS? ANS"></p>
                        <p translate="CLIENT.WHAT IS THE PRIZE?"></p>
                        <p translate="CLIENT.WHAT IS THE PRIZE? ANS"></p>
                        <p translate="CLIENT.HOW TO CLAIM THE PRIZE?"></p>
                        <p translate="CLIENT.HOW TO CLAIM THE PRIZE? ANS"></p>
                        <br>

                        <h2 translate="CLIENT.QUIZ RULES: 3 PARAGRAPHS"></h2><br>

                        <p>(1)</p>
                        <p translate="CLIENT.(1) CONTENT"></p>
                        <p>(2)</p>
                        <p translate="CLIENT.(2) CONTENT"></p>
                        <p>(3)</p>
                        <p translate="CLIENT.(3) CONTENT"></p>
                        <br><br><br>

                    </div>
                </div>
                
                <div id="myDetails" class="tab-pane fade">
                    <div class="alert alert-success fade in" ng-show = "vm.myDetailsSuccess && !vm.loading">
                        <a href="" class="close" ng-click="vm.closeAlert('success')" aria-label="close">&times;</a>
                        <strong translate="CLIENT.SUCCESS"></strong> <span translate="{{ vm.myDetailsSuccess }}"></span>
                    </div>
                    <div class="alert alert-danger fade in" ng-show = "vm.myDetailsError && !vm.loading">
                        <a href="" class="close" ng-click="vm.closeAlert('error')" aria-label="close">&times;</a>
                        <strong translate="CLIENT.ERROR"> </strong> <span translate="{{ vm.myDetailsError }}"></span>
                    </div>
                    <form name="myDetailsForm" novalidate>
                        <!-- Address -->
                        <div class="form-group col-md-12" ng-class="{ 'has-error': (myDetailsForm.address.$touched || myDetailsForm.$submitted) && myDetailsForm.address.$invalid }">
                            <label class="control-label" translate="CLIENT.ADDRESS"></label>
                            <input ng-required="true" name="address" ng-model="vm.myDetails.address" class="form-control">
                            <div class="form_error" ng-messages="myDetailsForm.address.$error"
                                ng-if="myDetailsForm.address.$touched || myDetailsForm.$submitted"
                                role="alert">
                                <p ng-message="required" translate="CLIENT.EMPTY ADDRESS"></p>
                            </div>
                        </div>
                        <!-- Location -->
                        <div class="col-md-12">
                            <div ng-show="vm.location_error" class="alert alert-danger fade in">
                                <a href="" class="close" ng-click="vm.closeAlert('restaurant')" aria-label="close">&times;</a>
                                {{ 'RESTAURANT_DETAIL.LOCATION ERROR' | translate }}
                            </div>
                        </div>
                        <div class="form-group col-md-12" ng-class="{ 'has-error': (myDetailsForm.address_input.$touched || myDetailsForm.$submitted) && myDetailsForm.address_input.$invalid }">
                            <label class="control-label" translate="RESTAURANT.LOCATION"></label >
                            <input required name="address_input" id="address_input" type="text" class="form-control" ng-model="vm.myDetails.location">
                            <div class="form_error" ng-messages="myDetailsForm.address_input.$error"
                                 ng-if="myDetailsForm.address_input.$touched || myDetailsForm.$submitted"
                                 role="alert">
                                <p ng-message="required" translate="RESTAURANT.EMPTY LOCATION"></p>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div id="map_holder"></div>
                        </div>
                        <!-- Phone -->
                        <div class="form-group col-md-12" ng-class="{ 'has-error': (myDetailsForm.phone.$touched || myDetailsForm.$submitted) && myDetailsForm.phone.$invalid}">
                            <label class="control-label" translate="CLIENT.PHONE"></label>
                            <input ng-required="true" name="phone" ng-model="vm.myDetails.phone" class="form-control">
                            <div class="form_error" ng-messages="myDetailsForm.phone.$error"
                                ng-if="myDetailsForm.phone.$touched || myDetaisForm.$submitted"
                                role="alert">
                                <p ng-message="required" translate="CLIENT.EMPTY PHONE"></p>
                            </div>
                        </div>
                        <!--  Account Number -->
                        <div class="form-group col-md-6" ng-class="{ 'has-error': (myDetailsForm.accountNumber.$touched || myDetailsForm.$submitted) && myDetailsForm.accountNumber.$invalid}">
                            <label class="control-label" translate="CLIENT.ACCOUNT NUMBER"></label>
                            <input name="accountNumber" ng-model="vm.myDetails.account_number" class="form-control">
                            <div class="form_error" ng-messages="myDetailsForm.accountNumber.$error" ng-if="myDetailsForm.accountNumber.$touched || myDetaisForm.$submitted" role="alert">
                            </div>
                        </div>
                        <!-- Bank Code -->
                        <div class="form-group col-md-6" ng-class="{ 'has-error': (myDetailsForm.bankCode.$touched || myDetailsForm.$submitted) && myDetailsForm.bankCode.$invalid}">
                            <label class="control-label" translate="CLIENT.BANK CODE"></label>
                            <input name="bankCode" ng-model="vm.myDetails.bank_code" class="form-control">
                            <div class="form_error" ng-messages="myDetailsForm.bankCode.$error" ng-if="myDetailsForm.bankCode.$touched || myDetaisForm.$submitted" role="alert">
                            </div>
                        </div>
                        <!-- Diets -->  
                        <div class="form-group col-md-12" ng-class="{ 'has-error': (myDetailsForm.diet.$touched || myDetailsForm.$submitted) && myDetailsForm.diet.$invalid }">
                            <div class="display-block">
                                <label class="control-label" translate="CLIENT.SELECT DIET"></label>
                                <div ng-repeat="diet in vm.diets[vm.myDetails.lang]">
                                    <div class="radio col-md-4">
                                        <label>
                                            <input ng-required="false" type="radio" name="diet" ng-model="vm.myDetails.ID_diet" ng-value="{{ diet.id }}">
                                            <span>{{ diet.name }}</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div class="form_error col-md-12" ng-messages="myDetailsForm.diet.$error"
                                ng-if="myDetailsForm.diet.$touched || myDetailsForm.$submitted"
                                role="alert">
                                <p ng-message="required" translate="CLIENT.EMPTY DIET"></p>
                            </div>
                        </div>
                        <!-- Language -->
                        <div class="form-group col-md-12" ng-class="{ 'has-error': (myDetailsForm.language.$touched || myDetailsForm.$submitted) && myDetailsForm.language.$invalid}">
                            <label class="control-label" translate="CLIENT.LANGUAGE"></label>
                            <select ng-required="true" class="form-control" name="language" ng-model="vm.myDetails.lang" ng-change="vm.updateNoDiet()">
                                <option ng-repeat="lang in vm.language" value="{{ lang.short }}">{{ lang.language }}</option>
                            </select>
                            
                            <div class="form_error" ng-messages="myDetailsForm.language.$error"
                                ng-if="myDetailsForm.language.$touched || myDetailsForm.$submitted"
                                role="alert">
                                <p ng-message="required" translate="CLIENT.EMPTY LANGUAGE"></p>
                            </div>
                        </div> 
                        <!-- Password -->
                        <div class="form-group col-md-12" ng-class="{ 'has-error': (myDetailsForm.$submitted) && myDetails.password.$invalid }">
                            <label class="control-label" translate="REGISTRATION.PASSWORD"></label>
                            <input name="password" id="password" type="password" class="form-control" ng-model="vm.myDetails.password">
                            <div class="form_error" ng-messages="myDetailsForm.password.$error"
                                 ng-if="preregOwnerForm.password.$touched || myDetailsForm.$submitted"
                                 role="alert">
                                <p ng-message="required" translate="REGISTRATION.EMPTY PASSWORD"></p>
                            </div>
                        </div>
                        <!-- Password Confirm -->
                        <div class="form-group col-md-12" ng-class="{ 'has-error': (myDetailsForm.$submitted) && myDetailsForm.confirm_password.$invalid }">
                            <label class="control-label" translate="REGISTRATION.CONFIRM PASSWORD"></label>
                            <input name="confirm_password" pw-check="password" type="password" class="form-control" ng-model="vm.myDetails.confirm_password">
                            <div class="form_error" ng-messages="myDetailsForm.confirm_password.$error"
                                 ng-if="myDetailsForm.confirm_password.$touched || myDetailsForm.$submitted"
                                 role="alert">
                                <!--<p ng-message="required" translate="REGISTRATION.RE-ENTER PASSWORD"></p>-->
                                <p ng-message="pwmatch" translate="REGISTRATION.PASSWORDS DO NOT MATCH"></p>
                            </div>
                        </div>
                        <div class="col-md-12" >
                            <button required type="submit" ng-click="vm.saveClient(myDetailsForm.$valid)" ng-disabled="vm.loading" ng-class="{'disable-button' : vm.loading}"
                                    class="btn btn-primary pull-right">
                                <span translate="CLIENT.SAVE"></span>
                                <span ng-if="vm.loading" class="fa fa-spinner fa-spin cl-brown"></span>
                            </button>
                        </div>
                        <div class="col-md-12"><br></div>
                    </form>
                </div>
                <!-- start patronage -->
                <div id="patronage" class="tab-pane fade">
                    <div class="row">
                        <ul class="nav nav-tabs custom_tabs_ul">
                            <li class="active">
                                <a data-toggle="pill" target="_self" ng-href="#availablee" translate="PATRONAGE.AVAILABLE"></a>
                            </li>
                            <li><a data-toggle="pill" target="_self" ng-href="#Active" ng-click="vm.changeCurrentPage(); vm.getActivePatronage(); " translate="PATRONAGE.ACTIVE"></a></li>
                            <li><a data-toggle="pill" target="_self" ng-href="#History" ng-click="vm.changeCurrentPage(); vm.getHistoryPatronage(); " translate="PATRONAGE.HISTORY"></a></li>
                            <li><a data-toggle="pill" target="_self" ng-href="#Billing" ng-click="vm.changeCurrentPage(); vm.getBillingPatronage(); " translate="PATRONAGE.BILLING" ></a></li>
                        </ul>

                        <div class="tab-content">
                            <div id="availablee" class="tab-pane fade in active">
                                <p class="location_p" translate="PATRONAGE.LOCATION"></p><span class="detail_typ">
                                {{vm.clientLocation || 'PATRONAGE.PLEASE ENTER LOCATION' | translate}}</span>
                                <div class="row business_row">
                                    <div class="col-md-3">
                                        <div class="form">
                                            <div class="form-group">
                                                <label for="sel1" translate="PATRONAGE.DISTANCE"></label>
                                                <select class="form-control custom_select" id="sel1" ng-model="vm.pat_distance">
                                                    <option value="0" translate="PATRONAGE.ALL"></option>
                                                    <option value="10">10 km</option>
                                                    <option value="20">20 km</option>
                                                    <option value="30">30 km</option>
                                                    <option value="40">40 km</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form">
                                            <div class="form-group">
                                                <label for="sel1" translate="PATRONAGE.TYPE OF BUSINESS"></label>
                                                <select class="form-control custom_select" id="sel1" ng-model="vm.pat_business">
                                                    <option value="0"  translate="PATRONAGE.NONE"></option>
                                                    <option ng-repeat="(key, business) in vm.business_type" value="{{key}}">{{business}}</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form">
                                            <div class="form-group">
                                                <div class="custom_checkbox">
                                                    <input id="checkbox-1" class="checkbox-custom" name="checkbox-1" type="checkbox" value="1" ng-model="vm.pat_patron_only">
                                                    <label for="checkbox-1" class="checkbox-custom-label " translate="PATRONAGE.WITHOUT PATRON ONLY"></label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="search_btn_sec">
                                            <a href="javascript:;" class="search_btn" ng-click=" vm.changeCurrentPage(); vm.getAllpatronage();" translate="PATRONAGE.SEARCH"></a>
                                        </div>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>
                                <div class="clearfix"></div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <h3 class="search_heading" translate="PATRONAGE.SEARCH RESULTS"></h3>
                                        <div class="table-responsive">
                                            <span>{{vm.totalItem}}</span>
                                            <table class="table" >
                                                <tbody>
                                                <tr class="custom_tr bkcolor_white" dir-paginate="patronage in vm.patronages | itemsPerPage: vm.itemsPerPage " total-items="vm.totalItemsAvailable" current-page="vm.currentPage" pagination-id="getAllpatronageList">
                                                    <td width="100px">
                                                        <img ng-src="{{patronage.photo}}" width="100" class="img-responsive">
                                                    </td>
                                                    <td>
                                                        <p><a class="name_head" href="index.html#/app/restaurant/{{patronage.id}}" class="">{{patronage.name}}</a></p>
                                                        <p class="name_p_typ">{{patronage.short_descr}}</p>
                                                    </td>
                                                    <td width="180px">
                                                        <p class="name_head">{{patronage.city}}</p>
                                                        <p class="name_p_typ">{{patronage.street}}</p>
                                                    </td>
                                                    <td class="text-center" width="130px">
                                                        <p class="name_head">{{patronage.distance}} km</p>
                                                        <p class="name_p_typ">{{vm.business_type[patronage.ID_restaurant_type]}}</p>
                                                    </td>
                                                    <td class="text-center" width="70px">
                                                        <p class="name_head">{{patronage.promillage | number:0}}‰</p>
                                                        <p class="name_p_typ">{{patronage.win_booking | number:0}} {{patronage.currency}}</p>
                                                    </td>
                                                    <!-- <td>patron_minimal
                                                        {{patronage.price}}{{patronage.currency}}
                                                    </td> -->
                                                    <td class="text-center" class="activate_td" width="120px">
                                                        <button ng-show="patronage.client_status == -1" class="btn bg-green" ng-click="vm.patronActivate(patronage.id, patronage.lang);" translate="PATRONAGE.ACTIVATE"></button>
                                                        <span class="status_text" ng-if="patronage.client_status == 0" translate="PATRONAGE.DONE"></span>
                                                        <span class="status_text" ng-if="patronage.client_status == 1" translate="PATRONAGE.PATRONAGE"></span>
                                                        <!--<a href="javascript:;" class="available_head" ng-if="!patronage.status">Available</a>-->
                                                    </td>
                                                    <td width="30px">
                                                        <span class="p_status" ng-if="patronage.client_status != 1 && patronage.status == 1">P</span>
                                                    </td>
                                                </tr>

                                                <tr ng-if="vm.totalItemsAvailable == 0">
                                                    <td colspan="6">
                                                        Record not found
                                                    </td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>
                                <div class="clearfix"></div>
                                <div class="row">
                                    <div class="col-md-12 ">
                                        <div ng-if="vm.totalItemsAvailable > 0" class="text-center">
                                            <li class="pagination pagination-separated pagination-rounded text-center">
                                                <dir-pagination-controls on-page-change="vm.getAllpatronage();" pagination-id="getAllpatronageList"></dir-pagination-controls>
                                            </li>
                                        </div>
                                        <div class="help_contnt">
                                            <p class="help_typ" translate="PATRONAGE.HELP AVAILABLE"></p>
                                            <p class="help_p" translate="PATRONAGE.HELP AVAILABLE DESCRIPTION"></p>
                                        </div>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>
                            </div>
                            <div id="Active" class="tab-pane fade">
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="table-responsive">
                                            <table class="table">
                                                <thead class="custom_head">
                                                <tr>
                                                    <th width="220" translate="PATRONAGE.PERIOD"></th>
                                                    <th width="500" translate="PATRONAGE.BUSINESS"></th>
                                                    <th width="100" translate="PATRONAGE.MINIMAL BOOKING"></th>
                                                    <th width="100" translate="PATRONAGE.OVERTAKING BOOKING"></th>
                                                    <th width="100" translate="PATRONAGE.PATRONS BOOKING"></th>
                                                    <th width="100" translate="PATRONAGE.ALL YOUR BOOKING"></th>
                                                    <th width="100" translate="PATRONAGE.YOUR FINISHED BOOKING"></th>
                                                    <th width="100" translate="PATRONAGE.HIGHEST FINISHED BOOKING"></th>
                                                    <th width="100" translate="PATRONAGE.MISSING BOOKING"></th>
                                                </tr>
                                                </thead>
                                                <tbody class="custom_tbody">
                                                <tr dir-paginate="patronage in vm.activePatronages | itemsPerPage: vm.itemsPerPage " total-items="vm.totalItemsActive" current-page="vm.currentPage" pagination-id="activePatronages">
                                                    <td style="text-decoration: none; color: black;" class="text-center {{patronage.period_css}}">{{patronage.period}}</td>
                                                    <td class="{{patronage.name_css}} text-left"><a class="rest-link" href="index.html#/app/restaurant/{{patronage.ID_restaurant}}" class="">{{patronage.rest_name}}</a></td>
                                                    <td class="{{patronage.minimal_css}}">{{patronage.minimal | translate}}</td>
                                                    <td class="{{patronage.overtake_css}}">{{patronage.overtake | translate}}</td>
                                                    <td class="{{patronage.patron_booking_css}}">{{patronage.patron_finished_booking | translate}}</td>
                                                    <td class="{{patronage.all_css}} font-bold">{{patronage.client_all_booking | translate}}</td>
                                                    <td class="{{patronage.finished_css}} font-bold">{{patronage.client_finished_booking | translate}}</td>
                                                    <td class="{{patronage.highest_css}}">{{patronage.highest_finished_booking | translate}}</td>
                                                    <td class="{{patronage.missing_css}}">{{patronage.missing_booking | translate}}</td>

                                                    <td class="cross_td" ><a ng-show="patronage.client_status != 1" href="" ng-click="vm.removeActive(patronage.id)" class="cross_btn" ><i class="fa fa-times" aria-hidden="true"></i></a></td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>
                                <div class="clearfix"></div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="text-center">
                                            <ul class="pagination">
                                                <li class="pagination pagination-separated pagination-rounded text-center">
                                                    <dir-pagination-controls on-page-change="vm.getActivePatronage(newPageNumber)" pagination-id="activePatronages"></dir-pagination-controls>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="help_contnt">
                                            <p class="help_typ" translate="PATRONAGE.HELP ACTIVE"></p>
                                            <p class="help_p"  translate="PATRONAGE.HELP ACTIVE DESCRIPTION"></p>
                                        </div>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>
                            </div>
                            <div id="History" class="tab-pane fade">
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="table-responsive">
                                            <table class="table">
                                                <thead class="custom_head">
                                                <tr>
                                                    <th width="220" translate="PATRONAGE.PERIOD"></th>
                                                    <th width="500" translate="PATRONAGE.BUSINESS"></th>
                                                    <th width="100" translate="PATRONAGE.MINIMAL BOOKING"></th>
                                                    <th width="100" translate="PATRONAGE.OVERTAKING BOOKING"></th>
                                                    <th width="100" translate="PATRONAGE.PATRONS BOOKING"></th>
                                                    <th width="100" translate="PATRONAGE.YOUR FINISHED BOOKING"></th>
                                                    <th width="100" translate="PATRONAGE.HIGHEST FINISHED BOOKING"></th>
                                                    <th width="100" translate="PATRONAGE.MISSING BOOKING"></th>
                                                </tr>
                                                </thead>
                                                <tbody class="custom_tbody">

                                                <tr dir-paginate="patronage in vm.historyPatronages | itemsPerPage: vm.itemsPerPage " total-items="vm.totalItemsHistory" current-page="vm.currentPage" pagination-id="historyPatronages">
                                                    <td style="text-decoration: none; color: black;" class="text-center {{patronage.period_css}}">{{patronage.period}}</td>
                                                    <td class="{{patronage.name_css}} text-left"><a class="rest-link" href="index.html#/app/restaurant/{{patronage.ID_restaurant}}" class="">{{patronage.rest_name}}</a></td>
                                                    <td class="{{patronage.minimal_css}}">{{patronage.minimal | translate}}</td>
                                                    <td class="{{patronage.overtake_css}}">{{patronage.overtake | translate}}</td>
                                                    <td class="{{patronage.patron_css}}">{{patronage.patron | translate}}</td>
                                                    <td class="{{patronage.finished_css}} font-bold">{{patronage.finished | translate}}</td>
                                                    <td class="{{patronage.highest_css}}">{{patronage.highest | translate}}</td>
                                                    <td class="{{patronage.missing_css}}">{{patronage.missing | translate}}</td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>
                                <div class="clearfix"></div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="text-center">
                                            <ul class="pagination">
                                                <li class="pagination pagination-separated pagination-rounded text-center">
                                                    <dir-pagination-controls on-page-change="vm.getHistoryPatronage(newPageNumber)" pagination-id="historyPatronages"></dir-pagination-controls>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="help_contnt">
                                            <p class="help_typ" translate="PATRONAGE.HELP HISTORY"></p>
                                            <p class="help_p"  translate="PATRONAGE.HELP HISTORY DESCRIPTION"></p>
                                        </div>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>
                            </div>
                            <div id="Billing" class="tab-pane fade">
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="table-responsive">
                                            <table class="table">
                                                <thead class="custom_head">
                                                <tr>
                                                    <th width="120px" translate="PATRONAGE.PERIOD"></th>
                                                    <th translate="PATRONAGE.BUSINESS"></th>
                                                    <th width="40px" translate="PATRONAGE.ALL ACTIVE BOOKINGS"></th>
                                                    <th width="40px" translate="PATRONAGE.ALL FINISHED BOOKINGS"></th>
                                                    <th width="40px">‰</th>
                                                    <th width="70px" translate="PATRONAGE.PROFIT"></th>
                                                    <th width="40px" translate="PATRONAGE.BOOKINGS"></th>
                                                    <th width="40px" translate="PATRONAGE.PERSONS"></th>
                                                    <th width="40px" translate="PATRONAGE.TABLES"></th>
                                                    <th width="40px" translate="PATRONAGE.PICK UP"></th>
                                                    <th width="40px" translate="PATRONAGE.DELIVERY"></th>
                                                    <th width="40px" translate="PATRONAGE.MISSING BOOKING"></th>
                                                </tr>
                                                </thead>
                                                <tbody class="custom_tbody">
                                                <tr dir-paginate="patronage in vm.billingPatronages | itemsPerPage: vm.itemsPerPage " total-items="vm.totalItemsBilling" current-page="vm.currentPage" pagination-id="billingPatronages">
                                                    <td style="text-decoration: none; color: black;" class="text-center {{patronage.period_css}}">{{patronage.period}}</td>
                                                    <td class="{{patronage.name_css}} text-left"><a class="rest-link" href="index.html#/app/restaurant/{{patronage.ID_restaurant}}" >{{patronage.rest_name}}</a></td>
                                                    <td class="{{patronage.all_css}}">{{patronage.all_booking | translate}}</td>
                                                    <td class="{{patronage.finished_css}}">{{patronage.finished_booking | translate}}</td>
                                                    <td class="text-center">{{patronage.promillage}}‰</td>
                                                    <td class="{{patronage.profit_css}}  text-right">{{patronage.profit | translate}}</td>
                                                    <td class="text-center">{{patronage.bookings}}</td>
                                                    <td class="text-center">{{patronage.persons}}</td>
                                                    <td class="text-center">{{patronage.tables}}</td>
                                                    <td class="text-center">{{patronage.pickup}}</td>
                                                    <td class="text-center">{{patronage.delivery}}</td>
                                                    <td class="{{patronage.missing_css}}">{{patronage.missing_booking | translate}}</td>
                                                </tr>
                                                <tr>
                                                    <td colspan="12" height="50px" style="border-left: 0; border-right:0; border-bottom: 0;">
                                                        <div class="col-md-12">
                                                            <div class="text-center">
                                                                <ul class="pagination">
                                                                    <li class="pagination pagination-separated pagination-rounded text-center">
                                                                        <dir-pagination-controls on-page-change="vm.getBillingPatronage(newPageNumber)" pagination-id="billingPatronages"></dir-pagination-controls>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="12" class="text-left" height="20px"  style="border-left: 0; border-right:0; border-top:0;">
                                                        <h3 class="summary_heading" translate="PATRONAGE.SUMMARY"></h3>
                                                    </td>
                                                <tr>
                                                    <td translate="PATRONAGE.RUNNING"></td>
                                                    <td></td>
                                                    <td class=" text-right">{{vm.running.all_booking | number:0}} Kč</td>
                                                    <td class=" text-right">{{vm.running.finished_booking | number:0}} Kč</td>
                                                    <td></td>
                                                    <td class="dark_td text-right">{{vm.running.profit | number:0}} Kč</td>
                                                    <td>{{vm.running.bookings | number:0}}</td>
                                                    <td>{{vm.running.persons | number:0}}</td>
                                                    <td>{{vm.running.tables | number:0}}</td>
                                                    <td>{{vm.running.pickup | number:0}}</td>
                                                    <td>{{vm.running.delivery | number:0}}</td>
                                                    <td>{{vm.running.missing_booking | number:0}}Kč</td>
                                                </tr>
                                                <tr>
                                                    <td translate="PATRONAGE.FINISHED"></td>
                                                    <td></td>
                                                    <td class="grey_td" translate="PATRONAGE.N/A"></td>
                                                    <td class=" text-right">{{vm.finished.finished_booking | number:0}} Kč</td>
                                                    <td></td>
                                                    <td class=" text-right">{{vm.finished.profit | number:0}} Kč</td>
                                                    <td>{{vm.finished.bookings | number:0}}</td>
                                                    <td>{{vm.finished.persons | number:0}}</td>
                                                    <td>{{vm.finished.tables | number:0}}</td>
                                                    <td>{{vm.finished.pickup | number:0}}</td>
                                                    <td>{{vm.finished.delivery | number:0}}</td>
                                                    <td class="grey_td"  translate="PATRONAGE.N/A"></td>
                                                </tr>
                                                <tr>
                                                    <td translate="PATRONAGE.PAID"></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td class=" text-right">{{vm.paid.paid | number:0}} Kč</td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                </tr>
                                                <tr>
                                                    <td translate="PATRONAGE.UNPAID"></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td class=" text-right">{{vm.paid.unpaid | number:0}} Kč</td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                </tr>
                                                <tr>
                                                    <td translate="PATRONAGE.REMAINING"></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td class=" text-right">{{vm.paid.remain | number:0}} Kč</td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                </tr>
                                                <tr>
                                                    <td colspan="5" class="green_td text-right" translate="PATRONAGE.PLEASE SEND THIS AMOUNT"></td>
                                                    <td style="padding: 0px !important;"><input type="text" id="sendAmount" class="font-bold text-right" style="width: 70px; " ng-value="vm.paid.send" ></td>
                                                    <td colspan="3" class="green_td text-left" translate="PATRONAGE.TO ACCOUNT NUMBER"></td>
                                                    <td style="padding: 0px !important;" colspan="2" ><input type="text" id="accountNumber" style="width: 110px;"></td>
                                                    <td  class="green_td" translate="PATRONAGE.SEND" style="cursor: pointer;" ng-click="vm.sendAmount(); "></td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>
                                <div class="clearfix"></div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="help_contnt">
                                            <p class="help_typ" translate="PATRONAGE.HELP BILLING"></p>
                                            <p class="help_p"  translate="PATRONAGE.HELP BILLING DESCRIPTION"></p>
                                        </div>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>
                            </div>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                </div>

                <!-- Start Requests Meal -->
                <div id="requestsList" class="tab-pane fade">
                    <div class="col-md-8 meal_request_tab" ng-if="!vm.reqCountLoading">
                        <div class="col-md-2 centered" ng-class="{active : requestTab == 'addRequest'}" >
                            <a ng-href="#" class="request_tab_menu" data-toggle="pill" target="_self" translate="CLIENT.ADDNEW" ng-click="show('addRequest')" ></a>
                        </div>
                        <div class="col-md-2 centered" ng-class="{active : requestTab == 'newRequests'}">
                            <a class="request_tab_menu" ng-href="#" data-toggle="pill" target="_self" ng-click="show('newRequests')">
                            <span translate="CLIENT.NEW"></span>
                            <span ng-if="vm.new_unread > 0" >
                                ( {{ vm.new_unread }} )
                            </span>
                            </a>
                        </div>
                        <div class="col-md-3 centered" ng-class="{active : requestTab == 'confirmedRequests'}">
                            <a class="request_tab_menu" ng-href="#" data-toggle="pill" target="_self" ng-click="show('confirmedRequests')">
                                <span translate="CLIENT.CONFIRMED REQUEST" ></span>
                                <span ng-if="vm.confirm_unread > 0">
                                    ( {{ vm.confirm_unread }} )
                                </span>
                            </a>
                        </div>
                        <div class="col-md-3 centered" ng-class="{active : requestTab == 'cancelledRequests'}">
                            <a class="request_tab_menu" ng-href="#" data-toggle="pill" class="pull-right" target="_self" ng-click="show('cancelledRequests')">
                                <span translate="CLIENT.CANCELLED" ></span>
                                <span ng-if="vm.cancel_unread > 0">
                                    ( {{ vm.cancel_unread }} )
                                </span>
                            </a>
                        </div>
                        <div class="col-md-12"><br></div>
                    </div>
                    <div class="col-md-4" ng-if="!vm.reqCountLoading">
                        <button class="btn btn-sm refresh-btn pull-right" ng-click="vm.refreshRequests();">
                            <i class="fa fa-refresh" aria-hidden="true"></i>
                            <span translate="CLIENT.REFRESH"></span>
                        </button>
                    </div>

                    <div id="addRequest"  ng-show="requestTab=='addRequest'">
                        <form name="requests" novalidate>
                            <!-- Order Detail At -->
                            <div class="col-md-10" >
                                <div class="form-group col-md-9" ng-class="{ 'has-error': (requests.request_date.$touched || requests.$submitted) && requests.request_date.$invalid }">
                                    <label class="control-label" translate="CLIENT.DATE"></label>
                                    <sup class="required_field error">*</sup>
                                    <p class="input-group input-group-lg">
                                        <input type="text" class="form-control" datetime-picker="dd.MM.y" name="request_date"
                                           ng-model="request.request_date" 
                                           is-open="vm.date_picker.open" 
                                           ng-required="isRequiredField" 
                                           ng-init="isRequiredField = true"
                                           enable-time="false" 
                                           datepicker-options="vm.date_picker.datepickerOptions" 
                                           datepicker-append-to-body="false"
                                           autocomplete="off" ng-keyup="checkOpeningHoursValidation()" ng-change="checkOpeningHoursValidation()" />
                                        <span class="input-group-btn">
                                            <button type="button" class="btn btn-default" ng-click="vm.openCalendar()"><i class="fa fa-calendar"></i></button>
                                        </span>
                                    </p>

                                    <div class="form_error" ng-messages="requests.request_date.$error"
                                         ng-if="requests.request_date.$touched || requests.$submitted"
                                         role="alert">
                                        <p ng-message="required" translate="CLIENT.DATE EMPTY"></p>
                                    </div>
                                </div> 

                                <div class="form-group col-md-3" ng-class="{ 'has-error': (requests.request_time.$touched || requests.$submitted) && requests.request_time.$invalid }">
                                    <label class="control-label" translate="CLIENT.TIME"></label>
                                    <sup class="required_field error">*</sup>
                                    <input 
                                    ng-required="isRequiredField" 
                                    ng-init="isRequiredField = true"
                                    ui-timepicker="vm.timeOptions" name="request_time" 
                                    ng-model="request.request_time" 
                                    class="form-control input-lg"
                                    autocomplete="off" 
                                    ng-keyup="checkOpeningHoursValidation()" ng-change="checkOpeningHoursValidation()" >
                                    <div class="form_error" ng-messages="requests.request_time.$error"
                                        ng-if="requests.request_time.$touched || requests.$submitted"
                                        role="alert">
                                        <p ng-message="required" translate="CLIENT.EMPTY TIME"></p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-10" >
                                <div class="form-group col-md-9" ng-class="{ 'has-error': (requests.request_mealname.$touched || requests.$submitted) && requests.request_mealname.$invalid }">
                                    <label class="control-label" translate="CLIENT.MEAL NAME"></label>
                                    <sup class="required_field error">*</sup>
                                    <input type="text" ng-required="vm.mealNameIsRequired" ng-model="request.request_mealname" uib-typeahead="menu.name for menu in menuList | filter:$viewValue | limitTo:10" class="form-control input-lg" typeahead-on-select="getMealPrice($item, $model, $label)" ng-keyup="($event.keyCode!=13)? checkMealName() : return; checkOpeningHoursValidation()"
                                    autocomplete="off" >
                                    <div class="form_error" ng-messages="requests.request_mealname.$error"
                                        ng-if="requests.request_mealname.$touched || requests.$submitted"
                                        role="alert">
                                        <p ng-message="required" translate="CLIENT.MEAL NAME EMPTY"></p>
                                    </div>
                                </div> 

                                <div class="form-group col-md-3" ng-class="{ 'has-error': (requests.request_meal_number.$touched || requests.$submitted) && requests.request_meal_number.$invalid }">
                                    <label class="control-label" translate="CLIENT.NUMBER"></label>
                                    <sup class="required_field error">*</sup>
                                    <input type="number" min="1" ng-required="vm.mealNumberIsRequired" name="request_meal_number" ng-model="request.request_meal_number" class="form-control input-lg">
                                    <div class="form_error" ng-messages="requests.request_meal_number.$error"
                                        ng-if="requests.request_meal_number.$touched || requests.$submitted"
                                        role="alert">
                                        <p ng-message="required" translate="CLIENT.NUMBER EMPTY"></p>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-10">
                                <div class="form-group col-md-6">
                                    <label class="custom-control custom-checkbox">
                                      <input type="checkbox" name="request_ingredients_details" ng-model="request_ingredients_details" class="custom-control-input">
                                      <span class="custom-control-description" translate="CLIENT.ING DETAILS"></span>
                                    </label>
                                </div>
                            </div> 

                            <div class="ingredients_details" ng-show="request_ingredients_details">
                                <div class="col-md-10">
                                    <div class="form-group col-md-5">
                                        <label class="control-label" translate="CLIENT.INGREDIENTS"></label>
                                        <select name="ingredient" ng-model="request_ingredient.ingredient" class="form-control input-lg" ng-change="onIngredientChange();" ng-options="ingredient.name for ingredient in ingredientList">
                                        </select>
                                    </div> 
                                    <div class="form-group col-md-3">
                                        <label class="control-label" translate="CLIENT.AMOUNT"></label>
                                        <input type="number" min="1" name="amount" ng-model="request_ingredient.amount" class="form-control input-lg">
                                    </div> 
                                    <div class="col-md-4">
                                        <label class="control-label" translate="CLIENT.UNIT"></label>
                                        <div class="row">
                                            <div class="form-group col-md-6" ng-init="vm.gunit = 'CLIENT.g'; vm.mlunit = 'CLIENT.ml'; vm.pcsunit = 'CLIENT.pcs'; ">
                                                <select name="unit" class="form-control input-lg" ng-model="request_ingredient.unit">
                                                  <option value="g">{{ vm.gunit | translate }}</option>
                                                  <option value="ml">{{ vm.mlunit | translate }}</option>
                                                  <option value="pcs">{{ vm.pcsunit | translate }}</option>
                                                </select>
                                            </div> 
                                            <div class="form-group col-md-6">
                                                <button class="btn btn-primary btn-lg add_ingre pull-right" type="button" ng-click="addIngredient()" ng-disabled="!(request_ingredient.ingredient) || requests.amount.$invalid">
                                                <span translate="CLIENT.ADD"></span>
                                                </button>
                                            </div> 
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-10" ng-show="vm.ing_exist == true">
                                    <div class="form-group col-md-5"><span style="color:red;" translate="CLIENT.INGREDIENT ALREADY ADDED"></span></div>
                                </div>
                                <div class="col-md-10 ingredients_list" ng-repeat="ingredient in ingredients track by $index">
                                    <div class="form-group col-md-5">
                                        <span class="pull-right">{{ingredient.name}}</span>
                                    </div>
                                    <div class="form-group col-md-3" ng-init="vm.unit[$index] = (ingredient.unit) ? 'CLIENT.'+ingredient.unit : ''; ">
                                        <span class="pull-right">{{ingredient.amount}} {{vm.unit[$index] | translate }}</span>
                                    </div>
                                    <div class="form-group col-md-2">
                                        <button type="button" class="btn btn-danger  pull-right" ng-click="removeIngredient(ingredients, $index);"><i class="fa fa-times"></i></button>
                                    </div>
                                </div>

                                <div class="col-md-10">
                                    <div class="form-group col-md-10">
                                        <label class="control-label" translate="CLIENT.DESCRIPTION"></label>
                                        <textarea name="request_description" ng-model="request.request_description" class="form-control" rows="3"></textarea>
                                    </div>
                                </div>

                                <div class="col-md-10">
                                    <div class="form-group col-md-6">
                                        <label class="control-label" translate="CLIENT.FRIEND NAME"></label>
                                        <select name="request_friend_name" class="form-control input-lg" ng-model="request.request_friend_name">
                                            <option value=""><span translate="CLIENT.NONE"></span></option>
                                            <option ng-repeat="friend in vm.friendCircle" value="{{friend.ID_grouped_client}}" ng-change="setFriendName()" >{{ friend.name }}</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6" ng-class="{'has-error': requests.request_price.$invalid}">
                                        <label class="control-label" translate="CLIENT.PRICE"></label>
                                        <div class="row">
                                            <div class="form-group col-md-8">
                                               <input type="number" name="request_price" ng-model="request.request_price" class="form-control input-lg pull-right" ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" step="0.01" ng-value="request.request_price" ng-disabled="isPriceDisabled" ng-max="999999.99">
                                               <div class="form_error" ng-messages="requests.request_price.$error"
                                                    ng-if="!requests.request_price.$valid"
                                                    role="alert">
                                                    <p translate="CLIENT.Invalid Price"></p>
                                                </div>
                                            </div>
                                            <div class="form-group col-md-1">
                                                <label class="control-label input-lg pull-left">{{vm.currentUserCurrency}}</label> <!-- translate="CLIENT.EUR" -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-10">
                                <div class="form-group col-md-9">
                                    <label class="custom-control custom-checkbox">
                                      <input type="checkbox" name="request_side_dish" ng-model="request.request_side_dish" class="custom-control-input" ng-disabled="!meals.length">
                                      <span class="custom-control-description" translate="CLIENT.THIS SIDE DISH"></span>
                                    </label>
                                </div>
                                <div class="form-group col-md-3">
                                    <button class="btn btn-primary add_meal btn-lg pull-right" type="button" ng-disabled="!requests.$valid || (vm.checkOpeningHoursValid == false && vm.isRestaurant == true)" ng-click="addMeal();">
                                        <span translate="CLIENT.ADD MEAL"></span>
                                    </button>
                                </div>
                            </div> 
                            <div class="col-md-10" ng-hide="meals.length">
                                <div class="form-group col-md-9">
                                    <span class="no_meal_added" translate="CLIENT.No meal added"></span>
                                </div>
                            </div>
                        </form>
                        <form name="submitRequestForm" novalidate>
                            <div ng-show="meals.length" class="col-md-10 add_meal_listing">
                                <div class="col-md-12 meal_heading">
                                    <div class="form-group col-md-2">
                                        <label class="control-label" translate="CLIENT.REQUEST"></label>
                                    </div>
                                    <div class="form-group col-md-4">
                                        <span class="pull-left">{{request.request_date | date : "dd.MM.y" }}</span>
                                    </div>
                                </div>

                                <div class="meals_list" ng-repeat="meal in meals track by $index" ng-init="setTotals(meal)">
                                    <div class="col-md-12 custom_meal_background custom_meal_background_{{$index}}">
                                        <div class="form-group col-md-2">
                                            <span class="pull-left" ng-if="meal.side_dish == 'N'">{{ meal.serve_time | date : "HH:mm" }}</span>
                                        </div>
                                        <div class="form-group" ng-class="meal.price?'col-md-4':'col-md-5'">
                                            <span class="pull-left">{{ meal.x_number + 'x ' + meal.request_menu_name }} </span>
                                        </div>
                                        <div class="form-group col-md-2" ng-show="meal.price">
                                            {{meal.x_number}}x {{meal.price}} <span>{{vm.currentUserCurrency}}</span>
                                        </div>
                                        <div class="form-group" ng-class="meal.price?'col-md-2':'col-md-3'">
                                            <button class="btn btn-info add_meal pull-right" type="button" ng-click="mealDetails($index);" data-toggle="modal" data-target="#mealDetailModal">
                                                <span translate="CLIENT.DETAILSNEW"></span>
                                            </button>
                                        </div>
                                        <div class="form-group col-md-2">
                                            <button type="button" class="btn btn-danger pull-left" ng-click="removeMeal(meals, $index);  checkOpeningHoursValidation()"><i class="fa fa-times"></i></button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-10" style="margin-top: 2%;">
                                <div class="form-group col-md-12" ng-class="{ 'has-error': (submitRequestForm.new_restaurant.$touched || submitRequestForm.$submitted) && submitRequestForm.new_restaurant.$invalid }">
                                   <label class="control-label" translate="CLIENT.RESTAURANT NAME"></label>
                                   <sup class="required_field error">*</sup>
                                    <input type="text" ng-required="vm.resturantNameRequired" name="new_restaurant" ng-model="submitRequest.new_restaurant" uib-typeahead="restaurant as restaurant.name for restaurant in restaurantList | filter:$viewValue | limitTo:10" class="form-control input-lg" typeahead-on-select="getRestaurantAddress($item, $model, $label)" ng-keyup="($event.keyCode!=13)? checkRestaurantName() : return" autocomplete="off">
                                   <div class="form_error" ng-messages="submitRequestForm.new_restaurant.$error"
                                        ng-if="submitRequestForm.new_restaurant.$touched || submitRequestForm.$submitted"
                                        role="alert">
                                        <p ng-message="required" translate="CLIENT.RESTAURANT NAME EMPTY"></p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-10" >
                                <div class="form-group col-md-12">
                                    <a ng-show="vm.isRestaurant == true" href="javascript:void(0)" data-target="#rest_openning" data-toggle="modal" ng-click="">
                                        <span ng-show='vm.r_open' translate="RESTAURANT.NOW OPEN"></span>
                                        <span ng-show='!vm.r_open' class="cl-brown" translate="RESTAURANT.NOW CLOSED"></span>

                                        <span ng-show="vm.m_time"> <span>{{vm.m_starting_time}}</span> - <span>{{vm.m_ending_time}}</span> </span>
                                        <span ng-show="vm.m_time && vm.a_time"> , </span>
                                        <span ng-show="vm.a_time"> <span>{{vm.a_starting_time}}</span> - <span>{{vm.a_ending_time}}</span> </span>

                                        , <span translate="RESTAURANT.TOMORROW"></span>

                                        <span ng-show="vm.t_m_time"> </span><span>{{vm.t_m_starting_time}}</span> - <span>{{vm.t_m_ending_time}}</span> </span>
                                        <span ng-show="vm.t_m_time && vm.t_a_time"> , </span>
                                        <span ng-show="vm.t_a_time"> <span>{{vm.t_a_starting_time}}</span> - <span>{{vm.t_a_ending_time}}</span> </span>
                                        <span ng-show="!vm.t_m_time && !vm.t_a_time" class="text-lowercase"> {{'RESTAURANT_DETAIL.CLOSED OPTION' | translate }} </span>
                                    </a>
                                </div>
                            </div>
                            <div class="col-md-10" ng-show="vm.checkOpeningHoursValid == false && vm.isRestaurant == true">
                                <div class="form-group col-md-12">
                                    <span class="no_meal_added" translate="CLIENT.OPENING HOURS NOT EXIT"></span>
                                </div>
                            </div>
                            <div class="col-md-10" >
                                <div class="form-group col-md-12" ng-class="{ 'has-error': (submitRequestForm.new_address.$touched || submitRequestForm.$submitted) && submitRequestForm.new_address.$invalid }">
                                    <label class="control-label" translate="CLIENT.RESTAURANT ADDRESS"></label>
                                    <sup class="required_field error">*</sup>
                                    <textarea ng-disabled="isDisabled" name="new_address" ng-required="isRequired" ng-model="submitRequest.new_address" class="form-control" rows="3" ng-value="submitRequest.new_address">{{submitRequest.new_address}}</textarea>
                                    <div class="form_error" ng-messages="submitRequestForm.new_address.$error"
                                        ng-if="submitRequestForm.new_address.$touched || submitRequestForm.$submitted"
                                        role="alert">
                                        <p ng-message="required" translate="CLIENT.RESTAURANT ADDRESS EMPTY"></p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-10" >
                                <div class="form-group col-md-12">
                                    <label class="control-label" translate="CLIENT.MESSAGE"></label>
                                    <textarea name="comment" ng-model="submitRequest.comment" class="form-control" rows="3"></textarea>
                                </div>
                            </div>
                            <div class="col-md-10" >
                                <div class="col-md-4" ng-class="{ 'has-error': (submitRequestForm.persons.$touched || submitRequestForm.$submitted) && submitRequestForm.persons.$invalid }">
                                    <label class="control-label" translate="CLIENT.PERSONS"></label>
                                    <sup class="required_field error">*</sup>
                                    <input type="number" ng-required="vm.isRequiredPerson" min="1" name="persons" ng-model="submitRequest.persons" class="form-control input-lg">

                                    <div class="form_error" ng-messages="submitRequestForm.persons.$error"
                                        ng-if="submitRequestForm.persons.$touched || submitRequestForm.$submitted"
                                        role="alert">
                                        <p ng-message="required" translate="CLIENT.MINIMUM 1 PERSON RQURIED"></p>
                                    </div>
                                </div>
                                <div class="col-md-8">
                                    <label class="control-label" translate="CLIENT.TOTAL PRICE"></label>
                                    <div class="row">
                                        <div class="col-md-6" >
                                            <div class="input-lg" ng-show="priceTotal !='' && priceTotal !='0.00' && priceTotal > 0">{{priceTotal}} <span>{{vm.currentUserCurrency}}</span></div>
                                        </div>
                                        <div class="col-md-6" >
                                            <button required type="submit" ng-disabled="!meals.length || !submitRequestForm.$valid || vm.checkHoursSendValid == false" ng-click="sendRequest(submitRequestForm.$valid);" class="btn btn-primary btn-lg pull-right">
                                                <span translate="CLIENT.SEND REQUEST"></span>
                                                <span ng-if="vm.sendRequestLoading" class="fa fa-spinner fa-spin cl-brown"></span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12"><br></div>
                        </form>
                        <div class="empty-orders col-md-12" ng-show="vm.isSendREQUESTError">
                            <div class="error cl-brown col-md-10">
                                <strong translate="CLIENT.SOMETHING WRONG"></strong>
                            </div>
                        </div>
                    </div>

                    <div id="newRequests"  ng-show="requestTab=='newRequests'" class="all_meal_request" >
                        <div class="col-md-12" ng-if="vm.reqLoading">
                            <div class="col-md-12 text-center v-center-lg">
                                <img src="assets/images/loading.gif" alt="loading">
                            </div>
                        </div>
                        <div class="col-md-12" ng-if="!vm.reqLoading">
                            <div class="empty-orders col-md-12" ng-if="vm.isRequestEmpty || allrequest.length == 0">
                                <div class="error cl-brown col-md-12">
                                    <strong translate="CLIENT.NO REQUESTED MEAL"></strong>
                                </div>
                            </div>
                            <ul class="list-group">
                                <div ng-if="!vm.isRequestEmpty" dir-paginate="getRequest in vm.getRequests | itemsPerPage: vm.requestPerPage as allrequest" class="meal_content" total-items="vm.totalrequests" current-page="vm.requestCurrentPage" pagination-id="paginate1">
                                    <li class="list-group-item" ng-init="vm.checkUnread[getRequest.ID] = (getRequest.unread == 'C') ? 'confirm_name' : ''" ng-class="vm.checkUnread[getRequest.ID]">
                                        <div class="pull-right btn-group btn-group-sm">

                                            <div class="inline" ng-repeat="detail in getRequest.orders.request_order_detail |limitTo:1">
                                                <button ng-if="checkPreDate(detail.serve_at)"  class="btn btn-warning btn-sm" ng-click="vm.cancelRequest(getRequest.ID)">
                                                    <span translate="CLIENT.CANCELNEW"></span>
                                                    <span ng-show="cancelId== getRequest.ID" class="fa fa-spinner fa-spin cl-brown"></span>
                                                </button>
                                            </div>
                                            <div class="inline">
                                                <button class="btn btn-info btn-sm" translate="CLIENT.DETAILSNEW" data-toggle="modal" data-target="#requestDetail{{getRequest.ID}}" ng-click="vm.changeStatusAsRead(getRequest.ID, 'N');"></button>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-8">
                                                <h4>
                                                    <span class="inline" ng-repeat="detail in getRequest.orders.request_order_detail | orderBy: 'serve_at' | limitTo:1">
                                                    {{convertToDate(detail.serve_at) | date:'dd.MM.y HH:mm'}} - 
                                                    </span>
                                                    <span translate="CLIENT.REQUEST NUMBER"></span><span> {{getRequest.orders.ID}}</span>

                                                    <span ng-init="vm.restrauntReadStatus[getRequest.ID] = (getRequest.unread == 'R') ? 'CLIENT.UNREAD': 'CLIENT.READ' " class="restraunt_container"> - 
                                                        <a ng-if="getRequest.ID_restaurant != 0 && getRequest.ID_restaurant != ''" href="" ui-sref="main.restaurant_detail({restaurantId: getRequest.ID_restaurant})" class="restaurant_link"> <span>{{getRequest.new_restaurant}} ({{vm.restrauntReadStatus[getRequest.ID] | translate }})</span></a>
                                                        <span ng-if="getRequest.ID_restaurant == 0 || getRequest.ID_restaurant == ''">{{getRequest.new_restaurant}} ({{vm.restrauntReadStatus[getRequest.ID] | translate }})</span> 
                                                        <i class="inline"></i>
                                                    </span>
                                                </h4>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-3">
                                                <div>
                                                    <span class="inline cl-gray" translate="CLIENT.PERSONS"></span>:
                                                    <i class="inline">{{getRequest.orders.persons}}</i>
                                                </div>
                                                <div>
                                                    <span class="inline cl-gray" translate="CLIENT.TOTAL ITEMS"></span>:
                                                    <i class="inline">{{ (getRequest.orders.request_order_detail | filter: totalOrderDetail).length }}</i>
                                                </div>
                                            </div>
                                            <div class="col-md-5">
                                                <div ng-repeat="detail in getRequest.orders.request_order_detail |limitTo:1" >
                                                    <div ng-if="detail.request_param.request_min_servings > vm.countMissingBookingDetails[detail.ID]" >
                                                        {{detail.request_param.request_min_servings - vm.countMissingBookingDetails[detail.ID]}}
                                                        <span class="inline" translate="CLIENT.MISSING BOOKINGS">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div>
                                                    <span class="inline cl-gray" translate="CLIENT.ORDERED AT"></span>:
                                                    <i class="inline"
                                                    ng-if="getRequest.orders.created_at != 'Invalid Date'">{{convertToDate(getRequest.orders.created_at) | date:'dd.MM.y HH:mm'}}</i>
                                                </div>
                                                <div>
                                                    <span class="inline cl-gray" translate="CLIENT.TOTAL PRICE"></span>:
                                                    <i class="inline">{{getTotalPrice(getRequest.orders.request_order_detail)}}</i>
                                                    <span class="inline" ng-repeat="detail in getRequest.orders.request_order_detail |limitTo:1">
                                                    {{detail.currency}}
                                                    </span>
                                                </div>
                                            </div>
                                        </div>

                                        <div ng-if="order.comment">
                                            <hr>
                                            <div>
                                                <span class="cl-gray" translate="CLIENT.ORDER COMMENT"></span>:
                                                <i class="inline" ng-text-truncate="order.comment"
                                                ng-tt-chars-threshold="5"></i>
                                            </div>
                                        </div>

                                    </li>
                                </div>
                                <li class="pagination pagination-separated pagination-rounded text-center">
                                    <dir-pagination-controls on-page-change="pageChangeHandler()" pagination-id="paginate1"></dir-pagination-controls>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div id="confirmedRequests"  ng-show="requestTab=='confirmedRequests'" class="all_meal_request">
                        <div class="col-md-12" ng-if="vm.reqconfLoading">
                            <div class="col-md-12 text-center v-center-lg">
                                <img src="assets/images/loading.gif" alt="loading">
                            </div>
                        </div>
                        <div class="col-md-12" ng-if="!vm.reqconfLoading">
                            <div class="col-md-12" ng-if="vm.isConfirmRequestEmpty || allConfirmrequest.length == 0">
                                <div class="error cl-brown col-md-12">
                                    <strong translate="CLIENT.NO CONFIRMED MEAL"></strong>
                                </div>
                            </div>
                            <ul class="list-group">
                                
                                <div ng-if="!vm.isConfirmRequestEmpty" dir-paginate="getRequest in vm.getConfirmRequests | itemsPerPage: vm.confirmrequestPerPage as allConfirmrequest" total-items="vm.confirmtotalrequests" current-page="vm.confirmrequestCurrentPage" pagination-id="paginate2" class="meal_content">

                                    <li class="list-group-item" ng-init="vm.checkUnread[getRequest.ID] = (getRequest.unread == 'C') ? 'confirm_name' : ''" ng-class="vm.checkUnread[getRequest.ID]">
                                        <div class="pull-right btn-group btn-group-sm">
                                            <div class="inline" ng-repeat="detail in getRequest.orders.request_order_detail |limitTo:1">
                                                <button ng-if="checkPreDate(detail.serve_at)"  class="btn btn-warning btn-sm" ng-click="vm.cancelRequest(getRequest.ID)">
                                                    <span translate="CLIENT.CANCELNEW"></span>
                                                    <span ng-show="cancelId== getRequest.ID" class="fa fa-spinner fa-spin cl-brown"></span>
                                                </button>
                                            </div>
                                            <div class="inline">
                                                <button class="btn btn-info btn-sm" translate="CLIENT.DETAILSNEW" data-toggle="modal" data-target="#requestDetail{{getRequest.ID}}" ng-click="vm.changeStatusAsRead(getRequest.ID, 'C');"></button>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-8">
                                                <h4>
                                                    <span class="inline" ng-repeat="detail in getRequest.orders.request_order_detail | orderBy: 'serve_at' | limitTo:1">
                                                    {{convertToDate(detail.serve_at) | date:'dd.MM.y HH:mm'}} - 
                                                    </span>
                                                    <span translate="CLIENT.REQUEST NUMBER"></span><span> {{getRequest.orders.ID}}</span>

                                                    <span ng-init="vm.restrauntReadStatus[getRequest.ID] = (getRequest.unread == 'R') ? 'CLIENT.UNREAD': 'CLIENT.READ' " class="restraunt_container"> - 
                                                        <a ng-if="getRequest.ID_restaurant != 0 && getRequest.ID_restaurant != ''" href="" ui-sref="main.restaurant_detail({restaurantId: getRequest.ID_restaurant})" class="restaurant_link"> <span>{{getRequest.new_restaurant}} ({{vm.restrauntReadStatus[getRequest.ID] | translate }})</span></a>
                                                        <span ng-if="getRequest.ID_restaurant == 0 || getRequest.ID_restaurant == ''">{{getRequest.new_restaurant}} ({{vm.restrauntReadStatus[getRequest.ID] | translate }})</span> 
                                                        <i class="inline"></i>
                                                    </span>
                                                </h4>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-3">
                                                <div>
                                                    <span class="inline cl-gray" translate="CLIENT.PERSONS"></span>:
                                                    <i class="inline">{{getRequest.orders.persons}}</i>
                                                </div>
                                                <div>
                                                    <span class="inline cl-gray" translate="CLIENT.TOTAL ITEMS"></span>:
                                                    <i class="inline">{{ (getRequest.orders.request_order_detail | filter: totalOrderDetail).length }}</i>
                                                </div>
                                            </div>
                                            <div class="col-md-5">
                                                <div ng-repeat="detail in getRequest.orders.request_order_detail |limitTo:1" >
                                                    <div ng-if="detail.request_param.request_min_servings > vm.countMissingBookingDetails[detail.ID]" >
                                                        {{detail.request_param.request_min_servings - vm.countMissingBookingDetails[detail.ID]}}
                                                        <span class="inline" translate="CLIENT.MISSING BOOKINGS">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div>
                                                    <span class="inline cl-gray" translate="CLIENT.ORDERED AT"></span>:
                                                    <i class="inline"
                                                    ng-if="getRequest.orders.created_at != 'Invalid Date'">{{convertToDate(getRequest.orders.created_at) | date:'dd.MM.y HH:mm'}}</i>
                                                </div>
                                                <div>
                                                    <span class="inline cl-gray" translate="CLIENT.TOTAL PRICE"></span>:
                                                    <i class="inline">{{getTotalPrice(getRequest.orders.request_order_detail)}}</i>
                                                    <span class="inline" ng-repeat="detail in getRequest.orders.request_order_detail |limitTo:1">
                                                    {{detail.currency}}
                                                    </span>
                                                </div>
                                            </div>
                                        </div>

                                        <div ng-if="order.comment">
                                            <hr>
                                            <div>
                                                <span class="cl-gray" translate="CLIENT.ORDER COMMENT"></span>:
                                                <i class="inline" ng-text-truncate="order.comment"
                                                ng-tt-chars-threshold="5"></i>
                                            </div>
                                        </div>

                                    </li>
                                </div>
                                <li class="pagination pagination-separated pagination-rounded text-center">
                                    <dir-pagination-controls on-page-change="confirmPageChangeHandler()" pagination-id="paginate2"></dir-pagination-controls>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div id="cancelledRequests"  ng-show="requestTab=='cancelledRequests'" class="all_meal_request">
                        <div class="col-md-12" ng-if="vm.reqCancelLoading">
                            <div class="col-md-12 text-center v-center-lg">
                                <img src="assets/images/loading.gif" alt="loading">
                            </div>
                        </div>
                        <div class="col-md-12" ng-if="!vm.reqCancelLoading">
                            <div class="col-md-12" ng-if="vm.isCancelRequestEmpty || cancelrequest.length == 0">
                                <div class="error cl-brown col-md-12">
                                    <strong translate="CLIENT.NO CANCELLED MEAL"></strong>
                                </div>
                            </div>
                            <ul class="list-group">
                                <div ng-if="!vm.isCancelRequestEmpty" dir-paginate="getRequest in vm.getCancelRequests | itemsPerPage: vm.cancelrequestPerPage as cancelrequest" total-items="vm.canceltotalrequests" current-page="vm.cancelrequestCurrentPage" pagination-id="paginate3" class="meal_content">
                                    <li class="list-group-item" ng-init="vm.checkUnread[getRequest.ID] = (getRequest.unread == 'C') ? 'confirm_name' : ''" ng-class="vm.checkUnread[getRequest.ID]">
                                        <div class="pull-right btn-group btn-group-sm">
                                            <button class="btn btn-info btn-sm" translate="CLIENT.DETAILSNEW" data-toggle="modal" data-target="#requestDetail{{getRequest.ID}}" ng-click="vm.changeStatusAsRead(getRequest.ID, 'CA');"></button>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-8">
                                                <h4>
                                                    <span class="inline" ng-repeat="detail in getRequest.orders.request_order_detail | orderBy: 'serve_at' | limitTo:1">
                                                    {{convertToDate(detail.serve_at) | date:'dd.MM.y HH:mm'}} - 
                                                    </span>
                                                    <span translate="CLIENT.REQUEST NUMBER"></span><span> {{getRequest.orders.ID}}</span>

                                                    <span ng-init="vm.restrauntReadStatus[getRequest.ID] = (getRequest.unread == 'R') ? 'CLIENT.UNREAD': 'CLIENT.READ' " class="restraunt_container"> - 
                                                        <a ng-if="getRequest.ID_restaurant != 0 && getRequest.ID_restaurant != ''" href="" ui-sref="main.restaurant_detail({restaurantId: getRequest.ID_restaurant})" class="restaurant_link"> <span>{{getRequest.new_restaurant}} ({{vm.restrauntReadStatus[getRequest.ID] | translate }})</span></a>
                                                        <span ng-if="getRequest.ID_restaurant == 0 || getRequest.ID_restaurant == ''">{{getRequest.new_restaurant}} ({{vm.restrauntReadStatus[getRequest.ID] | translate }})</span> 
                                                        <i class="inline"></i>
                                                    </span>
                                                </h4>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-3">
                                                <div>
                                                    <span class="inline cl-gray" translate="CLIENT.PERSONS"></span>:
                                                    <i class="inline">{{getRequest.orders.persons}}</i>
                                                </div>
                                                <div>
                                                    <span class="inline cl-gray" translate="CLIENT.TOTAL ITEMS"></span>:
                                                    <i class="inline">{{ (getRequest.orders.request_order_detail | filter: totalOrderDetail).length }}</i>
                                                </div>
                                            </div>
                                            <div class="col-md-5">
                                            </div>
                                            <div class="col-md-4">
                                                <div>
                                                    <span class="inline cl-gray" translate="CLIENT.ORDERED AT"></span>:
                                                    <i class="inline"
                                                    ng-if="getRequest.orders.created_at != 'Invalid Date'">{{convertToDate(getRequest.orders.created_at) | date:'dd.MM.y HH:mm'}}</i>
                                                </div>
                                                <div>
                                                    <span class="inline cl-gray" translate="CLIENT.TOTAL PRICE"></span>:
                                                    <i class="inline">{{getTotalPrice(getRequest.orders.request_order_detail)}}</i>
                                                    <span class="inline" ng-repeat="detail in getRequest.orders.request_order_detail |limitTo:1">
                                                    {{detail.currency}}
                                                    </span>
                                                </div>
                                            </div>
                                        </div>

                                        <div ng-if="order.comment">
                                            <hr>
                                            <div>
                                                <span class="cl-gray" translate="CLIENT.ORDER COMMENT"></span>:
                                                <i class="inline" ng-text-truncate="order.comment"
                                                ng-tt-chars-threshold="5"></i>
                                            </div>
                                        </div>

                                    </li>
                                </div>

                                <li class="pagination pagination-separated pagination-rounded text-center">
                                    <dir-pagination-controls on-page-change="cancelPageChangeHandler()" pagination-id="paginate3"></dir-pagination-controls>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div ng-show="vm.isRestaurant == true">
    <div class="modal fade" id="rest_openning"  role="dialog" aria-labelledby="myModalLabel">
        <div class="container">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title" translate="RESTAURANT_DETAIL.NAV OPENING HRS"></h4>
                    </div>
                    <div class="modal-body">
                        <table class="table table-bordered">
                            <thead>
                            <tr>
                                <th translate="RESTAURANT_DETAIL.NAV DAY"></th>
                                <th translate="RESTAURANT_DETAIL.FROM"></th>
                                <th translate="RESTAURANT_DETAIL.UNTIL"></th>
                                <th translate="RESTAURANT_DETAIL.FROM"></th>
                                <th translate="RESTAURANT_DETAIL.UNTIL"></th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td translate="RESTAURANT_DETAIL.MONDAY"></td>
                                <td>
                                    <span ng-if="vm.openingHours.monday.m_starting_time">{{vm.openingHours.monday.m_starting_time}}</span>
                                    <span ng-if="!vm.openingHours.monday.m_starting_time">{{'RESTAURANT_DETAIL.CLOSED OPTION' | translate }}</span>
                                </td>
                                <td>
                                    <span ng-if="vm.openingHours.monday.m_ending_time">{{vm.openingHours.monday.m_ending_time}}</span>
                                    <span ng-if="!vm.openingHours.monday.m_ending_time">{{'RESTAURANT_DETAIL.CLOSED OPTION' | translate }}</span>
                                </td>
                                <td>
                                    <span ng-if="vm.openingHours.monday.a_starting_time">{{vm.openingHours.monday.a_starting_time}}</span>
                                    <span ng-if="!vm.openingHours.monday.a_starting_time">{{'RESTAURANT_DETAIL.CLOSED OPTION' | translate }}</span>
                                </td>
                                <td>
                                    <span ng-if="vm.openingHours.monday.a_ending_time">{{vm.openingHours.monday.a_ending_time}}</span>
                                    <span ng-if="!vm.openingHours.monday.a_ending_time">{{'RESTAURANT_DETAIL.CLOSED OPTION' | translate }}</span>
                                </td>
                            </tr>
                            <tr>
                                <td translate="RESTAURANT_DETAIL.TUESDAY"></td>
                                <td>
                                    <span ng-if="vm.openingHours.tuesday.m_starting_time">{{vm.openingHours.tuesday.m_starting_time}}</span>
                                    <span ng-if="!vm.openingHours.tuesday.m_starting_time">{{'RESTAURANT_DETAIL.CLOSED OPTION' | translate }}</span>
                                </td>
                                <td>
                                    <span ng-if="vm.openingHours.tuesday.m_ending_time">{{vm.openingHours.tuesday.m_ending_time}}</span>
                                    <span ng-if="!vm.openingHours.tuesday.m_ending_time">{{'RESTAURANT_DETAIL.CLOSED OPTION' | translate }}</span>
                                </td>
                                <td>
                                    <span ng-if="vm.openingHours.tuesday.a_starting_time">{{vm.openingHours.tuesday.a_starting_time}}</span>
                                    <span ng-if="!vm.openingHours.tuesday.a_starting_time">{{'RESTAURANT_DETAIL.CLOSED OPTION' | translate }}</span>
                                </td>
                                <td>
                                    <span ng-if="vm.openingHours.tuesday.a_ending_time">{{vm.openingHours.tuesday.a_ending_time}}</span>
                                    <span ng-if="!vm.openingHours.tuesday.a_ending_time">{{'RESTAURANT_DETAIL.CLOSED OPTION' | translate }}</span>
                                </td>
                            </tr>
                            <tr>
                                <td translate="RESTAURANT_DETAIL.WEDNESDAY"></td>
                                <td>
                                    <span ng-if="vm.openingHours.wednesday.m_starting_time">{{vm.openingHours.wednesday.m_starting_time}}</span>
                                    <span ng-if="!vm.openingHours.wednesday.m_starting_time">{{'RESTAURANT_DETAIL.CLOSED OPTION' | translate }}</span>
                                </td>
                                <td>
                                    <span ng-if="vm.openingHours.wednesday.m_ending_time">{{vm.openingHours.wednesday.m_ending_time}}</span>
                                    <span ng-if="!vm.openingHours.wednesday.m_ending_time">{{'RESTAURANT_DETAIL.CLOSED OPTION' | translate }}</span>
                                </td>
                                <td>
                                    <span ng-if="vm.openingHours.wednesday.a_starting_time">{{vm.openingHours.wednesday.a_starting_time}}</span>
                                    <span ng-if="!vm.openingHours.wednesday.a_starting_time">{{'RESTAURANT_DETAIL.CLOSED OPTION' | translate }}</span>
                                </td>
                                <td>
                                    <span ng-if="vm.openingHours.wednesday.a_ending_time">{{vm.openingHours.wednesday.a_ending_time}}</span>
                                    <span ng-if="!vm.openingHours.wednesday.a_ending_time">{{'RESTAURANT_DETAIL.CLOSED OPTION' | translate }}</span>
                                </td>
                            </tr>
                            <tr>
                                <td translate="RESTAURANT_DETAIL.THURSDAY"></td>
                                <td>
                                    <span ng-if="vm.openingHours.thursday.m_starting_time">{{vm.openingHours.thursday.m_starting_time}}</span>
                                    <span ng-if="!vm.openingHours.thursday.m_starting_time">{{'RESTAURANT_DETAIL.CLOSED OPTION' | translate }}</span>
                                </td>
                                <td>
                                    <span ng-if="vm.openingHours.thursday.m_ending_time">{{vm.openingHours.thursday.m_ending_time}}</span>
                                    <span ng-if="!vm.openingHours.thursday.m_ending_time">{{'RESTAURANT_DETAIL.CLOSED OPTION' | translate }}</span>
                                </td>
                                <td>
                                    <span ng-if="vm.openingHours.thursday.a_starting_time">{{vm.openingHours.thursday.a_starting_time}}</span>
                                    <span ng-if="!vm.openingHours.thursday.a_starting_time">{{'RESTAURANT_DETAIL.CLOSED OPTION' | translate }}</span>
                                </td>
                                <td>
                                    <span ng-if="vm.openingHours.thursday.a_ending_time">{{vm.openingHours.thursday.a_ending_time}}</span>
                                    <span ng-if="!vm.openingHours.thursday.a_ending_time">{{'RESTAURANT_DETAIL.CLOSED OPTION' | translate }}</span>
                                </td>
                            </tr>
                            <tr>
                                <td translate="RESTAURANT_DETAIL.FRIDAY"></td>
                                <td>
                                    <span ng-if="vm.openingHours.friday.m_starting_time">{{vm.openingHours.friday.m_starting_time}}</span>
                                    <span ng-if="!vm.openingHours.friday.m_starting_time">{{'RESTAURANT_DETAIL.CLOSED OPTION' | translate }}</span>
                                </td>
                                <td>
                                    <span ng-if="vm.openingHours.friday.m_ending_time">{{vm.openingHours.friday.m_ending_time}}</span>
                                    <span ng-if="!vm.openingHours.friday.m_ending_time">{{'RESTAURANT_DETAIL.CLOSED OPTION' | translate }}</span>
                                </td>
                                <td>
                                    <span ng-if="vm.openingHours.friday.a_starting_time">{{vm.openingHours.friday.a_starting_time}}</span>
                                    <span ng-if="!vm.openingHours.friday.a_starting_time">{{'RESTAURANT_DETAIL.CLOSED OPTION' | translate }}</span>
                                </td>
                                <td>
                                    <span ng-if="vm.openingHours.friday.a_ending_time">{{vm.openingHours.friday.a_ending_time}}</span>
                                    <span ng-if="!vm.openingHours.friday.a_ending_time">{{'RESTAURANT_DETAIL.CLOSED OPTION' | translate }}</span>
                                </td>
                            </tr>
                            <tr>
                                <td translate="RESTAURANT_DETAIL.SATURDAY"></td>
                                <td>
                                    <span ng-if="vm.openingHours.saturday.m_starting_time">{{vm.openingHours.saturday.m_starting_time}}</span>
                                    <span ng-if="!vm.openingHours.saturday.m_starting_time">{{'RESTAURANT_DETAIL.CLOSED OPTION' | translate }}</span>
                                </td>
                                <td>
                                    <span ng-if="vm.openingHours.saturday.m_ending_time">{{vm.openingHours.saturday.m_ending_time}}</span>
                                    <span ng-if="!vm.openingHours.saturday.m_ending_time">{{'RESTAURANT_DETAIL.CLOSED OPTION' | translate }}</span>
                                </td>
                                <td>
                                    <span ng-if="vm.openingHours.saturday.a_starting_time">{{vm.openingHours.saturday.a_starting_time}}</span>
                                    <span ng-if="!vm.openingHours.saturday.a_starting_time">{{'RESTAURANT_DETAIL.CLOSED OPTION' | translate }}</span>
                                </td>
                                <td>
                                    <span ng-if="vm.openingHours.saturday.a_ending_time">{{vm.openingHours.saturday.a_ending_time}}</span>
                                    <span ng-if="!vm.openingHours.saturday.a_ending_time">{{'RESTAURANT_DETAIL.CLOSED OPTION' | translate }}</span>
                                </td>
                            </tr>
                            <tr>
                                <td translate="RESTAURANT_DETAIL.SUNDAY"></td>
                                <td>
                                    <span ng-if="vm.openingHours.sunday.m_starting_time">{{vm.openingHours.sunday.m_starting_time}}</span>
                                    <span ng-if="!vm.openingHours.sunday.m_starting_time">{{'RESTAURANT_DETAIL.CLOSED OPTION' | translate }}</span>
                                </td>
                                <td>
                                    <span ng-if="vm.openingHours.sunday.m_ending_time">{{vm.openingHours.sunday.m_ending_time}}</span>
                                    <span ng-if="!vm.openingHours.sunday.m_ending_time">{{'RESTAURANT_DETAIL.CLOSED OPTION' | translate }}</span>
                                </td>
                                <td>
                                    <span ng-if="vm.openingHours.sunday.a_starting_time">{{vm.openingHours.sunday.a_starting_time}}</span>
                                    <span ng-if="!vm.openingHours.sunday.a_starting_time">{{'RESTAURANT_DETAIL.CLOSED OPTION' | translate }}</span>
                                </td>
                                <td>
                                    <span ng-if="vm.openingHours.sunday.a_ending_time">{{vm.openingHours.sunday.a_ending_time}}</span>
                                    <span ng-if="!vm.openingHours.sunday.a_ending_time">{{'RESTAURANT_DETAIL.CLOSED OPTION' | translate }}</span>
                                </td>
                            </tr>
                            </tbody>

                        </table>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal" translate="UPLOAD.CLOSE"></button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div ng-if="!vm.reqLoading">
    <!--requestDetail Modals-->
    <div class="modal fade custom_modal" ng-repeat="getRequest in vm.getRequests track by $index" id="requestDetail{{getRequest.ID}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="container" ng-init="vm.getOrederDetailLength[getRequest.ID] = (getRequest.orders.request_order_detail | filter: requestOrderDetailStatusFilter ).length; vm.checkOrederDetailLength[getRequest.ID] == true">
            <div class="modal-dialog modal-lg" role="document" ng-class="(getRequest.status == 'N') ? 'new_request_modal' : 'pending_request_modal'">
                <div class="modal-content">
                    <div class="modal-body">
                        <div class="row container-fluid custom_container">
                            <div class="col-md-7">
                                <h5 class="pull-left"><label translate="CLIENT.REQUEST CONFIRMATION"></label></h5>
                            </div>
                            <div class="col-md-5">
                               <button type="button" class="close pull-right" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            </div>
                        </div>
                        <div class="row container-fluid custom_container">
                            <div class="col-md-2">
                                <h5 class="pull-left"><span class="inline" ng-repeat="detail in getRequest.orders.request_order_detail |limitTo:1">
                                    {{convertToDate(detail.serve_at) | date:'dd.MM.y'}}
                                </span></h5>
                            </div>
                            <div class="col-md-2">
                               <h5> <span translate="CLIENT.ONO"></span> {{getRequest.orders.ID}}</h5>
                            </div>
                        </div>
                        <div class="row container-fluid custom_container" ng-if="getRequest.status!='N'">
                            <div class="col-md-4 request_meal container_head">
                                <h5 class="text-center"><label translate="CLIENT.REQUIRED"></label></h5>
                            </div>
                            <div class="col-md-4 confirm_meal container_head">
                                <h5 class="text-center"><label translate="CLIENT.CONFIRMED"></label></h5>
                            </div>
                        </div>
                        <div ng-repeat="order_detail in getRequest.orders.request_order_detail track by $index" ng-show="!vm.cancelOrderDetail[order_detail.ID]" ng-init="vm.cancelOrederDetail[order_detail.ID] = (order_detail.status == 3) ? true : false">
                            <div ng-if="getRequest.status != 'N'" class="container-fluid row custom_container " ng-init="vm.orderStrikethrough[order_detail.ID] = (order_detail.status == 3) ? 'strikethrough' : '';">
                                <div class="col-sm-4 request_meal">
                                    <div class="row custom_row">
                                        <div class="col-md-4">
                                            <div class="orderdetail_{{order_detail.ID}}" ng-class="vm.orderStrikethrough[order_detail.ID]" ng-if="!order_detail.side_dish || order_detail.side_dish == 0">
                                             {{convertToDate(order_detail.serve_at) | date:'HH:mm'}}
                                            </div>
                                        </div>
                                        <div class="col-md-8">
                                            <span ng-class="vm.orderStrikethrough[order_detail.ID]" class="pull-left orderdetail_{{order_detail.ID}}"> {{order_detail.x_number}}x {{order_detail.request_menu.name}} </span>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-4 confirm_meal">
                                    <div class="row custom_row">
                                        <div class="col-md-4">
                                            <div ng-class="vm.orderStrikethrough[order_detail.ID]" class="orderdetail_{{order_detail.ID}}">
                                            <span ng-if="!order_detail.side_dish || order_detail.side_dish == 0">
                                             {{convertToDate(order_detail.serve_at) | date:'HH:mm'}}
                                            </span>  
                                            </div>
                                        </div>
                                        <div class="col-md-8">
                                            <div ng-class="vm.orderStrikethrough[order_detail.ID]" class="orderdetail_{{order_detail.ID}}">
                                            <span ng-class="(order_detail.request_menu.confirmed_name!=order_detail.request_menu.name) ? 'confirm_name' : ''" ng-if="order_detail.request_menu.confirmed_name">{{order_detail.x_number}}x   {{order_detail.request_menu.confirmed_name}}</span> <span ng-if="!order_detail.request_menu.confirmed_name">{{order_detail.x_number}}x   {{order_detail.request_menu.name}}</span> 
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-4 action_sec">
                                    <div class="row custom_row">
                                        <div class="col-md-4">
                                            <div ng-class="vm.orderStrikethrough[order_detail.ID]" class="orderdetail_{{order_detail.ID}}">
                                            {{order_detail.x_number}}x  {{order_detail.price}} {{order_detail.currency}}
                                            </div>
                                        </div>                                
                                        <div class="col-md-4" ng-show="order_detail.status != 3 && vm.cancelOrederDetail[order_detail.ID] == false">
                                            <button 
                                            ng-if="( order_detail.request_param 
                                            && (order_detail.request_param.request_min_servings != 0 
                                            && order_detail.request_param.request_deadline != '0000-00-00 00:00:00'  
                                            && order_detail.request_param.request_from != '00:00:00'
                                            && order_detail.request_param.request_to != '00:00:00') )
                                            || (order_detail.request_menu.request_ingredient.length > 0 ) 
                                            || (order_detail.comment && order_detail.comment != '<br>') "
                                            class="btn btn-info btn-sm pull-right" 
                                            ng-click="order_detail[order_detail.ID].visible = !order_detail[order_detail.ID].visible"
                                            translate="CLIENT.DETAILSNEW"></button>
                                            <button ng-hide="( order_detail.request_param 
                                            && (order_detail.request_param.request_min_servings != 0 
                                            && order_detail.request_param.request_deadline != '0000-00-00 00:00:00'  
                                            && order_detail.request_param.request_from != '00:00:00'
                                            && order_detail.request_param.request_to != '00:00:00') )
                                            || (order_detail.request_menu.request_ingredient.length > 0 ) 
                                            || (order_detail.comment && order_detail.comment != '<br>') "
                                            class="btn btn-info btn-sm" 
                                            translate="CLIENT.NODETAILSNEW" ng-disabled="true"></button>
                                        </div>
                                        <div ng-repeat="detail in getRequest.orders.request_order_detail |limitTo:1" ng-show="vm.cancelOrederDetail[order_detail.ID] == false">
                                            <div ng-if="checkPreDate(detail.serve_at)" class="col-md-4" ng-show="requestTab=='newRequests' && order_detail.status != 3">
                                                <button class="btn btn-info btn-sm btn-danger pull-left" ng-click="cancelMeal(order_detail.ID, getRequest.ID); vm.clientNewRequest[getRequest.ID] = true; vm.clientNewRequestStatue = false">
                                                    <i class="fa fa-times"></i>
                                                    <span translate="CLIENT.CANCELNEW"></span>
                                                </button>
                                            </div>
                                        </div>

                                        <div class="col-md-3" ng-show="order_detail.status == 3 || vm.cancelOrederDetail[order_detail.ID] == true">
                                            <button class="btn btn-info btn-sm btn-danger" ng-disabled="order_detail.status == 3">
                                                <span translate="PREREG.CANCELLED"></span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div ng-if="getRequest.status == 'N'" class="container-fluid row custom_container new_custom_container">
                                <div class="col-md-4">
                                    <div class="orderdetail_{{order_detail.ID}}">
                                    <span  ng-if="!order_detail.side_dish || order_detail.side_dish == 0">
                                     {{convertToDate(order_detail.serve_at) | date:'HH:mm'}}
                                    </span>  <span ng-class="(order_detail.request_menu.confirmed_name!=order_detail.request_menu.name) ? 'confirm_name' : ''" ng-if="order_detail.request_menu.confirmed_name">{{order_detail.request_menu.confirmed_name}}</span> <span ng-if="!order_detail.request_menu.confirmed_name">{{order_detail.request_menu.name}}</span> 
                                    </div>
                                </div>
                                <div class="col-md-8">
                                    <div class="col-md-4">
                                        <div class="orderdetail_{{order_detail.ID}}">
                                        {{order_detail.x_number}}x  {{order_detail.price}}  {{order_detail.currency}}
                                        </div>
                                    </div>                                
                                    <div class="col-md-4" ng-show="order_detail.status != 3 && vm.cancelOrederDetail[order_detail.ID] == false">
                                        <button 
                                        ng-if="( order_detail.request_param 
                                        && (order_detail.request_param.request_min_servings != 0 
                                        && order_detail.request_param.request_deadline != '0000-00-00 00:00:00'  
                                        && order_detail.request_param.request_from != '00:00:00'
                                        && order_detail.request_param.request_to != '00:00:00') )
                                        || (order_detail.request_menu.request_ingredient.length > 0 ) 
                                        || (order_detail.comment && order_detail.comment != '<br>') "
                                        class="btn btn-info btn-sm pull-right" 
                                        ng-click="order_detail[order_detail.ID].visible = !order_detail[order_detail.ID].visible"
                                        translate="CLIENT.DETAILSNEW"></button>
                                        <button ng-hide="( order_detail.request_param 
                                        && (order_detail.request_param.request_min_servings != 0 
                                        && order_detail.request_param.request_deadline != '0000-00-00 00:00:00'  
                                        && order_detail.request_param.request_from != '00:00:00'
                                        && order_detail.request_param.request_to != '00:00:00') )
                                        || (order_detail.request_menu.request_ingredient.length > 0 ) 
                                        || (order_detail.comment && order_detail.comment != '<br>') "
                                        class="btn btn-info btn-sm pull-right" 
                                        translate="CLIENT.NODETAILSNEW" ng-disabled="true"></button>
                                    </div>
                                    <div ng-repeat="detail in getRequest.orders.request_order_detail |limitTo:1" ng-show="vm.cancelOrederDetail[order_detail.ID] == false" >
                                        <div ng-if="checkPreDate(detail.serve_at)" class="col-md-4" ng-show="requestTab=='newRequests' && order_detail.status != 3">
                                            <button class="btn btn-info btn-sm btn-danger pull-left" ng-click="cancelMeal(order_detail.ID, getRequest.ID); vm.clientNewRequest[getRequest.ID] = true; vm.clientNewRequestStatue = false">
                                                <i class="fa fa-times"></i>
                                                <span translate="CLIENT.CANCELNEW"></span>
                                            </button>
                                        </div>
                                    </div>

                                    <div class="col-md-4" ng-show="order_detail.status == 3  || vm.cancelOrederDetail[order_detail.ID] == true">
                                        <button class="btn btn-info btn-sm btn-danger" ng-disabled="order_detail.status == 3">
                                            <span translate="PREREG.CANCELLED"></span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <hr>
                            <div uib-collapse="!order_detail[order_detail.ID].visible" ng-init="order_detail[order_detail.ID].visible = (getRequest.unread == 'C' && ( (order_detail.request_param.request_min_servings != 0 && order_detail.request_param.request_deadline != '0000-00-00 00:00:00' && order_detail.request_param.request_from != '00:00:00' && order_detail.request_param.request_to != '00:00:00') || (messageSplit(order_detail.comment,0) != '') ) ) ? !order_detail[order_detail.ID].visible : order_detail[order_detail.ID].visible; 

                            order_detail_serve[order_detail.ID] = (getRequest.unread == 'C' && ( (order_detail.request_param.request_min_servings != 0 && order_detail.request_param.request_deadline != '0000-00-00 00:00:00' && order_detail.request_param.request_from != '00:00:00' && order_detail.request_param.request_to != '00:00:00') || (messageSplit(order_detail.comment,0) != '') ) ) ? 'exist' : 'not_exist'" >
                                <div
                                ng-if="order_detail_serve[order_detail.ID] == 'not_exist'"
                                ng-repeat="ingredient_status in order_detail.request_menu.request_ingredient | filter: {status_confirmed: 'U'} | limitTo:1"
                                class="more"
                                ng-init="order_detail[order_detail.ID].visible = (getRequest.unread == 'C' && ingredient_status.status_confirmed == 'U') ? !order_detail[order_detail.ID].visible : order_detail[order_detail.ID].visible" >
                                </div>
                                <div ng-if="getRequest.status != 'N'">
                                    <div class="row custom_container ing_listing" ng-repeat="ingredient_detail in order_detail.request_menu.request_ingredient track by $index" style="margin-top: 5px;">
                                        <div ng-if="ingredient_detail.duplicate_of_ingredient">
                                            <div class="col-md-8">
                                                <div class="row">
                                                    <div class="col-sm-offset-2 col-md-4">
                                                        <span class="pull-left strikethrough" ng-init="vm.unit[ingredient_detail.ID] = (ingredient_detail.unit) ? 'CLIENT.'+ingredient_detail.unit : '';">
                                                            {{ingredient_detail.amount}}
                                                            {{vm.unit[ingredient_detail.ID] | translate }}
                                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                            {{ingredient_detail.ingredient.name}}
                                                        </span>
                                                    </div>
                                                    <div class="col-sm-offset-2  col-md-4">
                                                        <span class="pull-left" ng-init="vm.dunit[ingredient_detail.duplicate_of_ingredient.ID] = (ingredient_detail.duplicate_of_ingredient.unit) ? 'CLIENT.'+ingredient_detail.duplicate_of_ingredient.unit : '';"> 
                                                            {{ingredient_detail.duplicate_of_ingredient.amount}}
                                                            {{vm.dunit[ingredient_detail.duplicate_of_ingredient.ID] | translate }}
                                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                            {{ingredient_detail.duplicate_of_ingredient.ingredient.name}}
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div ng-if="!ingredient_detail.duplicate_of_ingredient && ingredient_detail.status_confirmed == 'D'">
                                            <div class="col-md-8">
                                                <div class="row" ng-init="vm.unit[ingredient_detail.ID] = (ingredient_detail.unit) ? 'CLIENT.'+ingredient_detail.unit : '';">
                                                    <div class="col-sm-offset-2 col-md-4">
                                                        <span class="pull-left strikethrough"> 
                                                            {{ingredient_detail.amount}}
                                                            {{vm.unit[ingredient_detail.ID] | translate }}
                                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                            {{ingredient_detail.ingredient.name}}
                                                        </span>
                                                    </div>
                                                    <div class="col-sm-offset-2  col-md-4">
                                                        <span class="pull-left strikethrough"> 
                                                            {{ingredient_detail.amount}}
                                                            {{vm.unit[ingredient_detail.ID] | translate }}
                                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                            {{ingredient_detail.ingredient.name}}
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div ng-if="(ingredient_detail.duplicate_of == 0 || ingredient_detail.duplicate_of_ingredient.duplicate_of == '') && (ingredient_detail.status_confirmed == 'C')">
                                            <div class="col-md-8">
                                                <div class="row" ng-init="vm.unit[ingredient_detail.ID] = (ingredient_detail.unit) ? 'CLIENT.'+ingredient_detail.unit : '';">
                                                    <div class="col-sm-offset-2 col-md-4">
                                                        <span class="pull-left"> 
                                                            {{ingredient_detail.amount}}
                                                            {{vm.unit[ingredient_detail.ID] | translate }}
                                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                            {{ingredient_detail.ingredient.name}}
                                                        </span>
                                                    </div>
                                                    <div class="col-sm-offset-2  col-md-4">
                                                        <span class="pull-left"> 
                                                            {{ingredient_detail.amount}}
                                                            {{vm.unit[ingredient_detail.ID] | translate }}
                                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                            {{ingredient_detail.ingredient.name}}
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div ng-if="!ingredient_detail.duplicate_of_ingredient && ingredient_detail.status_confirmed == 'N'">
                                            <div class="col-md-8">
                                                <div class="row" ng-init="vm.unit[ingredient_detail.ID] = (ingredient_detail.unit) ? 'CLIENT.'+ingredient_detail.unit : '';">
                                                    <div class="col-sm-offset-2 col-md-4">
                                                        <span class="pull-left"> 
                                                            {{ingredient_detail.amount}}
                                                            {{vm.unit[ingredient_detail.ID] | translate }}
                                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                            {{ingredient_detail.ingredient.name}}
                                                        </span>
                                                    </div>
                                                    <div class="col-sm-offset-2  col-md-4">
                                                        <span class="pull-left"> 
                                                            {{ingredient_detail.amount}}
                                                            {{vm.unit[ingredient_detail.ID] | translate }}
                                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                            {{ingredient_detail.ingredient.name}}
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div ng-if="getRequest.status == 'N'">
                                    <div class="row custom_container" ng-repeat="ingredient_detail in order_detail.request_menu.request_ingredient track by $index" style="margin-top: 5px;">
                                        <div ng-if="!ingredient_detail.duplicate_of_ingredient && ingredient_detail.status_confirmed == 'N'">
                                            <div class="col-md-8">
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <span class="cust_centered" ng-init="vm.unit[ingredient_detail.ID] = (ingredient_detail.unit) ? 'CLIENT.'+ingredient_detail.unit : '';"> 
                                                            {{ingredient_detail.amount}}
                                                            {{vm.unit[ingredient_detail.ID] | translate }}
                                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                            {{ingredient_detail.ingredient.name}}
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row custom_container meal_comment_sec">
                                    <div ng-if="getRequest.status == 'N'">
                                        <div class="col-md-8"  ng-show="order_detail.comment && order_detail.comment != '<br>'">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <label translate="CLIENT.DESCRIPTION"></label>
                                                    <div ng-if="mySplit(order_detail.comment,0)!==undefined && mySplit(order_detail.comment,1)!==undefined">
                                                        {{mySplit(order_detail.comment,1)}}
                                                    </div>
                                                    <div ng-if="mySplit(order_detail.comment,0)!==undefined && mySplit(order_detail.comment,1)==undefined">
                                                        {{mySplit(order_detail.comment,0)}}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div ng-if="getRequest.status != 'N'">
                                        <div class="col-md-4">
                                            <div class="row" ng-show="order_detail.comment && order_detail.comment != '<br>'">
                                                <div class="col-md-12">
                                                    <label translate="CLIENT.DESCRIPTION"></label>
                                                    <div ng-if="mySplit(order_detail.comment,0)!==undefined && mySplit(order_detail.comment,1)!==undefined">
                                                        {{mySplit(order_detail.comment,1)}}
                                                    </div>
                                                    <div ng-if="mySplit(order_detail.comment,0)!==undefined && mySplit(order_detail.comment,1)==undefined">
                                                        {{mySplit(order_detail.comment,0)}}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-5">
                                            <div class="form-group" ng-show="order_detail.comment && order_detail.comment != '<br>'">
                                                <label translate="CLIENT.DESCRIPTION"></label><br>
                                                <div ng-if="mySplit(order_detail.comment,0)!==undefined && mySplit(order_detail.comment,1)!==undefined">
                                                    <div class="description_box confirm_name" ng-if="mySplit(order_detail.comment,0)" ng-show="order_detail.comment">
                                                        {{mySplit(order_detail.comment,0)}}
                                                    </div>
                                                </div>
                                            </div>
                                            <div ng-if="!order_detail.side_dish || order_detail.side_dish == 0" ng-show="order_detail.request_param.request_min_servings != 0 && order_detail.request_param.request_deadline != '0000-00-00 00:00:00' && order_detail.request_param.request_from != '00:00:00' && order_detail.request_param.request_to != '00:00:00'">
                                                <div class="row form-group minimumserving" ng-show="order_detail.request_param">
                                                    <div class="col-md-7 pull-left">
                                                        <span translate="CLIENT.MINIMUM SERVINGS"></span>
                                                    </div>
                                                    <div class="col-md-5">
                                                        {{order_detail.request_param.request_min_servings}} (<span translate="CLIENT.MAX"></span>.  {{order_detail.request_param.request_max_servings}} )
                                                    </div> 
                                                </div>
                                                <div class="row dealine" ng-show="order_detail.request_param">
                                                    <div class="col-md-7 pull-left">
                                                        <span translate="CLIENT.DEADLINE"></span>
                                                    </div>
                                                    <div class="col-md-5">
                                                        <label>{{convertToDate(order_detail.request_param.request_deadline) | date:'dd.MM. HH:mm'}}</label>
                                                    </div> 
                                                </div>
                                                <div class="row serve_at_time" ng-show="order_detail.request_param">
                                                    <div class="col-md-7 pull-left">
                                                        <label translate="CLIENT.SERVED"></label>
                                                    </div>
                                                    <div class="col-md-5">
                                                        <label>{{convertToTime(order_detail.request_param.request_from) | date:'HH:mm'}}  - {{convertToTime(order_detail.request_param.request_to) | date:'HH:mm'}}</label>
                                                    </div> 
                                                </div>
                                                <div class="row free_serving" ng-show="order_detail.request_param">
                                                    <div class="col-md-12 request_free_every" ng-if="order_detail.request_param.request_free_every > 0">
                                                        <span translate="CLIENT.ONE FREE SERVING"></span>
                                                        {{ order_detail.request_param.request_free_every}}
                                                        <span translate="CLIENT.SERVINGS"></span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <hr ng-if="getRequest.status == 'N'">
                                <br>
                            </div>
                        </div>
                        <div class="row container-fluid custom_container">
                            <div ng-if="getRequest.status!='N' && getRequest.orders.comment != '' && getRequest.orders.comment != '<br>' " >
                                <div class="col-md-4 request_meal comment_sec">
                                    <label class="control-label" translate="CLIENT.MESSAGE" ng-show="getRequest.orders.comment"></label>
                                    <div ng-if="messageSplit(getRequest.orders.comment,0)!==undefined">
                                        {{messageSplit(getRequest.orders.comment,0)}}
                                    </div>
                                </div>
                                <div class="col-md-4 confirm_meal comment_sec">
                                    <label class="control-label" translate="CLIENT.MESSAGE" ng-show="getRequest.orders.comment" ></label>
                                    <div ng-show="getRequest.orders.comment">
                                        <div class="" >
                                            {{messageSplit(getRequest.orders.comment,1)}}
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-8" ng-if="getRequest.status!='N' && (getRequest.orders.comment == '' || getRequest.orders.comment == '<br>') "></div>

                            <div class="col-md-4"  ng-if="getRequest.status!='N'" ng-show="requestTab!='cancelledRequests'">
                                <div class="row">
                                    <div ng-repeat="detail in getRequest.orders.request_order_detail |limitTo:1">
                                        <div ng-if="checkPreDate(detail.serve_at)" class="col-md-10 v-center" ng-show="getRequest.status == 'S' && requestTab=='newRequests'">
                                            <button type="button" 
                                                class="btn btn-lg pull-right confirm_button" 
                                                ng-init="vm.confirmClass[getRequest.ID] = 'btn-primary'; vm.confirmStatus[getRequest.ID] = false;" 
                                                ng-disabled="vm.checkOrederDetailLength[getRequest.ID] == false"
                                                ng-class="vm.confirmClass[getRequest.ID]"
                                                ng-click="vm.confirmClass[getRequest.ID] = (vm.confirmClass[getRequest.ID] == 'btn-primary') ? 'btn-success' : 'btn-primary'; vm.confirmStatus[getRequest.ID] = (vm.confirmStatus[getRequest.ID] == false)? true : false;">
                                                <span translate="CLIENT.CONFIRM"></span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-12" ng-if="getRequest.status == 'N'">
                                <label class="control-label" translate="CLIENT.MESSAGE"></label>
                                <div class="row">
                                    <div class="col-md-6">
                                        <textarea ng-init="vm.confirmRequest_comment[getRequest.ID] = getRequest.orders.comment" name="comment" ng-model="vm.confirmRequest_comment[getRequest.ID]" class="form-control" rows="3" ng-value="vm.confirmRequest_comment[getRequest.ID]"></textarea>
                                    </div>
                                    <div ng-repeat="detail in getRequest.orders.request_order_detail |limitTo:1" class="v-center client_action_box">
                                        <div ng-if="checkPreDate(detail.serve_at)" class="col-md-3">
                                            <button type="button" 
                                                class="btn btn-lg pull-right" 
                                                ng-init="vm.confirmClass[getRequest.ID] = 'btn-primary'; vm.confirmStatus[getRequest.ID] = false; m.checkOrederDetailLength[getRequest.ID] == true; " 
                                                ng-disabled="vm.checkOrederDetailLength[getRequest.ID] == false;"
                                                ng-class="vm.confirmClass[getRequest.ID]"
                                                ng-click="vm.confirmClass[getRequest.ID] = (vm.confirmClass[getRequest.ID] == 'btn-primary') ? 'btn-success' : 'btn-primary'; vm.confirmStatus[getRequest.ID] = (vm.confirmStatus[getRequest.ID] == false)? true : false;">
                                                <span translate="CLIENT.CONFIRM"></span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-danger" target="_blank"  translate="CLIENT.PRINT_REQUEST" ng-click="vm.printRequest(getRequest.ID)"></button>
                        <button type="button" class="btn btn-default" data-dismiss="modal" translate="CLIENT.CLOSE"></button>
                        <div class="inline" ng-repeat="detail in getRequest.orders.request_order_detail |limitTo:1">
                            <button ng-if="checkPreDate(detail.serve_at)" ng-show="requestTab=='newRequests'" type="button" class="btn btn-primary" ng-click="requestSaveChanges($index, getRequest.ID, getRequest.orders.ID); vm.confirm = getRequest.ID" ng-disabled="vm.confirmStatus[getRequest.ID] == false;">
                                <i ng-show="vm.confirm == getRequest.ID" class="fa fa-spinner fa-spin"></i>
                                <span translate="CLIENT.SAVE CHANGES" ></span>
                            </button>
                            <button ng-if="checkPreDate(detail.serve_at) && getRequest.status != 'N'" ng-show="requestTab=='newRequests' && getRequest.status == 'N'" type="button" class="btn btn-primary" ng-click="requestSaveChanges($index, getRequest.ID, getRequest.orders.ID); vm.confirm = getRequest.ID" ng-disabled="vm.clientNewRequest[getRequest.ID] == false || vm.clientNewRequestStatue == true">
                                <i ng-show="vm.confirm == getRequest.ID" class="fa fa-spinner fa-spin"></i>
                                <span translate="CLIENT.SAVE CHANGES" ></span>
                            </button>
                            <button ng-if="checkPreDate(detail.serve_at)" type="button" class="btn btn-sm btn-danger" ng-click="vm.cancelRequest(getRequest.ID)">
                                <i ng-show="cancelId== getRequest.ID" class="fa fa-spinner fa-spin"></i>
                                <i class="fa fa-times"></i>
                                <span translate="CLIENT.CANCELNEW"></span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div ng-if="!vm.reqconfLoading">
    <!--Confirm requestDetail Modals-->
    <div class="modal fade custom_modal other_modal" ng-repeat="getRequest in vm.getConfirmRequests track by $index" id="requestDetail{{getRequest.ID}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="container">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-body">
                        <div class="row container-fluid custom_container">
                            <div class="col-md-7">
                                <h5 class="pull-left"><label translate="CLIENT.REQUEST CONFIRMATION"></label></h5>
                            </div>
                            <div class="col-md-5">
                               <button type="button" class="close pull-right" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            </div>
                        </div>
                        <div class="row container-fluid custom_container">
                            <div class="col-md-2">
                                <h5 class="pull-left"><span class="inline" ng-repeat="detail in getRequest.orders.request_order_detail |limitTo:1">
                                    {{convertToDate(detail.serve_at) | date:'dd.MM.y'}}
                                </span></h5>
                            </div>
                            <div class="col-md-2">
                               <h5> <span translate="CLIENT.ONO"></span> {{getRequest.orders.ID}}</h5>
                            </div>
                        </div>
                        <div class="row container-fluid custom_container">
                            <div class="col-md-4 request_meal container_head">
                                <h5 class="text-center"><label translate="CLIENT.REQUIRED"></label></h5>
                            </div>
                            <div class="col-md-4 confirm_meal container_head">
                                <h5 class="text-center"><label translate="CLIENT.CONFIRMED"></label></h5>
                            </div>
                        </div>
                        <div ng-repeat="order_detail in getRequest.orders.request_order_detail | filter: requestMealStatusFilter track by $index" ng-show="!vm.cancelOrderDetail[order_detail.ID]" ng-init="vm.orderStrikethrough[order_detail.ID] = (order_detail.status == 3) ? 'strikethrough' : '';">
                            <div class="container-fluid row custom_container">
                                <div class="col-sm-4 request_meal">
                                    <div class="row custom_row">
                                        <div class="col-md-4">
                                             <div ng-class="vm.orderStrikethrough[order_detail.ID]" ng-if="!order_detail.side_dish || order_detail.side_dish == 0">
                                             {{convertToDate(order_detail.serve_at) | date:'HH:mm'}}
                                            </div>
                                        </div>
                                        <div class="col-md-8">
                                            <span ng-class="vm.orderStrikethrough[order_detail.ID]" class="pull-left"> {{order_detail.x_number}}x {{order_detail.request_menu.name}} </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 confirm_meal">
                                    <div class="row custom_row">
                                        <div class="col-md-4">
                                            <div ng-class="vm.orderStrikethrough[order_detail.ID]">
                                            <span ng-if="!order_detail.side_dish || order_detail.side_dish == 0">
                                             {{convertToDate(order_detail.serve_at) | date:'HH:mm'}}
                                            </span>  
                                            </div>
                                        </div>
                                        <div class="col-md-8">    
                                            <div ng-class="vm.orderStrikethrough[order_detail.ID]">
                                            <span ng-class="(order_detail.request_menu.confirmed_name!=order_detail.request_menu.name) ? 'confirm_name' : ''" ng-if="order_detail.request_menu.confirmed_name">{{order_detail.x_number}}x  {{order_detail.request_menu.confirmed_name}}</span> <span ng-if="!order_detail.request_menu.confirmed_name">{{order_detail.x_number}}x   {{order_detail.request_menu.name}}</span> 
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-4 action_sec">
                                    <div class="row custom_row">
                                        <div class="col-md-6">
                                            <div ng-class="vm.orderStrikethrough[order_detail.ID]">
                                            {{order_detail.x_number}}x  {{order_detail.price}} <span>{{vm.currentUserCurrency}}</span> 
                                            </div>
                                        </div>                                
                                        <div class="col-md-3" ng-show="order_detail.status != 3">
                                            <button 
                                            ng-if="( order_detail.request_param 
                                            && (order_detail.request_param.request_min_servings != 0 
                                            && order_detail.request_param.request_deadline != '0000-00-00 00:00:00'  
                                            && order_detail.request_param.request_from != '00:00:00'
                                            && order_detail.request_param.request_to != '00:00:00') )
                                            || (order_detail.request_menu.request_ingredient.length > 0 ) 
                                            || (order_detail.comment && order_detail.comment != '<br>') "
                                            class="btn btn-info btn-sm" 
                                            ng-click="order_detail[order_detail.ID].visible = !order_detail[order_detail.ID].visible" 
                                            translate="CLIENT.DETAILSNEW"></button>
                                            <button ng-hide="( order_detail.request_param 
                                            && (order_detail.request_param.request_min_servings != 0 
                                            && order_detail.request_param.request_deadline != '0000-00-00 00:00:00'  
                                            && order_detail.request_param.request_from != '00:00:00'
                                            && order_detail.request_param.request_to != '00:00:00') )
                                            || (order_detail.request_menu.request_ingredient.length > 0 ) 
                                            || (order_detail.comment && order_detail.comment != '<br>') "
                                            class="btn btn-info btn-sm" 
                                            translate="CLIENT.NODETAILSNEW" ng-disabled="true"></button>
                                        </div>
                                        <div class="col-md-3" ng-show="requestTab=='newRequests' && order_detail.status != 3">
                                            <button class="btn btn-info btn-sm btn-danger" ng-click="vm.cancelOrderDetail[order_detail.ID] = true; cancelMeal(order_detail.ID, getRequest.ID); vm.clientNewRequest[getRequest.ID] = true; vm.clientNewRequestStatue = false">
                                                <i class="fa fa-times"></i>
                                                <span translate="CLIENT.CANCELNEW"></span>
                                            </button>
                                        </div>
                                        <div class="col-md-3" ng-show="order_detail.status == 3">
                                            <button class="btn btn-info btn-sm btn-danger" ng-disabled="order_detail.status == 3">
                                                <span translate="PREREG.CANCELLED"></span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <hr>
                            <div class="more" uib-collapse="!order_detail[order_detail.ID].visible" ng-init="order_detail[order_detail.ID].visible = (getRequest.unread == 'C' && ( (order_detail.request_param.request_min_servings != 0 && order_detail.request_param.request_deadline != '0000-00-00 00:00:00' && order_detail.request_param.request_from != '00:00:00' && order_detail.request_param.request_to != '00:00:00') || (messageSplit(order_detail.comment,0) != '') ) ) ? !order_detail[order_detail.ID].visible : order_detail[order_detail.ID].visible;" >
                                <div class="row custom_container ing_listing" ng-repeat="ingredient_detail in order_detail.request_menu.request_ingredient track by $index" style="margin-top: 5px;">
                                    <div ng-if="ingredient_detail.duplicate_of_ingredient">
                                        <div class="col-md-8">
                                            <div class="row">
                                                <div class="col-sm-offset-2 col-md-4">
                                                    <span class="pull-left strikethrough" ng-init="vm.unit[ingredient_detail.ID] = (ingredient_detail.unit) ? 'CLIENT.'+ingredient_detail.unit : '';"> 
                                                        {{ingredient_detail.amount}}
                                                        {{vm.unit[ingredient_detail.ID] | translate }}
                                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                        {{ingredient_detail.ingredient.name}}
                                                    </span>
                                                </div>
                                                <div class="col-sm-offset-2  col-md-4">
                                                    <span class="pull-left" ng-init="vm.dunit[ingredient_detail.duplicate_of_ingredient.ID] = (ingredient_detail.duplicate_of_ingredient.unit) ? 'CLIENT.'+ingredient_detail.duplicate_of_ingredient.unit : '';"> 
                                                        {{ingredient_detail.duplicate_of_ingredient.amount}}
                                                        {{vm.dunit[ingredient_detail.duplicate_of_ingredient.ID] | translate }}
                                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                        {{ingredient_detail.duplicate_of_ingredient.ingredient.name}}
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div ng-if="!ingredient_detail.duplicate_of_ingredient && ingredient_detail.status_confirmed == 'D'">
                                        <div class="col-md-8">
                                            <div class="row" ng-init="vm.unit[ingredient_detail.ID] = (ingredient_detail.unit) ? 'CLIENT.'+ingredient_detail.unit : '';">
                                                <div class="col-sm-offset-2 col-md-4">
                                                    <span class="pull-left strikethrough"> 
                                                        {{ingredient_detail.amount}}
                                                        {{vm.unit[ingredient_detail.ID] | translate }}
                                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                        {{ingredient_detail.ingredient.name}}
                                                    </span>
                                                </div>
                                                <div class="col-sm-offset-2  col-md-4">
                                                    <span class="pull-left strikethrough"> 
                                                        {{ingredient_detail.amount}}
                                                        {{vm.unit[ingredient_detail.ID] | translate }}
                                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                        {{ingredient_detail.ingredient.name}}
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div ng-if="(ingredient_detail.duplicate_of == 0 || ingredient_detail.duplicate_of_ingredient.duplicate_of == '') && (ingredient_detail.status_confirmed == 'C')">
                                        <div class="col-md-8">
                                            <div class="row" ng-init="vm.unit[ingredient_detail.ID] = (ingredient_detail.unit) ? 'CLIENT.'+ingredient_detail.unit : '';">
                                                <div class="col-sm-offset-2 col-md-4">
                                                    <span class="pull-left"> 
                                                        {{ingredient_detail.amount}}
                                                        {{vm.unit[ingredient_detail.ID] | translate }}
                                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                        {{ingredient_detail.ingredient.name}}
                                                    </span>
                                                </div>
                                                <div class="col-sm-offset-2  col-md-4">
                                                    <span class="pull-left"> 
                                                        {{ingredient_detail.amount}}
                                                        {{vm.unit[ingredient_detail.ID] | translate }}
                                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                        {{ingredient_detail.ingredient.name}}
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <br>
                                </div>
                                <div class="row custom_container meal_comment_sec">
                                    <div class="col-md-4">
                                        <div class="row" ng-show="order_detail.comment && order_detail.comment != '<br>'">
                                            <div class="col-md-12">
                                                <label translate="CLIENT.DESCRIPTION"></label>
                                                <div ng-if="mySplit(order_detail.comment,0)!==undefined && mySplit(order_detail.comment,1)!==undefined">
                                                    {{mySplit(order_detail.comment,1)}}
                                                </div>
                                                <div ng-if="mySplit(order_detail.comment,0)!==undefined && mySplit(order_detail.comment,1)==undefined">
                                                    {{mySplit(order_detail.comment,0)}}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-5">
                                        <div class="form-group" ng-show="order_detail.comment && order_detail.comment != '<br>'">
                                            <div class="">
                                                <label translate="CLIENT.DESCRIPTION"></label>
                                                <div ng-if="mySplit(order_detail.comment,0)!==undefined && mySplit(order_detail.comment,1)!==undefined">
                                                    <div class="description_box confirm_name" ng-if="mySplit(order_detail.comment,0)" ng-show="order_detail.comment">
                                                        {{mySplit(order_detail.comment,0)}}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div ng-if="!order_detail.side_dish || order_detail.side_dish == 0" ng-show="order_detail.request_param.request_min_servings != 0 && order_detail.request_param.request_deadline != '0000-00-00 00:00:00' && order_detail.request_param.request_from != '00:00:00' && order_detail.request_param.request_to != '00:00:00'">
                                            <div class="row form-group minimumserving" ng-show="order_detail.request_param">
                                                <div class="col-md-7">
                                                    <span translate="CLIENT.MINIMUM SERVINGS"></span>
                                                </div>
                                                <div class="col-md-5">
                                                    {{order_detail.request_param.request_min_servings}} (<span translate="CLIENT.MAX"></span>.  {{order_detail.request_param.request_max_servings}} )
                                                </div> 
                                            </div>
                                            <div class="row dealine" ng-show="order_detail.request_param">
                                                <div class="col-md-7">
                                                    <span translate="CLIENT.DEADLINE"></span>
                                                </div>
                                                <div class="col-md-5">
                                                    <label>{{convertToDate(order_detail.request_param.request_deadline) | date:'dd.MM. HH:mm'}}</label>
                                                </div> 
                                            </div>
                                            <div class="row serve_at_time" ng-show="order_detail.request_param">
                                                <div class="col-md-7">
                                                    <label translate="CLIENT.SERVED"></label>
                                                </div>
                                                <div class="col-md-5">
                                                    <label>{{convertToTime(order_detail.request_param.request_from) | date:'HH:mm'}}  - {{convertToTime(order_detail.request_param.request_to) | date:'HH:mm'}}</label>
                                                </div> 
                                            </div>
                                            <div class="row free_serving" ng-show="order_detail.request_param">
                                                <div class="col-md-12 request_free_every" ng-if="order_detail.request_param.request_free_every > 0">
                                                    <span translate="CLIENT.ONE FREE SERVING"></span>
                                                    {{ order_detail.request_param.request_free_every}}
                                                    <span translate="CLIENT.SERVINGS"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row container-fluid custom_container" ng-show="getRequest.orders.comment">
                            <div class="col-md-4 request_meal comment_sec">
                                <label class="control-label" translate="CLIENT.MESSAGE" ng-show="getRequest.orders.comment"></label>
                                <div ng-if="messageSplit(getRequest.orders.comment,0)!==undefined">
                                    {{messageSplit(getRequest.orders.comment,0)}}
                                </div>
                            </div>
                            <div class="col-md-4 confirm_meal comment_sec">
                                <label class="control-label" translate="CLIENT.MESSAGE" ng-show="getRequest.orders.comment"></label>
                                <div ng-show="getRequest.orders.comment">
                                    <div class="" >
                                        {{messageSplit(getRequest.orders.comment,1)}}
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <br>
                            <div class="alert alert-success text-center col-sm-offset-4 col-md-4 form-group" ng-show="vm.responseMsg == 'success' && vm.showMsg">
                                <span translate="Changes have been successfully updated!" class="ng-scope"></span>
                            </div>
                            <div class="alert alert-danger text-center col-sm-offset-4 col-md-4 form-group" ng-show="vm.responseMsg == 'failed' && vm.showMsg">
                                <span translate="Something wrong please try again!" class="ng-scope"></span>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-danger" target="_blank"  translate="CLIENT.PRINT_REQUEST" ng-click="vm.printRequest(getRequest.ID)"></button>
                        <button type="button" class="btn btn-default" data-dismiss="modal" translate="CLIENT.CLOSE"></button>

                        <div class="inline" ng-repeat="detail in getRequest.orders.request_order_detail |limitTo:1">
                            <button ng-if="checkPreDate(detail.serve_at)" ng-show="requestTab=='newRequests' && getRequest.status != 'N'" type="button" class="btn btn-primary" ng-click="requestSaveChanges($index, getRequest.ID, getRequest.orders.ID); vm.confirm = getRequest.ID" ng-disabled="vm.confirmStatus[getRequest.ID] == false;">
                            <i ng-show="vm.confirm == getRequest.ID" class="fa fa-spinner fa-spin"></i>
                            <span translate="CLIENT.SAVE CHANGES" ></span>
                            </button>
                            <button ng-if="checkPreDate(detail.serve_at)" type="button" class="btn btn-sm btn-danger" ng-click="vm.cancelRequest(getRequest.ID)">
                                <i ng-show="cancelId== getRequest.ID" class="fa fa-spinner fa-spin"></i>
                                <i class="fa fa-times"></i>
                                <span translate="CLIENT.CANCELNEW"></span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div ng-if="!vm.reqCancelLoading">
    <!--Cancel requestDetail Modals-->
    <div class="modal fade other_modal cancel_modal" ng-repeat="getRequest in vm.getCancelRequests track by $index" id="requestDetail{{getRequest.ID}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="container">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-body">
                        <div class="row container-fluid custom_container">
                            <div class="col-md-7">
                                <h5 class="pull-left"><label translate="CLIENT.REQUEST CONFIRMATION"></label></h5>
                            </div>
                            <div class="col-md-5">
                               <button type="button" class="close pull-right" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            </div>
                        </div>
                        <div class="row container-fluid custom_container">
                            <div class="col-md-2">
                                <h5 class="pull-left"><span class="inline" ng-repeat="detail in getRequest.orders.request_order_detail |limitTo:1">
                                    {{convertToDate(detail.serve_at) | date:'dd.MM.y'}}
                                </span></h5>
                            </div>
                            <div class="col-md-2">
                               <h5> <span translate="CLIENT.ONO"></span> {{getRequest.orders.ID}}</h5>
                            </div>
                        </div>
                        <div class="row container-fluid custom_container">
                            <div class="col-md-4 request_meal container_head">
                                <h5 class="text-center"><label translate="CLIENT.REQUIRED"></label></h5>
                            </div>
                            <div class="col-md-4 confirm_meal container_head">
                                <h5 class="text-center"><label translate="CLIENT.CONFIRMED"></label></h5>
                            </div>
                        </div>
                        <div ng-repeat="order_detail in getRequest.orders.request_order_detail track by $index">
                            <div class="container-fluid row custom_container" ng-init="vm.orderStrikethrough[order_detail.ID] = (order_detail.status == 3) ? 'strikethrough' : '';">
                                <div class="col-sm-4 request_meal">
                                    <div class="row custom_row">
                                        <div class="col-md-4">
                                             <div ng-class="vm.orderStrikethrough[order_detail.ID]" ng-if="!order_detail.side_dish || order_detail.side_dish == 0">
                                             {{convertToDate(order_detail.serve_at) | date:'HH:mm'}}
                                            </div>
                                        </div>
                                        <div class="col-md-8">
                                            <span ng-class="vm.orderStrikethrough[order_detail.ID]" class="pull-left"> {{order_detail.x_number}}x {{order_detail.request_menu.name}} </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 confirm_meal">
                                    <div class="row custom_row">
                                        <div class="col-md-4">
                                            <div ng-class="vm.orderStrikethrough[order_detail.ID]">
                                            <span ng-if="!order_detail.side_dish || order_detail.side_dish == 0">
                                             {{convertToDate(order_detail.serve_at) | date:'HH:mm'}}
                                            </span>  
                                            </div>
                                        </div>
                                        <div class="col-md-8">    
                                            <div ng-class="vm.orderStrikethrough[order_detail.ID]">
                                            <span ng-class="(order_detail.request_menu.confirmed_name!=order_detail.request_menu.name) ? 'confirm_name' : ''" ng-if="order_detail.request_menu.confirmed_name">{{order_detail.x_number}}x  {{order_detail.request_menu.confirmed_name}}</span> <span ng-if="!order_detail.request_menu.confirmed_name">{{order_detail.x_number}}x   {{order_detail.request_menu.name}}</span> 
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 action_sec">
                                    <div class="row custom_row">
                                        <div class="col-md-6">
                                            <div ng-class="vm.orderStrikethrough[order_detail.ID]">
                                            {{order_detail.x_number}}x  {{order_detail.price}}  {{order_detail.currency}} 
                                            </div>
                                        </div>                                
                                        <div class="col-md-3" ng-if="order_detail.status != 3">
                                            <button 
                                            ng-if="( order_detail.request_param 
                                            && (order_detail.request_param.request_min_servings != 0 
                                            && order_detail.request_param.request_deadline != '0000-00-00 00:00:00'  
                                            && order_detail.request_param.request_from != '00:00:00'
                                            && order_detail.request_param.request_to != '00:00:00') )
                                            || (order_detail.request_menu.request_ingredient.length > 0 ) 
                                            || (order_detail.comment && order_detail.comment != '<br>') "
                                            class="btn btn-info btn-sm" 
                                            ng-click="order_detail.visible = !order_detail.visible" 
                                            translate="CLIENT.DETAILSNEW"></button>
                                            <button ng-hide="( order_detail.request_param 
                                            && (order_detail.request_param.request_min_servings != 0 
                                            && order_detail.request_param.request_deadline != '0000-00-00 00:00:00'  
                                            && order_detail.request_param.request_from != '00:00:00'
                                            && order_detail.request_param.request_to != '00:00:00') )
                                            || (order_detail.request_menu.request_ingredient.length > 0 ) 
                                            || (order_detail.comment && order_detail.comment != '<br>') "
                                            class="btn btn-info btn-sm" 
                                            translate="CLIENT.NODETAILSNEW" ng-disabled="true"></button>
                                        </div>
                                        <div class="col-md-3" ng-if="order_detail.status == 3">
                                            <button class="btn btn-info btn-sm btn-danger" ng-disabled="order_detail.status == 3">
                                                <span translate="PREREG.CANCELLED"></span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <hr>
                            <div class="more" uib-collapse="!order_detail.visible">
                                <div class="row custom_container ing_listing" ng-repeat="ingredient_detail in order_detail.request_menu.request_ingredient track by $index" style="margin-top: 5px;">
                                    <div ng-if="ingredient_detail.duplicate_of_ingredient">
                                        <div class="col-md-8">
                                            <div class="row">
                                                <div class="col-sm-offset-2 col-md-4">
                                                    <span class="pull-left strikethrough" ng-init="vm.unit[ingredient_detail.ID] = (ingredient_detail.unit) ? 'CLIENT.'+ingredient_detail.unit : '';"> 
                                                        {{ingredient_detail.amount}}
                                                        {{vm.unit[ingredient_detail.ID] | translate }}
                                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                        {{ingredient_detail.ingredient.name}}
                                                    </span>
                                                </div>
                                                <div class="col-sm-offset-2  col-md-4">
                                                    <span class="pull-left" ng-init="vm.dunit[ingredient_detail.duplicate_of_ingredient.ID] = (ingredient_detail.duplicate_of_ingredient.unit) ? 'CLIENT.'+ingredient_detail.duplicate_of_ingredient.unit : '';"> 
                                                        {{ingredient_detail.duplicate_of_ingredient.amount}}
                                                        {{vm.dunit[ingredient_detail.duplicate_of_ingredient.ID] | translate }}
                                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                        {{ingredient_detail.duplicate_of_ingredient.ingredient.name}}
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div ng-if="!ingredient_detail.duplicate_of_ingredient && ingredient_detail.status_confirmed == 'D'">
                                        <div class="col-md-8">
                                            <div class="row" ng-init="vm.unit[ingredient_detail.ID] = (ingredient_detail.unit) ? 'CLIENT.'+ingredient_detail.unit : '';">
                                                <div class="col-sm-offset-2 col-md-4">
                                                    <span class="pull-left strikethrough"> 
                                                        {{ingredient_detail.amount}}
                                                        {{vm.unit[ingredient_detail.ID] | translate }}
                                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                        {{ingredient_detail.ingredient.name}}
                                                    </span>
                                                </div>
                                                <div class="col-sm-offset-2  col-md-4">
                                                    <span class="pull-left strikethrough"> 
                                                        {{ingredient_detail.amount}}
                                                        {{vm.unit[ingredient_detail.ID] | translate }}
                                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                        {{ingredient_detail.ingredient.name}}
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div ng-if="(ingredient_detail.duplicate_of == 0 || ingredient_detail.duplicate_of_ingredient.duplicate_of == '') && (ingredient_detail.status_confirmed == 'C')">
                                        <div class="col-md-8">
                                            <div class="row" ng-init="vm.unit[ingredient_detail.ID] = (ingredient_detail.unit) ? 'CLIENT.'+ingredient_detail.unit : '';">
                                                <div class="col-sm-offset-2 col-md-4">
                                                    <span class="pull-left"> 
                                                        {{ingredient_detail.amount}}
                                                        {{vm.unit[ingredient_detail.ID] | translate }}
                                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                        {{ingredient_detail.ingredient.name}}
                                                    </span>
                                                </div>
                                                <div class="col-sm-offset-2  col-md-4">
                                                    <span class="pull-left"> 
                                                        {{ingredient_detail.amount}}
                                                        {{vm.unit[ingredient_detail.ID] | translate }}
                                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                        {{ingredient_detail.ingredient.name}}
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <br>
                                </div>
                                <div class="row custom_container meal_comment_sec">
                                    <div class="col-md-4">
                                        <div class="row" ng-show="order_detail.comment && order_detail.comment != '<br>'">
                                            <div class="col-md-12">
                                                <label translate="CLIENT.DESCRIPTION"></label>
                                                <div ng-if="mySplit(order_detail.comment,0)!==undefined && mySplit(order_detail.comment,1)!==undefined">
                                                    {{mySplit(order_detail.comment,1)}}
                                                </div>
                                                <div ng-if="mySplit(order_detail.comment,0)!==undefined && mySplit(order_detail.comment,1)==undefined">
                                                    {{mySplit(order_detail.comment,0)}}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-5">
                                        <div class="form-group" ng-show="order_detail.comment && order_detail.comment != '<br>'">
                                            <label translate="CLIENT.DESCRIPTION"></label><br>
                                            <div ng-if="mySplit(order_detail.comment,0)!==undefined && mySplit(order_detail.comment,1)!==undefined">
                                                <div class="description_box confirm_name" ng-if="mySplit(order_detail.comment,0)" ng-show="order_detail.comment">
                                                    {{mySplit(order_detail.comment,0)}}
                                                </div>
                                            </div>
                                        </div>
                                        <div ng-if="!order_detail.side_dish || order_detail.side_dish == 0" ng-show="order_detail.request_param.request_min_servings != 0 && order_detail.request_param.request_deadline != '0000-00-00 00:00:00' && order_detail.request_param.request_from != '00:00:00' && order_detail.request_param.request_to != '00:00:00'">
                                            <div class="row form-group minimumserving" ng-show="order_detail.request_param">
                                                <div class="col-md-7">
                                                    <span translate="CLIENT.MINIMUM SERVINGS"></span>
                                                </div>
                                                <div class="col-md-5">
                                                    {{order_detail.request_param.request_min_servings}} (<span translate="CLIENT.MAX"></span>.  {{order_detail.request_param.request_max_servings}} )
                                                </div> 
                                            </div>
                                            <div class="row dealine" ng-show="order_detail.request_param">
                                                <div class="col-md-7">
                                                    <span translate="CLIENT.DEADLINE"></span>
                                                </div>
                                                <div class="col-md-5">
                                                    <label>{{convertToDate(order_detail.request_param.request_deadline) | date:'dd.MM. HH:mm'}}</label>
                                                </div> 
                                            </div>
                                            <div class="row serve_at_time" ng-show="order_detail.request_param">
                                                <div class="col-md-7">
                                                    <label translate="CLIENT.SERVED"></label>
                                                </div>
                                                <div class="col-md-5">
                                                    <label>{{convertToTime(order_detail.request_param.request_from) | date:'HH:mm'}}  - {{convertToTime(order_detail.request_param.request_to) | date:'HH:mm'}}</label>
                                                </div> 
                                            </div>
                                            <div class="row free_serving" ng-show="order_detail.request_param">
                                                <div class="col-md-12 request_free_every" ng-if="order_detail.request_param.request_free_every > 0">
                                                    <span translate="CLIENT.ONE FREE SERVING"></span>
                                                    {{ order_detail.request_param.request_free_every}}
                                                    <span translate="CLIENT.SERVINGS"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row container-fluid custom_container" ng-show="getRequest.orders.comment">
                            <div class="col-md-4 request_meal comment_sec">
                                <label class="control-label" translate="CLIENT.MESSAGE" ng-show="getRequest.orders.comment"></label>
                                <div ng-if="messageSplit(getRequest.orders.comment,0)!==undefined">
                                    {{messageSplit(getRequest.orders.comment,0)}}
                                </div>
                            </div>
                            <div class="col-md-4 confirm_meal comment_sec">
                                <label class="control-label" translate="CLIENT.MESSAGE" ng-show="getRequest.orders.comment"></label>
                                <div ng-show="getRequest.orders.comment">
                                    <div class="" >
                                        {{messageSplit(getRequest.orders.comment,1)}}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-danger" target="_blank"  translate="CLIENT.PRINT_REQUEST" ng-click="vm.printRequest(getRequest.ID)"></button>
                        <button type="button" class="btn btn-default" data-dismiss="modal" translate="CLIENT.CLOSE"></button>
                        <button ng-show="requestTab=='newRequests' && getRequest.status != 'N'" type="button" class="btn btn-primary" ng-click="requestSaveChanges($index, getRequest.ID, getRequest.orders.ID); vm.confirm = getRequest.ID" ng-disabled="vm.confirmStatus[getRequest.ID] == false;">
                            <i ng-show="vm.confirm == getRequest.ID" class="fa fa-spinner fa-spin"></i>
                            <span translate="CLIENT.SAVE CHANGES" ></span>
                        </button>
                        <button ng-show="requestTab=='newRequests' && getRequest.status == 'N'" type="button" class="btn btn-primary" ng-click="requestSaveChanges($index, getRequest.ID, getRequest.orders.ID); vm.confirm = getRequest.ID" ng-disabled="vm.clientNewRequest[getRequest.ID] == false || vm.clientNewRequestStatue == true">
                            <i ng-show="vm.confirm == getRequest.ID" class="fa fa-spinner fa-spin"></i>
                            <span translate="CLIENT.SAVE CHANGES" ></span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!--Meal Detail Modal-->
<div class="modal fade" id="mealDetailModal" tabindex="-1" role="dialog" aria-labelledby="mealDetailModalLabel">
    <div class="container">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="row container-fluid">
                        <div class="col-md-3">
                            <h5><label translate="CLIENT.MEAL DETAIL"></label></h5>
                        </div>
                        <div class="col-md-5">
                            <h5>
                                <span class="inline">
                                {{request.request_date | date : "dd.MM.y" }}
                                </span>
                            </h5>
                        </div>
                        <div class="col-md-2">
                        </div>
                        <div class="col-md-2">
                           <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        </div>
                    </div>
                </div>
                <div class="modal-body">
                    <!-- {{mealDetail}} -->
                    <div class="row">
                        <div class="col-md-2"><span ng-if="mealDetail.side_dish == 'N'">{{mealDetail.serve_time}}</span></div>
                        <div class="col-md-5">{{mealDetail.x_number}}x {{mealDetail.request_menu_name}}</div>
                        <div class="col-md-3" ng-show="mealDetail.price">
                            {{mealDetail.x_number}}x {{mealDetail.price}}  {{order_detail.currency}}
                        </div>
                        <div class="col-md-2">
                            <button class="btn btn-info btn-sm" ng-click="mealDetail.visible = !mealDetail.visible" translate="CLIENT.DETAILSNEW"></button>
                        </div>
                    </div>
                    <div uib-collapse="!mealDetail.visible">
                        <div class="row" ng-repeat="ingredient_detail in mealDetail.ingredientsDetails track by $index" style="margin-top: 5px;" >
                            <div class="col-sm-offset-2 col-md-2" ng-init="vm.unit[$index] = (ingredient_detail.unit) ? 'CLIENT.'+ingredient_detail.unit : ''; ">
                                <span> {{ingredient_detail.amount}}{{vm.unit[$index] | translate }}</span>
                            </div>
                            <div class="col-md-6">
                                <span class="pull-left">{{ingredient_detail.name}}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!--Phone No Modals-->
<div class="modal fade" id="phoneModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="container">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <div class="form-group has-error">
                        <h4 class="control-label ng-scope" translate="CLIENT.VALID PHONE NO"></h4>
                    </div>
                </div>
                <div class="modal-body">
                    <form name="myPhoneDetailsForm" novalidate style="min-height: 110px;">
                        <div class="form-group" ng-class="{ 'has-error': (myPhoneDetailsForm.phone.$touched || myPhoneDetailsForm.$submitted) && myPhoneDetailsForm.phone.$invalid}">
                            <label class="control-label" translate="CLIENT.PHONE"></label>
                            <input ng-required="true" name="phone" ng-model="vm.myDetails.phone" class="form-control">
                            <div class="form_error" ng-messages="myPhoneDetailsForm.phone.$error"
                                ng-if="myPhoneDetailsForm.phone.$touched || myDetaisForm.$submitted"
                                role="alert">
                                <p ng-message="required" translate="CLIENT.EMPTY PHONE"></p>
                            </div>
                        </div>
                        <button required type="submit" ng-click="vm.saveClientPhone(myPhoneDetailsForm.$valid)" ng-disabled="vm.loading" ng-class="{'disable-button' : vm.loading}"
                                class="btn btn-primary pull-right">
                            <span ng-show="vm.saveingPhoneNo" class="fa fa-spinner fa-spin"></span>
                            <span translate="CLIENT.SAVE"></span>
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>


<!--Modals-->
<div class="modal fade" ng-repeat="order in vm.orders track by $index" id="orderDetail{{$index}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="container">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="label{{$index}}"><span translate="CLIENT.ORDERS FOR"></span> <a ng-href="#/app/restaurant/{{order.ID_restaurant}}" ng-click="vm.gotoRestaurantDetail(order, $index)" data-dismiss="modal">{{order.restaurant_name}}</a></h4>
                </div>
                <div class="modal-body">
                    <ul style="list-style-type: none; margin-left: -30px;">
                        <li ng-repeat="order_detail in order.orders_detail.data track by $index" ng-if="order_detail.status != 6">
                            <!--<div class="col-md-1">-->
                                <!--<img src="assets/images/placeholder.jpg" alt="">-->
                            <!--</div>-->
                            <div class="container-fluid" >
                                <div class="col-md-5">
                                    <h4 class="item-title cl-brown">{{order_detail.menu_list.data.name}}</h4>
                                    <h5> <span class="cl-gray" translate="CLIENT.STATUS"></span>: {{ vm.statusNames[order_detail.status] | translate}}</h5>
                                    <p ng-text-truncate="order_detail.menu_list.data.comment"
                                       ng-tt-chars-threshold="30"></p>
                                </div>
                                <div class="col-md-2">
                                    <h5><span class="cl-gray" translate="CLIENT.QUANTITY"></span>: {{ order_detail.x_number}}</h5>
                                    <h5><span class="cl-gray" translate="SEARCH.PRICE"></span>: {{order_detail.price}} {{order_detail.currency}}</h5>
                                </div>
                                <div class="price col-md-2">
                                    <h5><span translate="CLIENT.TOTAL PRICE"></span><strong class="cl-brown display-block">{{order_detail.price * order_detail.x_number}} {{order_detail.currency}}</strong></h5>

                                </div>
                                <div class="col-md-3 text-center">
                                    <div class="btn-group btn-group-sm" role="group">
                                        <!--<button class="btn btn-success btn-sm" title="{{'CLIENT.EDIT ORDER' | translate}}" translate="CLIENT.EDIT"-->
                                                <!--ng-if="order_detail.status == 0 || order_detail.status == 3" ng-click="vm.changeOrderDetailStatus(5, order, $index)"></button>-->
                                        <button class="btn btn-warning btn-sm" title="{{'CLIENT.CANCEL ORDER' | translate}}" translate="RESTAURANT_DETAIL.CANCEL"
                                                ng-if="order_detail.status == 0" ng-disabled="!order_detail.can_cancel" ng-click="vm.changeOrderDetailStatus(3, order, $index)"></button>
												
										
                                        <button class="btn btn-danger btn-sm" title="{{'CLIENT.DELETE PERM' | translate}}" translate="CLIENT.DELETE"
                                                ng-if="order_detail.status == 5" ng-click="vm.changeOrderDetailStatus(6, order, $index)"></button>
                                    </div>
                                    <div class="container-fluid">
                                        <a href="" ng-click="order_detail.visible = !order_detail.visible">
                                            <strong translate="HOME.MORE" ng-if="!order_detail.visible"></strong>
                                            <strong translate="CLIENT.HIDE DETAIL" ng-if="order_detail.visible"></strong>
                                    </a>
                                        </div>
                                </div>
                            </div>
                            <div class="more" uib-collapse="!order_detail.visible" style="padding-left: 20px">
                                <div>
                                    <span class="cl-gray inline" translate="CLIENT.CHILD"></span>:
                                    <i class="inline" ng-if="order_detail.is_child !== '0'" translate="HOME.YES"></i>
                                    <i class="inline" ng-if="order_detail.is_child === '0'" translate="HOME.NO"></i>
                                </div>
                                <div>
                                    <span ng-if="order.cancellation['status'] == 'success'" class="inline cl-gray" translate="CLIENT.SERVING TIME"></span>
                                    <span ng-if="order.cancellation['status'] == 'error'" class="inline cl-gray" translate="CLIENT.SERVED AT"></span>:
                                    <i class="inline" ng-if="order_detail.serve_at == 'Invalid Date'"> --- </i>
                                    <i class="inline" ng-if="order_detail.serve_at != 'Invalid Date'">{{order_detail.serve_at | date:'d.M.yyyy h:mm' }}</i>
                                </div>
                                <div ng-if="order_detail.comment">
                                    <b><em class="inline" translate="CLIENT.ORDER COMMENT"></em>:</b>
                                    <i class="inline" ng-if="order_detail.comment" ng-text-truncate="order_detail.comment"
                                       ng-tt-chars-threshold="30"></i>
                                </div>
                                <div ng-if="order_detail.sideDish.data.length > 0">
                                    <b><em class="inline" translate="CLIENT.SIDE DISHES"></em>:</b>
                                    <div ng-repeat="side_dish in order_detail.sideDish.data" ng-if="side_dish.status != 6" class="container-fluid">
                                        <div class="col-md-5">
                                            <h4 class="item-title cl-brown">{{side_dish.menu_list.data.name}}</h4>
                                            <h5> <span class="cl-gray" translate="CLIENT.STATUS"></span>: {{ vm.statusNames[side_dish.status] | translate}}</h5>
                                            <p ng-text-truncate="side_dish.menu_list.data.comment"
                                               ng-tt-chars-threshold="30"></p>
                                        </div>
                                        <div class="col-md-2">
                                            <h5><span class="cl-gray" translate="CLIENT.QUANTITY"></span>: {{ side_dish.x_number}}</h5>
                                            <h5><span class="cl-gray" translate="SEARCH.PRICE"></span>: {{side_dish.menu_list.data.price}} {{side_dish.menu_list.data.currency}}</h5>
                                        </div>
                                        <div class="price col-md-2">
                                            <h5><span translate="CLIENT.TOTAL PRICE"></span>
                                                <strong class="cl-brown display-block">{{side_dish.menu_list.data.price * side_dish.x_number}} {{side_dish.menu_list.data.currency}}</strong></h5>

                                        </div>
                                        <div class="col-md-3">
                                            <button class="btn btn-warning btn-sm" title="{{'CLIENT.CANCEL ORDER' | translate}}" translate="RESTAURANT_DETAIL.CANCEL"
                                                    ng-if="side_dish.status == 0" ng-disabled="!side_dish.can_cancel" ng-click="side_dish.status = 3"></button>
                                            <button class="btn btn-danger btn-sm" title="{{'CLIENT.DELETE PERM' | translate}}" translate="CLIENT.DELETE"
                                                    ng-if="side_dish.status == 5" ng-click="side_dish.status = 6"></button>
                                        </div>
                                    </div>
                                </div>
                            </div>
							
                            <hr>
                        </li>
                    </ul>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" target="_blank" ng-if="order.status != 3" ng-click="vm.printOrder(order)" translate="CLIENT.PRINT_ORDER"></button>
                    <button type="button" class="btn btn-default" data-dismiss="modal" translate="UPLOAD.CLOSE"></button>
                    <button type="button" class="btn btn-primary" data-dismiss="modal"
                            ng-disabled="vm.loadingSaveChanges" ng-class="{'disable-button' : vm.loadingSaveChanges}" ng-click="vm.saveChanges(order, $index)">
                        <span translate="CLIENT.SAVE CHANGES" ></span>
                        <span ng-if="vm.loadingSaveChanges" class="fa fa-spinner fa-spin cl-brown"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!--Modals-->
<div class="modal fade" id="restt_location"  data-backdrop="static" data-keyboard="false" role="dialog" aria-labelledby="myModalLabel">
    <div class="container">
        <div class="modal-dialog modal-md" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="vm.changeDlg()"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" translate="CLIENT.QUESTION"></h4>
                </div>
                <div class="modal-body">
                    <div ng-if="vm.quiz">
                        <div class="quiz-top-picture">
                            <img src="../../gastrobooking.api/public/uploads/quiz/{{vm.quiz.q_photo}}" alt="">
                        </div>
                        <div class="quiz-content">
                            <p><span translate="CLIENT.QUESTION OF THE DAY"></span> <span>{{vm.currentTime}}</span></p>
                            <div class="quiz-main">
                                <h4>{{vm.realQuestion.question}}</h4>
                            </div>
                        </div>
                        <div class="tab-content quiz-content2">
                        <div id="quiz-step1" class="tab-pane fade in active">
                            <div class="quiz-time-bar">
                                <p>{{vm.quiztime | number:0}} s</p>
                                <div class="progress acive progress-striped">
                                  <div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 100%;">
                                  </div>
                                </div>
                            </div>
                            <p translate="CLIENT.ANSWERS"></p>
                            <div class="quiz-answer"><h4 data-toggle="pill" target="_self" ng-href="#quiz-step{{vm.realQuestion.result_a}}" ng-click="vm.selectedAnswer = vm.realQuestion.answer_a;vm.quizResult.answer = 'a';vm.q_testStart = false;">{{vm.realQuestion.answer_a}}</h4></div>
                            <div class="quiz-answer"><h4 data-toggle="pill" target="_self" ng-href="#quiz-step{{vm.realQuestion.result_b}}" ng-click="vm.selectedAnswer = vm.realQuestion.answer_b;vm.quizResult.answer = 'b';vm.q_testStart = false;">{{vm.realQuestion.answer_b}}</h4></div>
                            <div class="quiz-answer"><h4 data-toggle="pill" target="_self" ng-href="#quiz-step{{vm.realQuestion.result_c}}" ng-click="vm.selectedAnswer = vm.realQuestion.answer_c;vm.quizResult.answer = 'c';vm.q_testStart = false;">{{vm.realQuestion.answer_c}}</h4></div>
                            <div class="quiz-answer"><h4 data-toggle="pill" target="_self" ng-href="#quiz-step{{vm.realQuestion.result_d}}" ng-click="vm.selectedAnswer = vm.realQuestion.answer_d;vm.quizResult.answer = 'd';vm.q_testStart = false;">{{vm.realQuestion.answer_d}}</h4></div>
                        </div>
                        <div id="quiz-step2" class="tab-pane fade">
                            <p translate="CLIENT.RIGHT!"></p>
                            <div class="quiz-right-answer"><h4 data-toggle="pill" target="_self">{{vm.selectedAnswer}}</h4></div>
                            <div class="quiz-answer-description"><h4>{{vm.realQuestion.q_note}}</h4></div>
                            <div class="quiz-respond">
                                <p translate="CLIENT.RATE THIS QUESTION"></p>
                                <span translate="CLIENT.DIFFICULT"></span>
                                    <div class="cc-selector"  style="display:inline-block;vertical-align:middle;margin: 0px 15px 0 25px;">
                                        <input id="difficult-1" type="radio" name="credit-card1" value="difficult-1" ng-click="vm.quizResult.rate_difficulty = 1"/>
                                        <label class="drinkcard-cc difficult-1" for="difficult-1"></label>
                                        <input id="difficult-2" type="radio" name="credit-card1" value="difficult-2" ng-click="vm.quizResult.rate_difficulty = 2"/>
                                        <label class="drinkcard-cc difficult-2"for="difficult-2"></label>
                                        <input id="difficult-3" type="radio" name="credit-card1" value="difficult-3" ng-click="vm.quizResult.rate_difficulty = 3"/>
                                        <label class="drinkcard-cc difficult-3" for="difficult-3"></label>
                                        <input id="difficult-4" type="radio" name="credit-card1" value="difficult-4" ng-click="vm.quizResult.rate_difficulty = 4"/>
                                        <label class="drinkcard-cc difficult-4"for="difficult-4"></label>
                                        <input id="difficult-5" type="radio" name="credit-card1" value="difficult-5" ng-click="vm.quizResult.rate_difficulty = 5"/>
                                        <label class="drinkcard-cc difficult-5" for="difficult-5"></label>
                                    </div>
                                <span translate="CLIENT.EASY"></span>

                            </div>
                            <div class="quiz-respond">
                                <p translate="CLIENT.HOW DID YOU LIKE THIS QUESTION?"></p>
                                <span translate="CLIENT.TERRIBLE"></span>
                                <div class="row lead" style="display:inline-block;margin: 0px 8px 0 15px;vertical-align: middle;">
                                    <div id="hearts1" class="starrr"></div>
                                    <span id="count1" class="display:none" value="0"></span>
                                </div>
                                <span translate="CLIENT.GREAT"></span>
                            </div>
                            <div class="quiz-respond">
                                <span translate="CLIENT.MISTAKE? TELL US ABOUT IT, PLEASE."></span>
                                <button type="button" class="btn btn-default quiz-btn" ng-click="vm.sendEmail('right')" translate="CLIENT.SEND"></button>
                                <textarea id="email-right" class="form-control" rows="5" placeholder="quiz@gastro-booking.com"></textarea>

                            </div>
                            <div class="modal-footer">
                                <button id="next-question-r" type="button" class="btn btn-default" style="float:left; padding:8px 30px" data-toggle="pill" target="_self" ng-click="vm.nextQuestion()" translate="CLIENT.NEXT QUESTION"></button>
                                <button type="button" class="btn btn-default" style="float:right; padding: 8px 30px" ng-click="vm.changeDlg()" translate="CLIENT.CLOSE"></button>
                            </div>
                        </div>
                        <div id="quiz-step3" class="tab-pane fade">
                            <p translate="CLIENT.WRONG ANSWER"></p>
                            <div class="quiz-wrong-answer"><h4 data-toggle="pill" target="_self">{{vm.selectedAnswer}}</h4></div>
                            <div class="quiz-right-answer"><h4 data-toggle="pill" target="_self">{{vm.realQuestion.q_rightans}}</h4></div>
                            <div class="quiz-answer-description"><h4>{{vm.realQuestion.q_note}}</h4></div>
                            <div class="quiz-respond">
                                <p translate="CLIENT.RATE THIS QUESTION"></p>
                                <span translate="CLIENT.DIFFICULT"></span>
                                    <div class="cc-selector"  style="display:inline-block;vertical-align:middle;margin: 0px 15px 0 25px;">
                                        <input id="difficult-21" type="radio" name="credit-card" value="difficult-21" ng-click="vm.quizResult.rate_difficulty = 1"/>
                                        <label class="drinkcard-cc difficult-21" for="difficult-21"></label>
                                        <input id="difficult-22" type="radio" name="credit-card" value="difficult-22" ng-click="vm.quizResult.rate_difficulty = 2"/>
                                        <label class="drinkcard-cc difficult-22"for="difficult-22"></label>
                                        <input id="difficult-23" type="radio" name="credit-card" value="difficult-23" ng-click="vm.quizResult.rate_difficulty = 3"/>
                                        <label class="drinkcard-cc difficult-23" for="difficult-23"></label>
                                        <input id="difficult-24" type="radio" name="credit-card" value="difficult-24" ng-click="vm.quizResult.rate_difficulty = 4"/>
                                        <label class="drinkcard-cc difficult-24"for="difficult-24"></label>
                                        <input id="difficult-25" type="radio" name="credit-card" value="difficult-25" ng-click="vm.quizResult.rate_difficulty = 5"/>
                                        <label class="drinkcard-cc difficult-25" for="difficult-25"></label>
                                    </div>
                                <span>Easy</span>

                            </div>
                            <div class="quiz-respond">
                                <p translate="CLIENT.HOW DID YOU LIKE THIS QUESTION?"></p>
                                <span translate="CLIENT.TERRIBLE"></span>
                                <div class="row lead" style="display:inline-block;margin: 0px 8px 0 15px;vertical-align: middle;">
                                    <div id="hearts2" class="starrr"></div>
                                    <span id="count2" class="display:none" value="0"></span>
                                </div>
                                <span translate="CLIENT.GREAT"></span>
                            </div>
                            <div class="quiz-respond">
                                <span translate="CLIENT.MISTAKE? TELL US ABOUT IT, PLEASE."></span>
                                <button type="button" class="btn btn-default quiz-btn" ng-click="vm.sendEmail('wrong')" translate="CLIENT.SEND"></button>
                                <textarea id="email-wrong" class="form-control" rows="5" placeholder="quiz@gastro-booking.com"></textarea>

                            </div>
                            <div class="modal-footer">
                                <button  id="next-question-w" type="button" class="btn btn-default" style="float:left; padding:8px 30px" data-toggle="pill" target="_self" ng-click="vm.nextQuestion()" translate="CLIENT.NEXT QUESTION"></button>
                                <button type="button" class="btn btn-default" style="float:right; padding: 8px 30px" ng-click="vm.changeDlg()" translate="CLIENT.CLOSE"></button>
                            </div>
                        </div>
                    </div>
                    </div>
                    <div ng-if="!vm.quiz">
                        {{ 'CLIENT.NO QUESTIONS' | translate }}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<script id="popover.html" type="text/ng-template">
    <div id="tip">
        <h4>Hello again</h4>
    </div>
</script>

<script type="text/javascript">
    // Starrr plugin (https://github.com/dobtco/starrr)
    var __slice = [].slice;

    (function($, window) {
      var Starrr;

      Starrr = (function() {
        Starrr.prototype.defaults = {
          rating: void 0,
          numStars: 5,
          change: function(e, value) {}
        };

        function Starrr($el, options) {
          var i, _, _ref,
            _this = this;

          this.options = $.extend({}, this.defaults, options);
          this.$el = $el;
          _ref = this.defaults;
          for (i in _ref) {
            _ = _ref[i];
            if (this.$el.data(i) != null) {
              this.options[i] = this.$el.data(i);
            }
          }
          this.createStars();
          this.syncRating();
          this.$el.on('mouseover.starrr', 'span', function(e) {
            return _this.syncRating(_this.$el.find('span').index(e.currentTarget) + 1);
          });
          this.$el.on('mouseout.starrr', function() {
            return _this.syncRating();
          });
          this.$el.on('click.starrr', 'span', function(e) {
            return _this.setRating(_this.$el.find('span').index(e.currentTarget) + 1);
          });
          this.$el.on('starrr:change', this.options.change);
        }

        Starrr.prototype.createStars = function() {
          var _i, _ref, _results;

          _results = [];
          for (_i = 1, _ref = this.options.numStars; 1 <= _ref ? _i <= _ref : _i >= _ref; 1 <= _ref ? _i++ : _i--) {
            _results.push(this.$el.append("<span class='glyphicon .glyphicon-star-empty' name='quality'></span>"));
          }
          return _results;
        };

        Starrr.prototype.setRating = function(rating) {
          if (this.options.rating === rating) {
            rating = void 0;
          }
          this.options.rating = rating;
          this.syncRating();
          return this.$el.trigger('starrr:change', rating);
        };

        Starrr.prototype.syncRating = function(rating) {
          var i, _i, _j, _ref;

          rating || (rating = this.options.rating);
          if (rating) {
            for (i = _i = 0, _ref = rating - 1; 0 <= _ref ? _i <= _ref : _i >= _ref; i = 0 <= _ref ? ++_i : --_i) {
              this.$el.find('span').eq(i).removeClass('glyphicon-star-empty').addClass('glyphicon-star');
            }
          }
          if (rating && rating < 5) {
            for (i = _j = rating; rating <= 4 ? _j <= 4 : _j >= 4; i = rating <= 4 ? ++_j : --_j) {
              this.$el.find('span').eq(i).removeClass('glyphicon-star').addClass('glyphicon-star-empty');
            }
          }
          if (!rating) {
            return this.$el.find('span').removeClass('glyphicon-star').addClass('glyphicon-star-empty');
          }
        };

        return Starrr;

      })();
      return $.fn.extend({
        starrr: function() {
          var args, option;

          option = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
          return this.each(function() {
            var data;

            data = $(this).data('star-rating');
            if (!data) {
              $(this).data('star-rating', (data = new Starrr($(this), option)));
            }
            if (typeof option === 'string') {
              return data[option].apply(data, args);
            }
          });
        }
      });
    })(window.jQuery, window);

    $(function() {
      return $(".starrr").starrr();
    });

    $( document ).ready(function() {

      $('#hearts1').on('starrr:change', function(e, value){
        $('#count1').attr("value", value);
      });

      $('#hearts2').on('starrr:change', function(e, value){
        $('#count2').attr("value", value);
      });
    });
</script>
